(self.wpJsonpPcmallPcpagevoucherdetail=self.wpJsonpPcmallPcpagevoucherdetail||[]).push([[955],{41955:function(r,e,o){"use strict";o.d(e,{t:function(){return _}});var c,n=o(63804),s=o.n(n),u=o(52181),i=o(17561),t=o(80950),h=o(21259),a=o(41064),d=o(6339);function p(){return p=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},p.apply(this,arguments)}var v=h.SAVE_VOUCHER,m=(0,u.Z)(((c={})[t.Au.REQUESTED]=function(r,e){var o,c,n=e,s=n.shopId,u=n.itemId,i=u?((o={})[u]={vouchers:r.shop&&r.shop[s]&&r.shop[s][u]&&r.shop[s][u].vouchers||[],error:-100},o):{};return p({},r,{shop:p({},r.shop,(c={},c[s]=p({},r.shop[s],!u&&{error:-100}||{},i),c))})},c[t.Au.SUCCESS]=function(r,e){var o,c,n,s=e,u=s.data,i=s.shopId,t=s.itemId,h=s.priorityVoucherList;return p({},r,{shop:p({},r.shop,!t&&(o={},o[i]={error:0,vouchers:u&&u.voucher_list||[],priorityVoucherList:h},o)||{},t&&r.shop&&(n={},n[i]=p({},r.shop[i],(c={},c[t]={vouchers:u&&u.voucher_list||[],error:0},c)),n))})},c[t.Au.FAILED]=function(r,e){var o,c,n,s=e,u=s.shopId,i=s.error,t=s.itemId;return p({},r,{shop:p({},r.shop,!t&&(o={},o[u]={error:i,vouchers:[]},o)||{},{error:i},t&&r.shop&&(n={},n[u]=p({},r.shop[u],(c={},c[t]={vouchers:[],error:i},c)),n))})},c[t.rQ.REQUESTED]=function(r,e){var o,c=e;return p({},r,{recommendedShopVouchers:p({},r.recommendedShopVouchers,{progress:i.Z.REQ}),shop:p({},r.shop,(o={},o[c.shopId]={vouchers:[],error:-100},o))})},c[t.rQ.FAILED]=function(r,e){var o,c=e;return p({},r,{recommendedShopVouchers:p({},r.recommendedShopVouchers,{progress:i.Z.ERR,error:c.error,error_msg:c.error_msg}),shop:p({},r.shop,(o={},o[c.shopId]=p({},r.shop[c.shopId],{error:c.error}),o))})},c[t.rQ.SUCCESS]=function(r,e){var o,c,n=e,s=n.data.shop_vouchers,u=n.shopId,t=n.isCheckout;return p({},r,{recommendedShopVouchers:p({},r.recommendedShopVouchers,(o={},o[u]=(s||[]).filter((function(r){var e,o;return!t&&![a.i8.NOT_COMPLETE_TASK].includes(null!=(e=r.invalid_message_code)?e:-1/0)||!a.j4.includes(null!=(o=r.invalid_message_code)?o:-1/0)})),o.progress=i.Z.OK,o)),shop:p({},r.shop,(c={},c[u]=p({},r.shop[u],{error:0}),c))})},c[v.FAILED]=function(r,e){var o,c=e.payload,n=c.error,s=c.error_msg,u=c.error_config,t=c.voucher_code;return p({},r,{claimProgress:p({},r.claimProgress,(o={},o[t]={progress:n===a.o$?i.Z.OK:i.Z.ERR,error:n,error_msg:s,error_config:u},o))})},c[v.SUCCESS]=function(r,e){var o,c,n,s=e,u=s.payload.voucher&&s.payload.voucher.shop_id,t=s.payload,h=t.voucher_code,a=t.voucher_promotionid,v=t.voucher,m=r.shop,l=(0,d.hy)(r,h,a?String(a):null);if(u){var f,_=r.shop[u],g=(_&&_.vouchers||[]).map((function(r){return r.voucher_code===s.payload.voucher_code?p({},r,{is_claimed_before:!0}):r}));m=p({},m,((f={})[u]=p({},_,{vouchers:[].concat(g)}),f))}return p({},r,{shop:p({},m),claimProgress:p({},r.claimProgress,(o={},o[s.payload.voucher_code]={progress:i.Z.OK},o)),voucherDetail:(n={},n[h||"0"]=(c={},c[a]=p({},l,{voucher_basic_info:l.voucher_basic_info||v?p({},l.voucher_basic_info,v):null,progress:i.Z.OK}),c),n)})},c[v.REQUESTED]=function(r,e){var o,c=e;return p({},r,{claimProgress:p({},r.claimProgress,(o={},o[c.payload.voucher_code]={progress:i.Z.REQ},o))})},c[t.cI.REQUESTED]=function(r,e){var o,c=e;return p({},r,{claimProgress:p({},r.claimProgress,(o={},o[c.voucher_code]={progress:i.Z.REQ},o))})},c[t.cI.SUCCESS]=function(r,e){var o,c=e,n=c.voucher_code,s=c.invalid_message_code,u=c.shopid,t=!s||s===a.eg.CLAIM_ERROR_EXIST,h=u,d=r.shop;if(h){var v,m=r.shop[h],l=(m&&m.vouchers||[]).map((function(r){return r.voucher_code===n?p({},r,{is_claimed_before:t}):r}));d=p({},d,((v={})[h]=p({},m,{vouchers:[].concat(l)}),v))}return p({},r,{shop:p({},d),claimProgress:p({},r.claimProgress,(o={},o[n]={progress:t?i.Z.OK:i.Z.ERR,invalid_message_code:s},o))})},c[t.cI.FAILED]=function(r,e){var o,c=e,n=c.error;return p({},r,{claimProgress:p({},r.claimProgress,(o={},o[c.voucher_code]={progress:n===a.o$?i.Z.OK:i.Z.ERR,error:n,error_msg:c.error_msg},o))})},c[t.XB.REQUESTED]=function(r,e){var o,c=e;return p({},r,{claimProgress:p({},r.claimProgress,(o={},o[c.voucher_code]={progress:i.Z.REQ},o))})},c[t.XB.SUCCESS]=function(r,e){var o,c=e,n=c.shopid,s=r.shop;if(c.voucher&&n){var u,t=r.shop[n],h=(t&&t.vouchers||[]).map((function(r){return r.voucher_code===c.voucher_code?p({},r,{is_claimed_before:!0}):r}));s=p({},s,((u={})[n]=p({},t,{vouchers:[].concat(h)}),u))}return p({},r,{shop:p({},s),claimProgress:p({},r.claimProgress,(o={},o[c.voucher_code]={progress:c.voucher?i.Z.OK:i.Z.ERR},o))})},c[t.XB.FAILED]=function(r,e){var o,c=e,n=c.error,s=c.error_msg,u=c.error_config,t=c.voucher_code,h=c.invalid_message_code;return p({},r,{claimProgress:p({},r.claimProgress,(o={},o[t]={progress:n===a.o$?i.Z.OK:i.Z.ERR,error:n,error_msg:s,error_config:u,invalid_message_code:h},o))})},c[t.KW]=function(r,e){var o,c=e.voucher,n=c.shop_id;return n?p({},r,{recommendedShopVouchers:p({},r.recommendedShopVouchers,(o={},o[n]=[c].concat(r.recommendedShopVouchers[n].filter((function(r){return r.voucher_code!==c.voucher_code}))),o))}):r},c[t.Ec]=function(r,e){var o,c=e.voucher,n=c.shop_id;return n?p({},r,{recommendedShopVouchers:p({},r.recommendedShopVouchers,(o={},o[n]=r.recommendedShopVouchers[n].filter((function(r){return r.voucher_code!==c.voucher_code})),o))}):r},c[t.mk]=function(r,e){var o,c=e.voucher,n=c.shop_id;return n?p({},r,{recommendedShopVouchers:p({},r.recommendedShopVouchers,(o={},o[n]=r.recommendedShopVouchers[n].map((function(r){return r.voucher_code===c.voucher_code?c:r})),o))}):r},c[t.Js]=function(r,e){var o,c=e.voucher.voucher_code;return c?p({},r,{claimProgress:p({},r.claimProgress,(o={},o[c]={progress:i.Z.OK},o))}):r},c[t._U.SUCCESS]=function(r,e){var o={};return e.data.forEach((function(e){var c,n,s=r.shop[e.shopid];o[e.shopid]={error:0,vouchers:(c=s&&s.vouchers,n=e.voucher_list,n.map((function(r){return p({},r,{is_claimed_before:c&&c.some((function(e){return e.voucher_promotionid===r.voucher_promotionid&&e.is_claimed_before}))})})))}})),p({},r,{shop:p({},r.shop,o)})},c[t.u7.REQUESTED]=function(r,e){var o,c,n=e,s=n.promotionid;return p({},r,{voucherDetail:(c={},c[n.voucher_code||"0"]=(o={},o[s]={progress:i.Z.REQ},o),c)})},c[t.u7.SUCCESS]=function(r,e){var o,c,n=e,s=n.data,u=n.promotionid,t=n.voucher_code;return p({},r,{voucherDetail:(c={},c[t||"0"]=p({},r.voucherDetail[t],(o={},o[u]=p({},s,{progress:i.Z.OK,error:void 0,error_msg:void 0}),o)),c)})},c[t.u7.FAILED]=function(r,e){var o,c,n=e,s=n.error,u=n.promotionid,t=n.voucher_code,h=n.error_msg;return p({},r,{voucherDetail:(c={},c[t||"0"]=p({},r.voucherDetail[t],(o={},o[u]={error:s,progress:i.Z.ERR,error_msg:h},o)),c),error:s||-1})},c),{shop:{},claimProgress:{},voucherDetail:{},recommendedShopVouchers:{}}),l=o(57762),f=["injectAsyncReducer"];function _(r){function e(e){var o=e.injectAsyncReducer,c=function(r,e){if(null==r)return{};var o,c,n={},s=Object.keys(r);for(c=0;c<s.length;c++)o=s[c],e.indexOf(o)>=0||(n[o]=r[o]);return n}(e,f);return s().useEffect((function(){o({voucher:m})}),[o]),s().createElement(r,c)}return e.displayName="withVoucherReduxInjected("+function(r){return r.displayName||r.name||"Component"}(r)+")",(0,l.withInjectReducer)(e)}},6339:function(r,e,o){"use strict";function c(){return c=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])}return r},c.apply(this,arguments)}function n(r,e){return r&&r.recommendedShopVouchers&&r.recommendedShopVouchers[e]||[]}function s(r){return Object.entries(r.claimProgress||[]).reduce((function(r,e){var o,n=e[0],s=e[1];return c({},r,((o={})[n]=s.progress,o))}),{})}function u(r){return Object.entries(r.claimProgress||[]).reduce((function(r,e){var o,n=e[0],s=e[1];return c({},r,((o={})[n]=s.invalid_message_code,o))}),{})}function i(r,e){if(!e)return 0;var o=r.claimProgress[e];return o?o.progress:0}function t(r,e,o){if(!o)return{};var c=r&&r.voucherDetail&&r.voucherDetail[e||"0"];return c&&c[o]||{}}o.d(e,{zq:function(){return n},HL:function(){return s},OX:function(){return u},KT:function(){return i},hy:function(){return t}})}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopee.io/pcmall-voucher/_/955.4e4d7e39cda7c5e02009.legacy.js.map