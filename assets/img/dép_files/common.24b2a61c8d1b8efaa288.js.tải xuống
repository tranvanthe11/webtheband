(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m)=>(()=>{var g={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):_(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,l=_(i,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new A(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},782:e=>{"use strict";e.exports=l},830:e=>{"use strict";e.exports=d},292:e=>{"use strict";e.exports=p},846:e=>{"use strict";e.exports=S},674:e=>{"use strict";e.exports=a},378:e=>{"use strict";e.exports=s},464:e=>{"use strict";e.exports=i},428:e=>{"use strict";e.exports=E},661:e=>{"use strict";e.exports=r},444:e=>{"use strict";e.exports=c},598:e=>{"use strict";e.exports=o},550:e=>{"use strict";e.exports=h},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=u},655:e=>{"use strict";e.exports=m},944:e=>{"use strict";e.exports=_},975:e=>{"use strict";e.exports=O},947:e=>{"use strict";e.exports=v},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=n},455:e=>{"use strict";e.exports=f},459:e=>{"use strict";e.exports=T}},b={};function y(e){var t=b[e];if(void 0!==t)return t.exports;var r=b[e]={exports:{}};return g[e](r,r.exports,y),r.exports}y.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return y.d(t,{a:t}),t},y.d=(e,t)=>{for(var r in t)y.o(t,r)&&!y.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},y.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),y.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var R={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}y.r(R),y.d(R,{$tracker:()=>Gn,BadRequest:()=>ct,Blacklist:()=>_t,CancelOrderWarning:()=>vt,CustomError:()=>ft,EventBus:()=>En,ExceptionName:()=>xr,FileReaderError:()=>mt,Forbidden:()=>dt,FullStoryProjectId:()=>Qi,HTTPError:()=>bt,InternalServerError:()=>lt,Limiting:()=>Ot,LiveReportPoint:()=>Tr,LiveSecretKey:()=>gr,MarkName:()=>Nr,NoLiveKeyMap:()=>Pr,NoLiveReportPoint:()=>mr,NoLiveSecretKey:()=>br,NotFound:()=>it,ReportComponent:()=>Ur,ReportPoint:()=>qr,TemporyError:()=>gt,Unauthoried:()=>st,UnprocessableEntity:()=>ut,UntrustedNetwork:()=>ht,UnverifiedPhoneNumber:()=>Tt,Webview:()=>St,addMediaFile:()=>ah,addMediaFileHandler:()=>$l,addOnDealItemDetailCleaner:()=>ie,addOnDealRuleCleaner:()=>le,agentConversationEntitiesSelector:()=>Jn,agentConversationSchema:()=>S,allMessageIdsSelector:()=>pE,allProductsSearchStatusSelector:()=>Dv,allProductsSelector:()=>xv,authorizedShopsCountSelector:()=>Va,autoTranslation:()=>tS,batchRemoveDraft:()=>GS,batchRemoveDraftHandler:()=>Ql,batchUpdateRecord:()=>To,blockUserRequested:()=>Ja,bundleDealItemDetailCleaner:()=>de,bundleDealRuleCleaner:()=>pe,cancelReasonsSelector:()=>Sv,captchaSignatureSelector:()=>ha,captchaVisibleSelector:()=>Oa,changeConversationStatusRequested:()=>ul,changeConversationStatusRequestedSaga:()=>Sp,chatbotImageSelector:()=>GE,chatbotOrderCleaner:()=>qe,checkUserPermissionRequested:()=>Bs,checkUserPermissionSucceeded:()=>Ys,clearApiCache:()=>Xt,clearMediaFile:()=>sh,clearMediaFileHandler:()=>ed,clearReportRequested:()=>Gv,closeMediaPreviewModalRequested:()=>Sh,closeModal:()=>jo,collectAsyncTask:()=>Xr,collectComponentTask:()=>zr,collectLoadTask:()=>Kr,configTrackerUser:()=>Un,contactsEntitiesSelector:()=>so,contactsSchema:()=>O,conversationBeenDeletedSelector:()=>xu,conversationDirectionSelector:()=>ou,conversationEntitiesSelector:()=>Xn,conversationHttpStatusSelector:()=>nu,conversationIdsSelector:()=>Xi,conversationLastMessageSelector:()=>dE,conversationOperateRequested:()=>dl,conversationReducer:()=>Rf,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>io,conversationsSelector:()=>au,converstionSyncUpdatesSaga:()=>Hp,copySucceedFeedback:()=>O_,createUpdateConversationFilterHandler:()=>kl,curConvsMessageSelector:()=>NE,curMessagesRelatedSelector:()=>iE,curTabFocusedSelector:()=>Ua,currentAllMessageShortcutsSelector:()=>XE,currentBuyerIdSelector:()=>Su,currentBuyerOffersSelector:()=>wS,currentBuyerOrdersSelector:()=>mv,currentBuyerSelector:()=>Au,currentBuyerShopIdSelector:()=>Iu,currentBuyerShopSelector:()=>If,currentConversationAutoTranslationSelectors:()=>gu,currentConversationBuyerIdSelectors:()=>Tu,currentConversationCanReadSelector:()=>ru,currentConversationIdSelector:()=>tu,currentConversationMaxOptionHideTimeSelectors:()=>bu,currentConversationSelector:()=>Eu,currentConversationShopIdSelectors:()=>vu,currentConversationShopRegionSelectors:()=>hu,currentConversationShopSelectors:()=>Ou,currentConversationStatusSelectors:()=>mu,currentConversationToNameSelector:()=>ku,currentConversationTranslationAccessSelector:()=>Nu,currentDraftSelector:()=>WS,currentFaqHistorySeletor:()=>Z_,currentFaqSessionInfoSelector:()=>HE,currentFetchResultSelector:()=>Uv,currentGroupIdSelector:()=>WE,currentGroupTypeSelector:()=>BE,currentOfferPaginationSelector:()=>PS,currentOffersFetchResultSelector:()=>IS,currentOrderFetchResultSelector:()=>vv,currentPendingOffersCountSelector:()=>Fu,currentPreviewMediaIdSelector:()=>fh,currentShopIdSelector:()=>Cu,currentUserDistributionStatusSelector:()=>wa,currentUserIdSelector:()=>ia,currentUserIsSellerSelector:()=>Ya,currentUserRoleSelector:()=>Pa,currentUserSelector:()=>ga,currentUserShopIdSelector:()=>Aa,currentUserShopSelector:()=>Ia,defaultPagination:()=>u_,degradeConversationIdsSelector:()=>lu,deleteConfigDurationSelector:()=>Ea,deleteConfigSelector:()=>Sa,deleteConversationRequested:()=>Yu,deleteConversationSucceedHandler:()=>xl,deleteConversationSucceeded:()=>Qu,deleteMediaFile:()=>ch,deleteMediaFileHandler:()=>Zl,deleteRecord:()=>vo,distributionAccountStatusSelector:()=>aS,draftHashSelector:()=>YS,draftReducer:()=>BS,entitiesSelector:()=>Kn,entityReducer:()=>Co,entryPointSelector:()=>hE,exceptionTag:()=>kr,failedMessageIdsSelector:()=>_E,fakeConversationSucceeded:()=>qu,faqHistoryHashSelector:()=>J_,faqHistoryMessagesSelector:()=>RE,faqHistoryhttpStatusSelector:()=>X_,faqIdSelector:()=>$_,faqSessionInfoSelector:()=>FE,feedStoryEntitiesSelector:()=>oo,feedStorySchema:()=>f,feedbackRequested:()=>OO,feedbackSelector:()=>JO,feedbackSucceeded:()=>hO,fetch:()=>hr,fetchConversationsRequested:()=>Ku,fetchConversationsRequestedSaga:()=>Zd,fetchConversationsSucceeded:()=>zu,fetchDegradeConversationsDetail:()=>ll,fetchDegradeConversationsDetailSaga:()=>ep,fetchMessagePreview:()=>Jd,fetchSettings:()=>ES,fetchSettingsRequested:()=>iS,fetchSettingsStatusSelector:()=>Th,fetchShopAuth:()=>r_,fetchShopAuthRequested:()=>Nf,fetchShopDetailInfo:()=>Lf,fetchShopSettings:()=>Mh,fetchShopTranslationSettings:()=>wh,fetchShopsByIds:()=>t_,fetchShopsRequested:()=>wf,fetchUserOrderDetail:()=>ns,fetchUserOrderDetailRequested:()=>Yc,fetchUserOrderDetailSucceeded:()=>Qc,fetchedShopIdsSelector:()=>Cf,filterSelector:()=>pu,filteredConversationsSelector:()=>fu,flashSaleItemDetailCleaner:()=>fe,forceLogoutRequested:()=>Ds,formatOffer:()=>Zh,formatSinglePrice:()=>oe,generatePersist:()=>fn,getConversation:()=>yu,getConversationDetailRequested:()=>Wu,getConversationFakingMessages:()=>mE,getConversationIds:()=>ln,getConversationLastMessage:()=>sd,getConversationPendingOffersCountSelector:()=>Hu,getConversationShopId:()=>Ru,getConversationShopRegion:()=>Vu,getConversations:()=>Du,getConvsMessagesRelatedSelector:()=>uE,getDraft:()=>QS,getGuide:()=>dc,getGuideFailed:()=>uc,getGuideRequested:()=>sc,getGuideSucceeded:()=>ic,getMessageSelector:()=>cE,getMessagesSelector:()=>sE,getPendingOffersCountRequested:()=>yl,getRouterPath:()=>yn,getShopUnreadCountByIds:()=>e_,getTimestamp:()=>rd,getToastInformation:()=>E_,getTranslation:()=>un,handle401ErrorRequested:()=>pr,handleConnect:()=>nO,handleLoginSucceededLogic:()=>ws,handleMessageSubscribe:()=>zl,handleUnreadCountChangeAction:()=>ea,hasDeletePermissionSelector:()=>_a,hasMoreLatestMessageSelector:()=>SE,hasMoreOlderMessageSelector:()=>EE,hasReplyPermissionSelector:()=>fa,hasVideoPermissionSelector:()=>pa,heartbeat:()=>Qt,history:()=>bn,inScrollToMessageSelector:()=>jE,initMDAPSdk:()=>Zr,inlocationSelector:()=>Zi,isCBSellerSelector:()=>Ra,isError:()=>yt,isMainPageSelector:()=>Na,isNavigateToUnreadMessageSelector:()=>Lu,isScChatSelector:()=>ja,isShared:()=>Vt,isSubAccountSelector:()=>ya,itemDetailCleaner:()=>ce,itemListDetailCleaner:()=>se,keywordSelector:()=>du,legacyMessageShortcutsCountSelector:()=>oS,listsHashSelector:()=>Uu,loadingSelector:()=>sa,localeSelector:()=>ba,locationMessage:()=>El,login:()=>Ns,loginRequested:()=>gs,loginSocket:()=>Yt,loginSucceeded:()=>bs,loginSuccessSelector:()=>Ga,logout:()=>Fi,logoutHandler:()=>Gi,logoutRequested:()=>ys,logoutSucceeded:()=>Rs,markMessagesRequested:()=>el,markMessagesRequestedSaga:()=>lp,markMessagesSucceeded:()=>tl,mdapConfig:()=>Vr,mediaListSelector:()=>nh,mediaMapSelector:()=>rh,mediaMessagesSelector:()=>DE,mediaPreviewModalReducer:()=>hh,mediaPreviewerReducer:()=>uh,memoize:()=>Yn,messageEntitiesSelector:()=>$n,messageFillStatusMapSelector:()=>lE,messageHasNextSelector:()=>OE,messageHttpStatusSelector:()=>eE,messageOffersSelector:()=>wE,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>YE,messageShortcutGroupEntitiesSelector:()=>no,messageShortcutGroupHttpStatusSelector:()=>QE,messageShortcutGroupSelector:()=>VE,messageShortcutsSchema:()=>_,messageShortcutsSelector:()=>qE,messageShortcutsStatusSelector:()=>nS,messageSourceIdsSelector:()=>PE,messageSourceSelector:()=>IE,messageTimeStyleSelector:()=>rS,messagesLengthLevelSelector:()=>uo,messagesRelatedMapSelector:()=>tE,messagesSelector:()=>TE,missedReadNoticeCountSelector:()=>$i,modalReducer:()=>Go,modalSelector:()=>wo,modalShowSelector:()=>Po,muteConversationRequested:()=>bl,myShopSelector:()=>Af,navigateToUnreadMessageIdSelector:()=>ju,networkJudge:()=>mn,networkStatusSelector:()=>la,newMessageFlagSelector:()=>Ta,newbieSelector:()=>ua,normalize:()=>T,noticesCountSelector:()=>ZO,notificationTypes:()=>id,offerCleaner:()=>Se,offerDetailCleaner:()=>Ee,offerHttpStatusSelector:()=>yS,offerSchema:()=>l,offerSelector:()=>CS,offersSelector:()=>RS,offlineMessagesSelector:()=>rE,openedMenuSelector:()=>La,orderCleaner:()=>Qe,orderEntitiesSelector:()=>eo,orderHttpStatusSelector:()=>Ov,orderLogisticsCleaner:()=>We,orderSchema:()=>i,orderSelector:()=>Ev,personalMessageShortcutsSelector:()=>KE,pinConversationRequested:()=>nl,previewMediasSelector:()=>CE,productCleaner:()=>Bn,productEntitiesSelector:()=>to,productSchema:()=>u,productSelector:()=>gv,productsSelector:()=>bv,rateCardEntitiesSelector:()=>ao,rateCardSelector:()=>UE,rateCardsSchema:()=>E,readMessage:()=>os,readRequestIdsSelector:()=>Ji,reconnectFlagSelector:()=>$O,redirectConversationRequested:()=>dT,reduxReset:()=>NS,relatedOfferIdsSelector:()=>DS,removeAllDraft:()=>jS,removeAllDraftHandler:()=>Yl,removeSingleDraft:()=>LS,removeSingleDraftHandler:()=>Bl,replyToMessageIdSelector:()=>kE,replyToMessageSelector:()=>LE,reportApiTime:()=>en,reportArraySelector:()=>kv,reportMessageApiTimer:()=>od,reportReducer:()=>zv,reportRequested:()=>jv,reportUserRequested:()=>Pi,requestIdleCallback:()=>yr,resendMessagePayloadSelector:()=>va,resetConversationRequested:()=>sl,resetNavigateToUnreadMessageId:()=>ml,resetSearchParams:()=>ol,resultsSelector:()=>Pu,reverseMessagesSelector:()=>gE,saveDraft:()=>FS,saveDraftHandler:()=>Wl,scrollToMessageIdSelector:()=>ME,searchConversationHttpStatusSelector:()=>wu,searchConversationsRequested:()=>ef,searchConversationsSucceeded:()=>tf,searchMoreResults:()=>pl,searchShopsRequested:()=>Mf,selectHydrated:()=>m,selectVideoInfoByKey:()=>oE,selectVideoInfoKeyByVid:()=>aE,sellerRecommendGroupsFetchStatusSelector:()=>Nv,sellerRecommendGroupsSelector:()=>Iv,sellerRecommendProductFetchStatusSelector:()=>wv,sellerRecommendProductsSelector:()=>Cv,sendingMessageIdsSelector:()=>fE,setChatListWidth:()=>Li,setChatSource:()=>$c,setConversationBeenDeleted:()=>gl,setCurrentConversationCanRead:()=>al,setCurrentConversationCanReadHandler:()=>Gl,setCurrentConversationId:()=>Cl,setNavigateToUnreadMessage:()=>vl,setNavigateToUnreadMessageId:()=>Tl,setTextBoxHeight:()=>Mi,setToastInformation:()=>h_,setToastInformationSaga:()=>y_,settingsFetchStatusSelector:()=>eS,settingsNeedForceUpdateSelectors:()=>$E,settingsReducer:()=>gS,settingsSelector:()=>JE,settingsStatusSelector:()=>ZE,shopAccessSelector:()=>Mu,shopReducer:()=>p_,shopSchema:()=>p,shopSelector:()=>Df,shopService:()=>xt,shopStatisticsMapSelector:()=>Da,shopStatisticsSelector:()=>Ca,shopTranslationSettingsSelector:()=>vh,shoppingCartItemDetailCleaner:()=>_e,shopsEntitiesSelector:()=>co,shopsUnreadConversationCountSelector:()=>Fo,shouldInitFSSDKSelector:()=>da,shouldPersistItem:()=>_n,showAutoHangupModalSelector:()=>Ba,showCartReminder:()=>nv,showChatWindowSelector:()=>Ma,showConversationDetailSelector:()=>ka,showConversationRequested:()=>cl,showConversationSucceeded:()=>il,showEntrySelector:()=>Ha,showFaqHistory:()=>ov,showFeedStory:()=>rv,showMediaPreviewModalRequested:()=>Eh,showMediaPreviewModalSelector:()=>ph,showModal:()=>Lo,showOffer:()=>ev,showOrder:()=>$h,showProduct:()=>Jh,showSearchedConversationRequested:()=>_l,showShop:()=>Ff,showUser:()=>ei,showUserRequested:()=>Zs,showVoucher:()=>tv,showWarningMessageIdsSelector:()=>bE,socket:()=>Bt,socketReducer:()=>XO,socketSuccessSelector:()=>Fa,sortConversations:()=>td,sortedConversationsSelector:()=>_u,stickerEntitiesSelector:()=>Zn,stickerSchema:()=>d,systemRecommendProductFetchStatusSelector:()=>Pv,systemRecommendProductsSelector:()=>Av,takeEveryWithCancel:()=>OT,teamMessageShortcutsSelector:()=>zE,textBoxHeightSelector:()=>xa,timerHandler:()=>Yv,toBottomHasConflictSelector:()=>vE,toMessageIdSelector:()=>xE,toastReducer:()=>x_,toastSelector:()=>f_,totalUnreadConversationsCountSelector:()=>Ho,translatePreferenceReducer:()=>Gh,unreadCountActions:()=>Vo,unreadCountReducer:()=>ca,unreadMessageIdsSelector:()=>AE,unreadMessagesSelector:()=>yE,updateCaptchaSignature:()=>mi,updateCaptchaSignatureSaga:()=>bi,updateCaptchaSignatureSucceeded:()=>gi,updateCaptchaVisible:()=>Ti,updateChatEntryStatus:()=>ts,updateChatWindowStatus:()=>qc,updateChatWindowStatusSaga:()=>cs,updateChatWindowStatusSucceeded:()=>Kc,updateConversationDetailStatus:()=>zc,updateConversationDetailStatusSaga:()=>ss,updateConversationDetailStatusSucceeded:()=>Xc,updateConversationFilter:()=>Zu,updateConversationListsHash:()=>fr,updateConversationTimestamp:()=>$u,updateCurTabFocused:()=>ii,updateCurTabFocusedSaga:()=>li,updateCurTabFocusedSucceeded:()=>ui,updateDelPermission:()=>Qs,updateEntities:()=>Oo,updateFetchConversationsDirection:()=>Ju,updateFetchConversationsDirectionHandler:()=>Ll,updateFetchConversationsStatusHandler:()=>Ml,updateFetchStatus:()=>Uh,updateFetchedShopIds:()=>Uf,updateGuide:()=>yc,updateGuideRequested:()=>mc,updateGuideSucceeded:()=>gc,updateIsMainPage:()=>si,updateLocationMode:()=>Sl,updateLoginSuccessStatus:()=>Zc,updateNetworkStatus:()=>Bc,updateNoticesCount:()=>GO,updateOpenedMenu:()=>Jc,updateOrReplaceAction:()=>iv,updatePreviousConversationIdHandler:()=>jl,updateReadRequestData:()=>rl,updateReconnectFlag:()=>uO,updateRecord:()=>ho,updateSearchParams:()=>rf,updateSettingPreferenceStatus:()=>xh,updateShopFilter:()=>xf,updateShopTranslationSettings:()=>Nh,updateShopTranslationSettingsRecord:()=>kh,updateShowAutoHangupModal:()=>Wc,updateSocketSuccessStatus:()=>es,updateStatusSelector:()=>mh,updateTimeNowSelector:()=>eu,updateTotalUnreadConversationsCount:()=>Jo,updateUnreadCount:()=>Xo,updateUser:()=>rs,updateUserRequested:()=>Vc,updateVoucherStatus:()=>De,userEntitiesSelector:()=>zn,userReducer:()=>zi,userSchema:()=>a,userSelector:()=>ma,videoMapSelector:()=>nE,visitShopSellerCenterRequested:()=>kf,voucherCleaner:()=>Re,voucherEntitiesSelector:()=>ro,voucherHttpStatusSelector:()=>dv,voucherSelector:()=>fv,vouchersSchema:()=>h,vouchersSelector:()=>pv,watchBlock:()=>tc,watchCaptcha:()=>yi,watchChannel:()=>VO,watchCheck:()=>qs,watchConversationSagas:()=>bf,watchFeedback:()=>TO,watchGuides:()=>pc,watchLogin:()=>Us,watchReportSagas:()=>Kv,watchReportUser:()=>Ni,watchSearch:()=>of,watchSettingsSagas:()=>mS,watchShopSagas:()=>l_,watchShow:()=>ti,watchSocketSagas:()=>zO,watchTab:()=>di,watchToastSagas:()=>U_,watchTranslationSagas:()=>Fh,watchTranslationSettings:()=>jh,watchUncontrolledSagas:()=>ET,watchUnreadSagas:()=>aa,watchUpdate:()=>is,watchUpdateGuides:()=>Rc,watchUserSagas:()=>Yi});var t=y(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),l=o("offers"),d=o("stickers"),p=o("shops"),f=o("feedStories"),_=o("messageShortcuts"),E=o("rateCards"),S=o("agentConversations"),O=o("contacts",{},{idAttribute:"account_id"}),h=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:l,products:u,stickers:d,shops:p,feedStories:f,messageShortcuts:_,rateCards:E,agentConversations:S,contacts:O,vouchers:h};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=y(855);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?A(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P,w=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],N={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},U={id:"item_id",region:"region",actual_price:"price"},x=I(I({},U),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),k=I(I({},U),{},{original_price:"price_before_discount",shop_id:"shop_id"}),M=I(I({},U),{},{shop_id:"shop_id"}),L=I(I({},U),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),j={id:"item_id",name:"name",actual_price:"price"},G=["asking_price","buyer_id","conversation_id","create_at","discount","id","model_id","model_name","offer_price","product","product_id","product_deleted","products_count","region","shop_id","status","tax_applicable","tax_value","total_price"],F=["discount","total_price","region","disclaimer"],H=["product","product_deleted"],V={asking_price:"asking_price",create_at:"create_at",model_name:"model_name",offer_price:"offer_price",tax_value:"tax_value"},B=["claimed","code","country","type","id","is_used","name","expired","usage_progress","stock_out","rule_text","displayed_time","discount_text","show_usage_progress_bar","show_usage_progress_text","status","start_time","end_time","current_usage","total_usage"],Y={rule_text:"rule_text",displayed_time:"displayed_time",expired:"expired",stock_out:"stock_out",discount_text:"discount_text",show_usage_progress_bar:"show_usage_progress_bar",show_usage_progress_text:"show_usage_progress_text"},Q=y(439).t;function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?W(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K,z=C.ProductPromotionLabel.SHOW_DISCOUNT,X=C.ProductPromotionLabel.FLASH_SALES,J=C.ProductPromotionLabel.CAMPAIGN,$=C.ProductPromotionLabel.BUNDLE_DEAL,Z=C.ProductPromotionLabel.ADD_ON_DEAL,ee=C.ProductPromotionLabel.GIFT_WITH_PURCHASE,te=[z,X,J,$,Z,ee],re=(e(P={},C.ProductStatusUsingString.DELETED,C.ProductStatusUsingNumber.DELETED),e(P,C.ProductStatusUsingString.NORMAL,C.ProductStatusUsingNumber.NORMAL),e(P,C.ProductStatusUsingString.BANNED,C.ProductStatusUsingNumber.BANNED),e(P,C.ProductStatusUsingString.SOLD_OUT,C.ProductStatusUsingNumber.SOLD_OUT),e(P,C.ProductStatusUsingString.DELISTED,C.ProductStatusUsingNumber.DELISTED),P),ne="???",oe=function(e,t){if(!e)return e;var r=(0,C.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",ne)),r},ae=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(ne))&&(e.original_price=""),e},ce=function(e){var t={};return w.forEach((function(r){var n=N[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=re[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=D(e,2),n=r[0],o=r[1];if(n===o)return oe(n,t);var a=oe(n,t),c=oe(o,t);return a.includes(ne)?a:c.includes(ne)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return te.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===z?t.push({key:r,value:Q(n,{discount:(0,C.formatDiscount)(e[r])})}):t.push({key:r,value:Q(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),ae(t)},se=function(e,t){var r={};return w.forEach((function(n){var o=x[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=oe(e[o],t);break;default:r[n]=e[n]}})),ae(r)},ie=function(e,t,r){var n={};return w.forEach((function(o){var a=k[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},ue=1e5,le=function(e,t){var r=e.amount_spent;return e.amount_spent=oe("".concat(r/ue),t),e},de=function(e,t,r){var n={};return w.forEach((function(o){var a=M[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=oe(e[a],t);break;default:n[o]=e[o]}})),ae(n)},pe=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=oe("".concat(a/ue),t);else if(2===r){var c=n/ue;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=oe("".concat(o/ue),t);return e},fe=function(e,t,r){var n={};return w.forEach((function(o){var a=L[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,C.transPrice)(e[a],t);break;case"price":n[o]=oe("".concat(e[a]/ue),t);break;default:n[o]=e[o]}})),ae(n)},_e=function(e){var t={};return w.forEach((function(r){var n,o=j[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=oe(c,e.region);break;default:t[r]=e[r]}})),ae(t)},Ee=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g," · ")),e},Se=function(e,t,r,n,o,a){var c={};return F.forEach((function(t){switch(t){case"discount":c[t]=function(e,t,r){var n=e.offer_price,o=e.asking_price,a=Number(n)/Number(o);if(function(e,t){return e&&(0,C.isVisitingCNSC)()||"TW"===(null==t?void 0:t.toUpperCase())}(t,r)){var c=(10*a).toFixed(a<.05?2:1),s=Number.isInteger(Number(c))?Number.parseInt(c):c;return"".concat(s,"折")}var i=(100*(1-a)).toFixed(1),u=Number.parseInt(i),l=[0,100].includes(u)?u:i;return"".concat(l).concat(Q("message.offer.discount"))}(e,n,r);break;case"total_price":c[t]=oe(function(e){var t=e.offer_price,r=e.tax_value,n=e.products_count;return((Number(t)-Number(r))*n).toString()}(e),r);break;case"region":c[t]=r;break;case"disclaimer":c[t]=function(e,t){var r=e.offer_disclaimer;return(r.find((function(e){return(0,C.getTranslationLocale)(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}))||r.find((function(e){return"en"===e.language}))||{}).disclaimer}(e,a)}})),H.forEach((function(t){switch(t){case"product":c[t]=q(q({},o),{},{original_price:"",actual_price:oe(e.asking_price,r)});break;case"product_deleted":c[t]=function(e){var t=e.id,r=e.status;return!(!t||r!==C.ProductStatusUsingNumber.DELETED)}(o)}})),G.forEach((function(n){if(!F.includes(n)&&!H.includes(n)){var o=V[n];switch(o){case"asking_price":case"offer_price":case"tax_value":c[n]=oe(e[o],r);break;case"create_at":c[n]=(0,C.getFormattedTime)(e[o]);break;case"model_name":c[n]=function(e,t){if(t&&t.includes(",")){var r="detail"===e?" · ":" / ";return t.replace(/,/g,r)}return t}(t,e[o]);break;default:c[n]=e[n]}}})),c},Oe="message.voucher.rule",he=function(e,t){return(0,C.formatPrice)(e,t,{withUnit:e>=1e4})},ve=function(e){var t=e.country,r=e.min_basket_size,n=e.reward.max_capped_amount,o=he(r,t),a=Q("".concat(Oe,".min_spend"),{spend:o});return"number"==typeof n&&(a=Q("".concat(Oe,".min_spend_max_cap"),{spend:o,cap:he(n,t)})),a},Te=function(e){var t=e.country,r=e.reward,n=r.value,o=r.type,a=r.discount_type===C.DiscountType.PERCENTAGE?"".concat(n,"%").concat(" "+Q("common.label.off")):(0,C.formatPrice)(n,t);return o===C.RewardType.COIN_CASHBACK&&(a="".concat(a," ").concat(Q("conversation_detail.workstation.voucher_panel.coins_cashback"))),a},me=function(e){return e.status===C.VoucherStatus.FINISHED},ge=function(e){return e.current_usage>=e.total_usage},be=function(e,t){var r=!t&&me(e),n=e.status,o=e.start_time,a=e.end_time;return Q("".concat("conversation_detail.workstation.voucher_panel",".").concat(r?C.VoucherStatus.ONGOING:n,"_time"),{time:n===C.VoucherStatus.SCHEDULED?(0,C.getFormattedTime)(o,"MM.DD.YYYY h:mm"):(0,C.getFormattedTime)(a,"MM.DD.YYYY")})},ye=function(e,t){var r=me(e),n=ge(e),o=e.is_used,a=e.usage_progress,c=e.country,s=o||r||n;return(a>=50||"id"===c.toLowerCase()&&(t||a>=25))&&!s},Re=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},n=me(e),o=ge(e);return B.forEach((function(a){switch(Y[a]){case"rule_text":r[a]=ve(e);break;case"displayed_time":r[a]=be(e,t);break;case"expired":r[a]=n;break;case"stock_out":r[a]=o;break;case"discount_text":r[a]=Te(e);break;case"show_usage_progress_bar":r[a]=ye(e,!0);break;case"show_usage_progress_text":r[a]=ye(e,!1);break;default:r[a]=e[a]}})),r},De=function(e,t){var r=t.expired,n=t.stockOut,o=q({},e);return r?(o.status="finished",{status:"finished",expired:r,displayed_time:be(o,r),show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):n?(o.current_usage=o.total_usage,{current_usage:o.total_usage,stock_out:n,show_usage_progress_bar:ye(o,!0),show_usage_progress_text:ye(o,!1)}):{}},Ce=y(439).t;function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ae(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Pe,we=C.LogisticsLog.ORDER_DETAIL_SHIPPING_CONFIRMED,Ne=C.LogisticsLog.ORDER_DETAIL_SHIPPED,Ue=C.LogisticsLog.ORDER_DETAIL_RECEIVED,xe=C.LogisticsLog.ORDER_DETAIL_CANCELED,ke=C.LogisticsLog.ORDER_DETAIL_NOTIFY_SHIP,Me=(e(K={},we,"detail_received"),e(K,Ne,"shipped"),e(K,Ue,"received_by_buyer"),e(K,xe,"cancelled"),e(K,ke,"notify_ship"),K),Le=["amount","buyer_id","buyer_is_rated","cancel_pending","cancel_reason","cancel_time","canceller","carrier","checkout_id","coin_offset","complete_time","created_at","credit_card_promotion","delivery_time","id","image","image_hash","over_rate_time","pay_by_wallet","pay_time","payment_method","payment_method_str","price_before_discount","products","products_count","rate_by_date","receivables","refund_amount","refund_serial_number","region","remark","seller_note","seller_rate_comment","seller_rate_star","serial_number","ship_by_date","shipping_fee","shop_id","show_cancel_order_btn","show_ship_warning","status","tax_amount","third_party_tns","title","tracking_number","voucher_price","wallet_discount"],je=["model_id","product_id","model_name","image","image_hash","rate_star","region","price","sku","count","title","rate_comment","is_pre_order","returned","id","shop_id"],Ge=function(e,t,r){var n={},o=e.status;return je.forEach((function(a){var c;switch(a){case"model_name":n[a]=null!==(c=e[a])&&void 0!==c&&c.includes(",")?e[a].replace(/,/g," · "):e[a];break;case"region":n[a]=t;break;case"price":n[a]=(0,C.formatPrice)(e[a],t);break;case"returned":n[a]=o===C.OrderItemStatus.RETURNED||o===C.OrderItemStatus.RETURN_RATED;break;case"rate_star":n[a]=e[a]?parseInt(e[a]):-1;break;case"id":n[a]=e.product_id;break;case"shop_id":n[a]=r;break;default:n[a]=e[a]}})),n},Fe=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],He=function(e){return Ce(e?"label_buyer_cancel_order_reason_".concat(e):"label_cancel_order_reason_buyer")},Ve=function(e){var t=e.cancel_user_id;return t===e.buyer_id?"buyer":t<=0?"system":"seller"},Be=function(e){var t=e.status,r=e.buyer_cancel_reason,n=e.cancel_reason,o=Ve(e);return t===C.OrderTabStatus.CANCELLED?"buyer"===o?He(r):Ce("seller"===o?"label_cancel_order".concat(n?"_reason_".concat(n):""):"label_cancel_order_reason_admin".concat(n?"_".concat(n):"")):He(r)},Ye=15*C.ONE_DAY,Qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=e.price_before_discount,c=e.shipping_fee,s=e.tax_amount,i=e.shop_id,u=e.rate_by_date,l=e.complete_time,d=e.status_ext,p=e.payment_method,f=e.ship_by_date,_=i===t,E=(0,C.getOrderPayment)({order:e,region:r,isOwnOrder:_,isNewPrice:n}),S=E.shopeeCoin,O=E.payment,h=Date.now()>(u?new Date(u).getTime():new Date(l).getTime()+Ye);return Le.forEach((function(n){switch(n){case"region":o[n]=r;break;case"created_at":case"pay_time":case"delivery_time":case"complete_time":case"cancel_time":o[n]=e[n]?(0,C.customizeTime)(e[n],{needFullFormat:!0}):"";break;case"rate_by_date":o[n]=u?(0,C.customizeTime)(u,{needFullFormat:!0}):"";break;case"over_rate_time":o[n]=h;break;case"ship_by_date":o[n]=e[n]?(0,C.customizeTime)(e[n],{needFullFormat:!0}):"--";break;case"show_ship_warning":o[n]=!!f&&C.ONE_DAY+Date.now()>new Date(f).getTime();break;case"payment_method_str":o[n]=(0,C.getPayMethod)(p);break;case"products":o[n]=e[n].map((function(e){return Ge(e,r,t)}));break;case"amount":o[n]=(0,C.formatPrice)(a-c-s,r);break;case"receivables":o[n]=O;break;case"coin_offset":o[n]=(0,C.formatPrice)(S,r,{withMinus:!0});break;case"refund_amount":case"price_before_discount":case"shipping_fee":case"tax_amount":case"credit_card_promotion":case"voucher_price":case"wallet_discount":o[n]=(0,C.formatPrice)(e[n]||0,r,{withMinus:Fe.includes(n)});break;case"seller_note":o[n]=(e[n]||"").trim();break;case"cancel_reason":o[n]=Be(e);break;case"canceller":o[n]=Ve(e);break;case"show_cancel_order_btn":o[n]=(0,C.getCancelOrderDisplayStatus)(e);break;case"cancel_pending":o[n]=d===C.OrderStatusExt.ORDER_EXT_CANCEL_PENDING;break;default:o[n]=e[n]}})),o},We=function(e){var t=[];return e.forEach((function(e){var r,n=e.flag,o=e.type,a=e.description,c=e.seller_desc,s=e.created_at,i=(0,C.getFormattedTime)(s);4&n?r=c||a:2==(3&n)?r=a:Me[o]&&(r=Ce("common.order.logistics_log.".concat(Me[o]))),r&&t.push({created_at:i,content:r})})),t};!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(Pe||(Pe={}));var qe=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=Ie(Ie({},e),{},{status:Pe[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),c=a.shop_id,s=c===t,i=(0,C.getOrderPayment)({order:a,region:r,isOwnOrder:s,isNewPrice:n}),u=i.payment;return Le.forEach((function(e){switch(e){case"region":o[e]=r;break;case"created_at":o[e]=a[e]?(0,C.customizeTime)(a[e],{needFullFormat:!0}):"";break;case"products":o[e]=a.items;break;case"receivables":o[e]=u;break;default:o[e]=a[e]}})),o};function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),e}function Je(e,t){return Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Je(e,t)}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?et(e):t}function rt(e){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rt(e)}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ot(e,t,r){return ot=nt()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Je(o,r.prototype),o},ot.apply(null,arguments)}function at(e){var t="function"==typeof Map?new Map:void 0;return at=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ot(e,arguments,rt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Je(n,e)},at(e)}var ct=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),st=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Xe(r,[{key:"handler",value:function(){(0,C.removeItem)("mini-session"),C.LS.removeItem("mini-session")}}]),r}(at(Error));const it=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error));var ut=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(at(Error)),lt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind(et(n)),n}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),dt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n){var o;return Ke(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return Xe(r,[{key:"handler",value:function(){}}]),r}(at(Error)),pt=y(439).t,ft=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind(et(n)),n}return Xe(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:pt(e)}}}]),r}(at(Error)),_t=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n,o){var a;return Ke(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(at(Error)),Et=y(439).t,St=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return Xe(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:Et(e),show:!0,type:"fail"}}}]),r}(at(Error)),Ot=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error)),ht=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(at(Error)),vt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(at(Error));const Tt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e,n,o){var a;return Ke(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(at(Error)),mt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(at(Error));var gt=function(e){$e(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var o=rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return tt(this,r)}}(r);function r(e){var n;return Ke(this,r),(n=t.call(this)).message=e,n}return r}(at(Error)),bt=function(e){switch(e){case 400:return ct;case 401:return st;case 403:return dt;case 404:return it;case 422:return ut;case 429:return Ot;case 451:return ht;case 452:return gt;case 491:return ft;case 492:return _t;case 493:return St;case 494:return vt;case 495:return Tt;case 500:return lt;default:return Error}},yt=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")};function Rt(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function Dt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){Rt(a,n,o,c,s,"next",e)}function s(e){Rt(a,n,o,c,s,"throw",e)}c(void 0)}))}}var Ct=y(757),At=y.n(Ct),It=y(672),Pt=y(598),wt=y.n(Pt);function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Nt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt=new(function(){function t(){Ke(this,t),this.shopsMap={}}var r;return Xe(t,[{key:"updateShopMap",value:function(e){this.shopsMap=Ut(Ut({},this.shopsMap),e)}},{key:"getRegion",value:(r=Dt(At().mark((function t(r,n){var o,a,c,s;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(a=null===(o=this.shopsMap[n])||void 0===o?void 0:o.country){t.next=8;break}return t.next=5,hr({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=t.sent,this.updateShopMap(e({},c.id,c)),t.abrupt("return",c.country);case 8:return t.abrupt("return",a);case 11:if(s=(0,C.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(s)&&!r){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}());"live"!==(0,C.getRuntimeServer)()&&(window.shopService=xt);var kt,Mt=y(674),Lt=y.n(Mt);function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gt(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jt(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ft=(0,C.checkIsScChat)();kt=Ft?"scminichat":"pmminichat";var Ht=new(Lt())({shouldShared:Ft,name:"".concat((0,C.getRuntimeRegion)(),"_").concat((0,C.getRuntimeServer)(),"_seller-push-ws")}),Vt=Ht.isShared,Bt=Ht.socket;Bt.dispatch||(Bt.dispatch=function(){return{}});var Yt=function(e){return Vt?Bt.emit("login",Gt(Gt({},e),{},{app_id:kt}),!0):new Promise((function(t){Bt.emit("login",Gt(Gt({},e),{},{app_id:kt}),(function(e){return t(JSON.parse(e))}))}))},Qt=function(e){var t=e.noticesCount,r=e.readMissedCount,n={app_id:kt,noticesCount:t,readMissedCount:r},o="".concat(kt,"|").concat(t,"|").concat(r);return Vt?Bt.heartbeat({emitEvent:"heartbeat",args:n,pollingTime:6e4,remedyTime:9e4,separator:"|"}):Bt.emit("heartbeat",o)};function Wt(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qt=y(444),Kt=y.n(qt);window.__CHANGE_FETCH__||(window.fetch=Kt(),window.__CHANGE_FETCH__=!0);var zt="CHAT_API",Xt=function(){window.caches&&window.caches.delete(zt)};function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=Dt(At().mark((function e(t,r){var n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),l="&force_update=".concat(String(c)),d=t.replace(u,"").replace(l,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(zt);case 13:return p=e.sent,e.next=16,p.match(d);case 16:if(f=e.sent,_=Date.now(),!f){e.next=25;break}if(!(_<Number(f.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",f);case 23:return e.next=25,p.delete(d);case 25:return e.next=27,window.fetch(t,r);case 27:if(E=e.sent,S=E.clone(),200!==E.status){e.next=41;break}return O=Wt(E.headers.entries()),h={},v=Number(o.get("cache_expires"))||3600,T=_+1e3*v,e.next=36,E.blob();case 36:m=e.sent,O.forEach((function(e){h[e[0]]=e[1]})),h["cache-expires"]=T,g=new Response(m,{headers:new Headers(h)});try{p.put(d,g)}catch(e){window.caches.delete(zt)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var Zt,er,tr,rr=y(378),nr=y.n(rr),or=y(464),ar=y.n(or);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(tr||(tr={}));var cr=(e(Zt={},tr.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Zt,tr.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Zt,tr.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Zt,tr.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Zt),sr=(e(er={},tr.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e(er,tr.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e(er,tr.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e(er,tr.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),er);function ir(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,C.getRuntimeServer)()?sr[e]:cr[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,l="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return ar()(l).toString()}return nr()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return nr()(e+t+r).toString()}(r,s,a);default:return""}}var ur,lr=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,l=e.timestamp,d=JSON.parse(u),p=d.to_id,f=d.request_id,_=d.type,E=d.content,S=void 0===E?{}:E;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:f,toID:p,timestamp:l,type:_,strinput:"text"===_&&S.text?S.text:""}}},dr=y(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(ur||(ur={}));var pr=(0,dr.createActions)(e({},ur.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,fr=(0,dr.createActions)(e({},ur.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash;function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_r(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Sr=(0,C.checkIsScChat)(),Or=(0,C.getRuntimeVersion)();function hr(e){return vr.apply(this,arguments)}function vr(){return vr=Dt(At().mark((function t(r){var n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,A,I,P,w,N,U,x,k,M,L,j,G;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,l=r.version,d=void 0===l?"v1.2":l,p=r.parent,f=r.parentId,_=r.resource,E=r.id,S=r.suffix,O=r.method,h=void 0===O?"GET":O,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,b=void 0===g?{}:g,y=r.payload,R=r.headers,A=void 0===R?{}:R,I=r.namespace,P=void 0===I?"mini":I,w=r.cleaner,N=void 0===w?function(e){return e}:w,U=r.fetcher,x="mini-session",k="mini-session",M=function(){return!!Vt&&It.store.getState().userReducer.isMainPage},L=function(){if("sc"===S)return E;if("auth"===_)return f;if(b.shop_id)return b.shop_id;if(y)try{return JSON.parse(y).shop_id}catch(e){}},j=function(){var t=Dt(At().mark((function t(r){var n,c,l,O,v,g,R,I,w,x,k,j,G,F,H,V,B,Y,Q,W,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=wt().get("CTOKEN"),l=(c=r||{}).token,O=c.version,v=c.user,g=(v=void 0===v?{}:v).id,R=v.type,I=0,w=0,x=0,F="",H={},t.next=11,xt.getRegion("subaccount"===R,L());case 11:if(V=t.sent,B=l&&"include"===T||!i?{Authorization:"Bearer ".concat(l),"x-shop-region":V}:{},!i&&(i=(0,C.getApiServer)()),a?j=a:(Y=[s?"https:/":"http:/",i,u,d,P,p,f,_,E,S].filter(Boolean).join("/"),Q=m?"".concat(Y,".").concat(m):Y,(W=r&&r.user&&r.user.uid)&&(b._uid=W),Or&&(b._v=Or),n&&(b.csrf_token=n),b._api_source=Sr?"sc":"pcmall",G=Object.entries(b).filter((function(e){var t=D(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=D(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),j=[Q,G].filter(Boolean).join("?"),q=[P,p,f,_,E,S].filter(Boolean).join("/"),K=m?"/".concat(q,".").concat(m):"/".concat(q),H._uid=W||"",H._v=Or||"",z=Object.entries(H).map((function(e){var t=D(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),F=[K,z].join("?")),t.prev=15,!(void 0!==E&&parseInt(E)<=0&&!j.includes("message_shortcuts/group")||void 0!==f&&parseInt(f)<=0)){t.next=19;break}throw new Error;case 19:return X={},J=Date.now(),U&&($=lr({url:F,method:h,version:Or,token:B.Authorization||"",fromID:g,payload:y,timestamp:J}),X={ts:J,"x-v":O||"","x-s":ir(O,$)}),Z={method:h,credentials:T,headers:Er(Er(Er({},B),X),A),body:y},ee=U||Jt,t.next=27,ee(j,Z);case 27:te=t.sent,I=te.status,t.t0=I,t.next=204===t.t0?32:404===t.t0?34:452===t.t0?36:500===t.t0?38:502===t.t0?40:42;break;case 32:return re=null,t.abrupt("break",46);case 34:return re={message:"Resource not found"},t.abrupt("break",46);case 36:return re={message:"Tempory Error"},t.abrupt("break",46);case 38:return re={message:"Internal server error"},t.abrupt("break",46);case 40:return re={message:"Bad Gateway"},t.abrupt("break",46);case 42:return 200===I&&(w=parseInt(te.headers.get("total")),x=parseInt(te.headers.get("per-page"))),t.next=45,te.json();case 45:re=t.sent;case 46:if([200,204].includes(I)&&"report_upload"===_&&y&&(ne=JSON.parse(y),oe=ne.vid,performance.mark("REPORT_UPLOAD_".concat(oe))),200!==I){t.next=52;break}return ae=re instanceof Array?e({total:w,perPage:x},_,re.map((function(e){return N(e,Sr)}))):N(re,Sr),o&&M()&&Bt.dispatch(C.CustomShareEvent.SHARE_API_DATA,Er({type:C.ShareDataType.UNREAD},"object"===Ze(ae)?ae:{res:ae})),U&&y&&(k=JSON.parse(y).request_id,(0,C.setItem)(k,J)),t.abrupt("return",ae);case 52:if(204!==I){t.next=54;break}return t.abrupt("return",null);case 54:if(!yt(I)){t.next=68;break}if([400,404].includes(I),![429,451,491,493].includes(I)){t.next=61;break}throw new(bt(I))(re);case 61:if(401!==I){t.next=65;break}It.store.dispatch(pr({resource:_})),t.next=68;break;case 65:throw(ce=new(bt(I))(re.message,re.errors||re.error_code||re.errcode,re.data))&&400===I&&(ce._type_="client"),ce;case 68:t.next=74;break;case 70:throw t.prev=70,t.t1=t.catch(15),I||(t.t1.offlineError=!0),t.t1;case 74:case"end":return t.stop()}}),t,null,[[15,70]])})));return function(e){return t.apply(this,arguments)}}(),!o||M()){t.next=8;break}return t.abrupt("return");case 8:G=null;try{G=C.LS.getItem(k,!0)}catch(e){G=null}if(G){t.next=14;break}return t.next=13,(0,C.getItem)(x);case 13:G=t.sent;case 14:return t.abrupt("return",j(G));case 15:case"end":return t.stop()}}),t)}))),vr.apply(this,arguments)}var Tr,mr,gr,br,yr=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},Rr=y(782),Dr=y(830),Cr=y.n(Dr),Ar=y(292),Ir=y.n(Ar),Pr={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};Tr={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},mr={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},gr="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",br="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var wr,Nr={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},Ur={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},xr={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"},kr={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error"};function Mr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Mr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=Kt(),window.__CHANGE_FETCH__=!0);var jr,Gr,Fr,Hr,Vr=function(e){wr=e},Br=!1,Yr=location.host.includes("shopee.cn"),Qr=(0,C.checkIsScChat)(),Wr=[],qr="live"===(0,C.getRuntimeServer)()?Tr:mr,Kr=function(){try{var e=performance.getEntriesByName(Nr.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(Nr.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(Nr.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(Nr.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(Nr.APP_RENDERING,"mark")[0].startTime;Wr.push({id:qr.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:qr.LOAD_STATIC,duration:Math.floor(t-e)},{id:qr.APP_PREPARE,duration:Math.floor(r-t)},{id:qr.LOGIN_API,duration:Math.floor(n-r)},{id:qr.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},zr=function(e,t){try{var r=null,n=performance.getEntriesByName(Nr.APP_RENDERING,"mark")[0].startTime;switch(e){case Ur.WELCOME_PAGE:r=performance.getEntriesByName(Nr.RENDER_WELCOME_PAGE,"mark")[0].startTime,Wr.push({id:qr.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case Ur.MESSAGE_LIST:r=performance.getEntriesByName(Nr.RENDER_MESSAGE_LIST,"mark")[0].startTime,Wr.push({id:qr.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case Ur.CONVERSATION_LIST:r=performance.getEntriesByName(Nr.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Wr.push({id:qr.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Wr.push(t),yr(Jr,{timeout:2e3})}catch(e){}},Xr=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wr.push({id:e,duration:t,extra:r}),yr(Jr,{timeout:2e3})};function Jr(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Wr.length;){var t=Wr.shift(),r=t.id,n=t.duration,o=t.extra;r&&en(r,n,o),"live"!==(0,C.getRuntimeServer)()&&Pr[r]&&console.log("|-- 上报阶段: ",Pr[r],", 耗时为: ".concat(n))}Wr.length&&yr(Jr,{timeout:2e3})}var $r,Zr=function(){if(!Br){var e=(0,C.getRuntimeServer)(),t="live"===e,r=(0,C.getRuntimeRegion)(),n=(0,C.getRuntimeVersion)();jr=new Rr.MdapSdk({app_name:"minichat",secret_key:t?gr:br,environment:e,region:r,app_version:n,sample:t?.2:1}),Gr=new(Cr())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages"]}),Fr=new(Ir())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),Hr=new Rr.CustomPlugin({}),jr.use(Gr),jr.use(Fr),jr.use(Hr),Br=!0}};function en(e,t,r){Br||Zr();var n={point_id:e,data:{userType:wr,localOrCn:void 0!==$r?$r:$r=Yr&&"CN"!==(0,C.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:Qr?"seller":"pcmall"}};t&&(n=Lr(Lr({},n),{},{duration:t})),r&&(n.data=Lr(Lr({},n.data),r)),Hr.sendData(n)}var tn,rn=y(455),nn=y.n(rn),on=y(944),an=At().mark(un),cn=[];tn=[202,215];var sn=function(e,t){var r=tn.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,C.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return Kt()(o).then(function(){var e=Dt(At().mark((function e(t){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function un(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,C.getRuntimeServer)()||"live-test"===(0,C.getRuntimeServer)(),n=new(nn())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",translation:{resources:cn,collections:tn}});case 6:if(a=s.sent,o=a.translation,!(0,C.checkEmptyObject)(o)){s.next=15;break}return c=[],tn.concat(cn).forEach((function(e){c.push(sn(e,t))})),s.next=13,(0,on.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),an)}var ln=function(e,t,r,n){switch(r){case"reset":if(n){var o=Array.isArray(t)?Wt(t):[];return o.unshift(n),o}return t;case"latest":return t.concat(e.filter((function(e){return!t.includes(e)})));case"older":return e.concat(t.filter((function(t){return!e.includes(t)})));default:return t}};function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fn=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,C.simpleEqualCheck)(r.slice(0,C.persistLimit),e)?pn(pn({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},_n=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},En=new(y(187).EventEmitter),Sn=!1,On=null,hn=document.location,vn="".concat(hn.protocol,"//").concat(hn.host,"/favicon.ico");function Tn(){var e="t=".concat(Date.now()),t=[vn,e].join("?");On=setTimeout((function(){Kt()(t,{method:"GET"}).then((function(){clearTimeout(On),Sn=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){Tn()}))}),5e3)}function mn(){if(Sn)return null;Sn=!0,Tn()}var gn,bn=(0,y(428).createBrowserHistory)({basename:"/chateasy"}),yn=function(){var e=bn.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},Rn=y(846);function Dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var An=function(t){var r={};for(var n in t)for(var o in t[n])r=Cn(Cn({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),In=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return Cn(Cn({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),Cn(Cn({},An),{},(e(gn={impressionMsgGamesFailBlock:{section:"conversation_window",type:"msg_games_fail_block"},impressionMsgGamesFailQuota:{section:"conversation_window",type:"msg_games_fail_quota"},impressionConversationCell:{section:"",type:"chat_conversation"},clickConversationCell:{section:"",type:"chat_conversation"},operateHints:{section:"message_toolbar",type:"shortcut_result_from_auto_popup"},clickEditShortcut:{section:"message_toolbar",type:"shortcut_button_draft"},operateSearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_available"},searchShortcutsFocus:{section:"message_toolbar",type:"shortcut_button"},impressionEmptySearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_empty"},selectShortcutFromShortcutButton:{section:"message_toolbar",type:"shortcut_result_from_shortcut_button"},clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"message_toolbar",type:"sticker_button"},clickImageInToolbar:{section:"message_toolbar",type:"image_button"},clickVideoInToolbar:{section:"message_toolbar",type:"video_button"},clickShortcutInToolbar:{section:"message_toolbar",type:"shortcut_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},impressionChatRoom:{section:"conversation_window",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"}},"clickShortcutInToolbar",{section:"message_toolbar",type:"shortcut_button"}),e(gn,"clickOrdersInToolbar",{section:"message_toolbar",type:"orders_button"}),e(gn,"clickProductsInToolbar",{section:"message_toolbar",type:"products_button"}),e(gn,"clickSearchNameResult",{section:"",type:"search_name_result"}),e(gn,"clickSearchName",{type:"search_name"}),e(gn,"impressionChatIcon",{type:"chat_icon"}),e(gn,"clickChatIcon",{type:"chat_icon"}),e(gn,"clickToWebchatButton",{type:"to_webchat_button"}),e(gn,"clickFoldButton",{type:"fold_button"}),e(gn,"clickUnFoldButton",{type:"unfold_button"}),e(gn,"clickCloseButton",{type:"close_button"}),e(gn,"impressionUnreadChange",{type:"chat_icon_status_change_to_with_unread_cnt"}),e(gn,"typeMessage",{type:"typing_message",section:"message_toolbar"}),gn)));function Pn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var wn,Nn=null,Un=function(e){e&&(Nn=e)},xn=null,kn=function(){var t;if(t=(0,C.checkIsScChat)(),window.BITrack)xn=window.BITrack;else{var r={appId:t?1:0,fetch:Kt(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:wt().get,sendEventByInterval:!0,enableAutoTrack:!1};wn=(0,Rn.createTrackingV3Sdk)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,C.getRuntimeRegion)(),env:(0,C.getRuntimeServer)()},r)),xn=wn.sync.bind(wn)}},Mn=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?C.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;xn||kn();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=In[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,l=Nn||{},d=l.shop_id,p=void 0===d?"":d,f=l.role,_=void 0===f?"":f,E=l.id,S=void 0===E?"":E,O=Object.assign({},{shopid:p||o,account_type:_||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===C.TrackerOperation.IMPRESSION?{viewed_objects:[O]}:O}}({trackerName:t,data:r,operation:o,page:a,shopId:c});xn({data:{type:"v3",timestamp:Date.now(),info:s}})},Ln=[],jn=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&Ln.length;){var r=Ln.shift();Mn(r)}Ln.length&&yr(e,{timeout:200})},Gn=function(e){Ln.push(e),yr(jn,{timeout:200})};function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hn(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?C.Currencies[e]:"NT$"},Bn=function(e,t){return Hn(Hn({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=D(r.map((function(r){return(0,C.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=D(n.map((function(r){return(0,C.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],l=a===c?a:"".concat(a," - ").concat(c),d=i===u?i:"".concat(i," - ").concat(u),p=a.includes("NaN")||i.includes("NaN");return{original_price_string:p||l===d?"":l,actual_price_string:p?"".concat(Vn(e.country,t),"???"):d,storedTimestamp:Date.now()}}(e,t))};function Yn(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}var Qn,Wn=y(975),qn=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},Kn=function(e){return e.entityReducer},zn=(0,Wn.createSelector)(Kn,(function(e){return e.users})),Xn=(0,Wn.createSelector)(Kn,(function(e){return e.conversations})),Jn=(0,Wn.createSelector)(Kn,(function(e){return e.agentConversations})),$n=(0,Wn.createSelector)(Kn,(function(e){return function(e){return(0,C.checkEmptyObject)(e)?{}:e}(e.messages)})),Zn=(0,Wn.createSelector)(Kn,(function(e){return e.stickers})),eo=(0,Wn.createSelector)(Kn,(function(e){return e.orders})),to=(0,Wn.createSelector)(Kn,(function(e){return e.products})),ro=(0,Wn.createSelector)(Kn,(function(e){return e.vouchers})),no=(0,Wn.createSelector)(Kn,(function(e){return e.messageShortcutsGroups})),oo=(0,Wn.createSelector)(Kn,(function(e){return e.feedStories})),ao=(0,Wn.createSelector)(Kn,(function(e){return e.rateCards})),co=(0,Wn.createSelector)(Kn,(function(e){return e.shops})),so=(0,Wn.createSelector)(Kn,(function(e){return e.contacts})),io=(0,Wn.createSelector)(Xn,Jn,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return qn(r)})),uo=(0,Wn.createSelector)($n,(function(e){return qn(Object.keys(e).length)}));function lo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function po(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(Qn||(Qn={}));const fo=e({},Qn.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=D(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&xt.updateShopMap(a),po(po({},t),{},e({},o,po(po({},t[o]),a)))):po(po({},t),{},e({},o,a))}),t)}));var _o,Eo,So=(0,dr.createActions)((e(_o={},Qn.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(_o,Qn.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(_o,Qn.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(_o,Qn.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),_o)),Oo=So.updateEntities,ho=So.updateRecord,vo=So.deleteRecord,To=So.batchUpdateRecord;function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const bo=(e(Eo={},Qn.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return go(go({},t),{},e({},o,go(go({},t[o]),{},e({},a,go(go({},t[o][a]),c)))))})),e(Eo,Qn.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],go(go({},t),{},e({},o,c))})),e(Eo,Qn.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=go({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=go(go({},s[e]),a[e]))})),go(go({},t),{},e({},o,s))})),Eo);function yo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ro(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?yo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Do,Co=(0,dr.handleActions)(Ro(Ro({},fo),bo),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(Do||(Do={}));var Ao,Io,Po=function(e){return e.modalReducer.show},wo=(0,Wn.createSelector)(Po,(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function No(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?No(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xo,ko,Mo=(0,dr.createActions)((e(Ao={},Do.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(Ao,Do.CLOSE_MODAL,(function(){return{}})),Ao)),Lo=Mo.showModal,jo=Mo.closeModal,Go=(0,dr.handleActions)((e(Io={},Do.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e(Io,Do.CLOSE_MODAL,(function(e){return Uo(Uo({},e),{},{show:!1})})),Io),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),Fo=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},Ho=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},Vo={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function Bo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Yo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Bo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT",e.UPDATE_AGENT_UNREAD_CONVERSATION_COUNT="UPDATE_AGENT_UNREAD_CONVERSATION_COUNT"}(xo||(xo={}));var Qo=At().mark($o),Wo=At().mark(Zo),qo=At().mark(ea),Ko=At().mark(ta),zo=(0,dr.createActions)((e(ko={},xo.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(ko,xo.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(ko,xo.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(ko,xo.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),ko)),Xo=zo.updateUnreadCount,Jo=zo.updateTotalUnreadConversationsCount;function $o(e,t){return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,on.put)(ho({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),Qo)}function Zo(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===C.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,on.call)(hr,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,on.put)(Jo({count:a}));case 10:return s.next=12,(0,on.select)(ja);case 12:c=s.sent,r&&Gn({operation:C.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),Wo,null,[[1,16]])}function ea(e){var t,r,n,o,a,c,s,i,u,l,d,p;return At().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,f.next=4,(0,on.select)(Ho);case 4:l=f.sent,f.t0=r,f.next=f.t0===Vo.FORWARD_CONVERSATION||f.t0===Vo.CLOSE_CONVERSATION||f.t0===Vo.DELETE_CONVERSATION||f.t0===Vo.UPDATE_CONVERSATION?8:f.t0===Vo.CLEAR_CONVERSATION_COUNT||f.t0===Vo.MARK_AS_READ?14:f.t0===Vo.ACTIVE_CONVERSATION?20:f.t0===Vo.MARK_AS_UNREAD?23:f.t0===Vo.RECEIVE_UNREADABLE_MESSAGE?28:f.t0===Vo.RESTART_CONVERSATION||f.t0===Vo.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?34:f.t0===Vo.MESSAGE_QUEUE_UPDATE?37:f.t0===Vo.MASS_READ?41:f.t0===Vo.MASS_UNREAD?44:f.t0===Vo.MASS_CLOSE?47:50;break;case 8:if(0===u){f.next=13;break}return f.next=11,(0,on.put)(Jo({count:l-1}));case 11:return f.next=13,(0,on.call)($o,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 40:case 43:case 46:case 49:case 50:return f.abrupt("break",51);case 14:if(!(u>0)){f.next=19;break}return f.next=17,(0,on.put)(Jo({count:l-1}));case 17:return f.next=19,(0,on.call)($o,i,0);case 20:return f.next=22,(0,on.put)(Jo({count:l+1}));case 23:return f.next=25,(0,on.put)(Jo({count:l+1}));case 25:return f.next=27,(0,on.call)($o,i,u+1);case 28:if(0!==u){f.next=31;break}return f.next=31,(0,on.put)(Jo({count:l+1}));case 31:return f.next=33,(0,on.call)($o,i,u+1);case 34:return f.next=36,(0,on.call)(Zo,{source:c});case 37:return p=(d=a).totalIncrease,d.shopsIncrease,f.next=40,(0,on.put)(Jo({count:l+p}));case 41:return f.next=43,(0,on.put)(Jo({count:l-s}));case 44:return f.next=46,(0,on.put)(Jo({count:l+s}));case 47:return f.next=49,(0,on.put)(Jo({count:l-s}));case 51:case"end":return f.stop()}}),qo)}function ta(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Xo,ea);case 2:case"end":return e.stop()}}),Ko)}zo.updateSingleShopUnreadCount,zo.updateShopsUnreadConversationsCount;const ra=e({},xo.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return Yo(Yo({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var oa,aa=[ta],ca=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?na(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ra),{totalUnreadConversationsCount:0}),sa=function(e){return e.userReducer.loading},ia=function(e){return e.userReducer.currentUserId},ua=function(e){return e.userReducer.newbie},la=function(e){return e.userReducer.networkStatus},da=function(e){return e.userReducer.shouldInitFSSDK},pa=function(e){return e.userReducer.hasVideoPermission},fa=function(e){return e.userReducer.hasReplyPermission},_a=function(e){return e.userReducer.hasDeletePermission},Ea=function(e){return e.userReducer.deleteConfigDuration},Sa=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},Oa=function(e){return e.userReducer.captchaVisible},ha=function(e){return e.userReducer.captchaSignature},va=function(e){return e.userReducer.resendMessagePayload},Ta=function(e){return e.userReducer.newMessageFlag},ma=function(e){return(0,Wn.createSelector)(Kn,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},ga=(0,Wn.createSelector)(zn,ia,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),ba=(0,Wn.createSelector)(ga,(function(e){return e&&e.locale})),ya=(0,Wn.createSelector)(ga,(function(e){return!(0,C.checkEmptyObject)(e)&&e.type===C.AccountType.SUBACCOUNT})),Ra=(0,Wn.createSelector)(ga,(function(e){return!(0,C.checkEmptyObject)(e)&&e.is_cb})),Da=function(e){return e.userReducer.shopStatisticsMap},Ca=function(e,t){return(0,Wn.createSelector)(Da,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},Aa=(0,Wn.createSelector)(ga,ya,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),Ia=(0,Wn.createSelector)(ga,ya,co,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,p,{shops:n})||{}})),Pa=(0,Wn.createSelector)(ga,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),wa=(0,Wn.createSelector)(ga,(function(e){return e&&e.distribution_status||""})),Na=function(e){return e.userReducer.isMainPage},Ua=function(e){return e.userReducer.curTabFocused},xa=function(e){return e.userReducer.textBoxHeight},ka=function(e){return e.userReducer.showConversationDetail},Ma=function(e){return e.userReducer.showChatWindow},La=function(e){return e.userReducer.openedMenu},ja=function(e){return e.userReducer.isScChat},Ga=function(e){return e.userReducer.loginSuccess},Fa=function(e){return e.userReducer.socketSuccess},Ha=function(e){return e.userReducer.showEntry},Va=(0,Wn.createSelector)(ga,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0})),Ba=function(e){return e.userReducer.showAutoHangupModal},Ya=(0,Wn.createSelector)(ga,ya,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return!!t||e.is_seller}));!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL",e.REPORT_USER_REQUESTED="REPORT_USER_REQUESTED",e.SET_CHAT_LIST_WIDTH="SET_CHAT_LIST_WIDTH"}(oa||(oa={}));var Qa,Wa,qa=y(439).t,Ka=At().mark(ec),za=At().mark(tc),Xa=(0,dr.createActions)(e({},oa.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),Ja=Xa.blockUserRequested,$a=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},Za=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?qa("common.server_error.warning_tips"):qa("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function ec(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,on.call)(hr,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,on.put)(h_(Za(!1,o,r)));case 7:return i.next=9,(0,on.put)(ho({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,on.put)(ho({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof ft&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,on.put)(Lo($a(r)));case 20:return i.next=22,(0,on.put)(h_(Za(!0)));case 22:case"end":return i.stop()}}),Ka,null,[[1,13]])}function tc(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Ja,ec);case 2:case"end":return e.stop()}}),za)}function rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?rc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var oc=At().mark(dc),ac=At().mark(pc),cc=(0,dr.createActions)((e(Qa={},oa.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(Qa,oa.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(Qa,oa.GET_GUIDE_FAILED,(function(){return{}})),Qa)),sc=cc.getGuideRequested,ic=cc.getGuideSucceeded,uc=cc.getGuideFailed,lc="newbie-completed-info";function dc(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.userId,n=t.version,s.prev=1,s.next=4,(0,C.getItem)(lc);case 4:if(s.sent!=="".concat(r,"-").concat(n)){s.next=7;break}return s.abrupt("return",[]);case 7:return o=[1],s.next=10,(0,on.call)(hr,{resource:"newbie",suffix:"uncompleted",params:{chat_types:"[".concat(o.join(","),"]")}});case 10:return a=s.sent,c=a.newbie,s.next=14,(0,on.put)(ic({newbie:c}));case 14:if(!(c.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){s.next=18;break}return s.next=18,(0,C.setItem)(lc,"".concat(r,"-").concat(n));case 18:return s.abrupt("return",c);case 21:return s.prev=21,s.t0=s.catch(1),s.next=25,(0,on.put)(uc());case 25:return s.abrupt("return",[]);case 26:case"end":return s.stop()}}),oc,null,[[1,21]])}function pc(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(sc,dc);case 2:case"end":return e.stop()}}),ac)}const fc=(e(Wa={},oa.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return nc(nc({},e),{},{newbie:r})})),e(Wa,oa.GET_GUIDE_FAILED,(function(e){return nc(nc({},e),{},{newbie:[]})})),Wa);var _c;function Ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ec(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Oc=At().mark(yc),hc=At().mark(Rc);function vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tc=(0,dr.createActions)((e(_c={},oa.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(_c,oa.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),_c)),mc=Tc.updateGuideRequested,gc=Tc.updateGuideSucceeded;function bc(e,t){var r,n=Wt(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return vc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function yc(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,on.select)(ua);case 3:return r=o.sent,n=bc(r,t),o.next=7,(0,on.put)(gc({newbie:n}));case 7:return o.prev=7,o.next=10,(0,on.call)(hr,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),Oc,null,[[7,12]])}function Rc(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(mc,yc);case 2:case"end":return e.stop()}}),hc)}const Dc=e({},oa.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return Sc(Sc({},e),{},{newbie:r})}));var Cc,Ac,Ic=y(550),Pc=y.n(Ic),wc=y(947),Nc=y.n(wc);function Uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Uc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kc=At().mark(rs),Mc=At().mark(ns),Lc=At().mark(os),jc=At().mark(cs),Gc=At().mark(ss),Fc=At().mark(is),Hc=(0,dr.createActions)((e(Cc={},oa.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(Cc,oa.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(Cc,oa.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(Cc,oa.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(Cc,oa.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),e(Cc,oa.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow,from:e.from}})),e(Cc,oa.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(Cc,oa.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(Cc,oa.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(Cc,oa.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(Cc,oa.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(Cc,oa.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(Cc,oa.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(Cc,oa.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),Cc)),Vc=Hc.updateUserRequested,Bc=Hc.updateNetworkStatus,Yc=Hc.fetchUserOrderDetailRequested,Qc=Hc.fetchUserOrderDetailSucceeded,Wc=Hc.updateShowAutoHangupModal,qc=Hc.updateChatWindowStatus,Kc=Hc.updateChatWindowStatusSucceeded,zc=Hc.updateConversationDetailStatus,Xc=Hc.updateConversationDetailStatusSucceeded,Jc=Hc.updateOpenedMenu,$c=Hc.setChatSource,Zc=Hc.updateLoginSuccessStatus,es=Hc.updateSocketSuccessStatus,ts=Hc.updateChatEntryStatus;function rs(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,on.call)(hr,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,C.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,on.put)(jv({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,on.put)(h_({error:r.t0}));case 15:case"end":return r.stop()}}),kc,null,[[1,11]])}function ns(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,on.call)(hr,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,on.put)(Qc({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),Mc,null,[[1,9]])}function os(){var e,t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,on.select)(Eu);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,on.put)(el({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),Lc)}var as=!0;function cs(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowWindow,n=t.from,o.next=3,(0,on.put)(Kc({shouldShowWindow:r}));case 3:if(!r){o.next=17;break}return o.next=6,Pc().call(Nc().updateChatbotFrom({payload:n||C.ChatbotFromType.LandingPage}));case 6:return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),o.next=9,(0,on.call)(os);case 9:if(!as){o.next=15;break}return o.next=12,(0,on.spawn)(ES);case 12:return o.next=14,(0,on.call)(Zd,{payload:{direction:"reset"}});case 14:as=!1;case 15:return o.next=17,Pc().call(Nc().handleNewConversationMessageQueue());case 17:case"end":return o.stop()}}),jc)}function ss(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,on.put)(Xc({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,on.call)(os);case 6:case"end":return o.stop()}}),Gc)}function is(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Vc,rs);case 2:return e.next=4,(0,on.takeEvery)(Yc,ns);case 4:return e.next=6,(0,on.takeEvery)(qc,cs);case 6:return e.next=8,(0,on.takeEvery)(zc,ss);case 8:case"end":return e.stop()}}),Fc)}const us=(e(Ac={},oa.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return xc(xc({},e),{},{networkStatus:r})})),e(Ac,oa.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return xc(xc({},t),{},{shopStatisticsMap:xc(xc({},i),{},e({},s,c))})})),e(Ac,oa.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e,t){var r=t.payload.showAutoHangupModal;return xc(xc({},e),{},{showAutoHangupModal:r})})),e(Ac,oa.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return xc(xc({},e),{},{showChatWindow:r})})),e(Ac,oa.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return xc(xc({},e),{},{showConversationDetail:r})})),e(Ac,oa.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return xc(xc({},e),{},{openedMenu:r})})),e(Ac,oa.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return xc(xc({},e),{},{isScChat:r})})),e(Ac,oa.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return xc(xc({},e),{},{loginSuccess:r})})),e(Ac,oa.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return xc(xc({},e),{},{socketSuccess:r})})),e(Ac,oa.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return xc(xc({},e),{},{showEntry:r})})),Ac);var ls,ds,ps=y(459);function fs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _s(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?fs(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Es,Ss=At().mark(Cs),Os=At().mark(As),hs=At().mark(ws),vs=At().mark(Ns),Ts=At().mark(Us);Es=(0,C.checkIsScChat)();var ms=(0,dr.createActions)((e(ls={},oa.LOGIN_REQUESTED,(function(){return{}})),e(ls,oa.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(ls,oa.LOGOUT_REQUESTED,(function(){return{}})),e(ls,oa.LOGOUT_SUCCEEDED,(function(){return{}})),e(ls,oa.FORCE_LOGOUT_REQUESTED,(function(){return{}})),ls)),gs=ms.loginRequested,bs=ms.loginSucceeded,ys=ms.logoutRequested,Rs=ms.logoutSucceeded,Ds=ms.forceLogoutRequested;function Cs(e){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,on.call)(C.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,on.call)(C.setItem,e,(0,ps.v4)());case 6:case"end":return t.stop()}}),Ss)}function As(){var e,t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,C.getTranslationLocale)((0,C.getRuntimeLocale)()),r.next=3,(0,on.call)(un,{locale:e});case 3:return t=r.sent,r.next=6,(0,on.call)(C.changeLanguage,e,t);case 6:case"end":return r.stop()}}),Os)}var Is=At().mark((function e(t){var r,n;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,C.getTranslationLocale)(t),e.prev=1,e.next=4,(0,on.call)(un,{locale:n});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,(0,on.call)(un,{locale:(0,C.getTranslationLocale)((0,C.getRuntimeLocale)())});case 11:r=e.sent;case 12:return e.next=14,(0,on.call)(C.changeLanguage,n,r);case 14:return e.next=16,(0,on.call)(C.updateTimeLocale,(0,C.getServiceLocale)(t));case 16:case"end":return e.stop()}}),e,null,[[1,7]])})),Ps=At().mark((function e(t){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.call)(As);case 2:return e.next=4,(0,on.put)(ts({showEntry:!0}));case 4:return e.next=6,(0,on.put)(Zc({loginSuccess:!1}));case 6:Xr(qr.LOGIN_FAILED,0,{type:(r=t,r instanceof lt?"InternalServerError":r instanceof dt?"Forbidden":r instanceof st?"Unauthoried":"Other")});case 7:case"end":return e.stop()}var r}),e)}));function ws(e,t){var r,n,o,a,c,s,i,u,l;return At().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,r=t.godToken,n=e.user,o=n.id,a=n.type,c=n.locale,s=n.distribution_status,i=a===C.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||i&&"working"===s&&(window.__WEBCHAT_LOGIN__=!0),d.next=8,(0,on.call)(Is,c||"en");case 8:return performance.mark("APP_RENDERING"),Kr(),Vr(a),Un(n),d.next=14,(0,on.put)(Bc({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){It.store.dispatch(Bc({networkStatus:"online"}))})),window.addEventListener("offline",(function(){It.store.dispatch(Bc({networkStatus:"offline"}))})),d.next=18,(0,on.put)(Zc({loginSuccess:!0}));case 18:return d.next=20,(0,on.put)(ts({showEntry:!0}));case 20:return u=T("users",n),l=u.entities,d.next=23,(0,on.put)(Oo({entities:l}));case 23:return!r&&Bt.connect(),Es&&Bt.dispatch(C.CustomShareEvent.CALC_CONNECTIONS),d.next=27,(0,on.put)(bs({currentUserId:o}));case 27:return d.next=29,(0,on.put)(Bs());case 29:return d.next=31,(0,on.spawn)(Cs,"device_id");case 31:if(i){d.next=34;break}return d.next=34,(0,on.call)(Mh,wh({shopId:n.shop_id}));case 34:d.next=40;break;case 36:return d.prev=36,d.t0=d.catch(0),d.next=40,(0,on.call)(Ps,d.t0);case 40:return d.prev=40,d.finish(40);case 42:case"end":return d.stop()}}),hs,null,[[0,36,40,42]])}function Ns(){var e,t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,performance.mark("APP_PREPARED"),e={},t="",!window.__WEBCHAT_SESSION__){n.next=9;break}Xr(qr.LOGIN_IN_HTML,0),e=window.__WEBCHAT_SESSION__,n.next=16;break;case 9:return Xr(qr.LOGIN_IN_SERVICE,0),(r={method:"POST",subServer:"coreapi",resource:"login"}).params={source:Es?"sc":"pcmall"},((0,C.isVisitingCNSC)()||(0,C.isVisitingKRSC)())&&(r.parent="cbsc"),n.next=15,(0,on.call)(hr,r);case 15:e=n.sent;case 16:return performance.mark("LOGIN_API_RESPONSED"),n.next=19,(0,C.setItem)("mini-session",e);case 19:return C.LS.setItem("mini-session",JSON.stringify(e)),n.abrupt("return",{session:e,params:{godToken:t}});case 23:return n.prev=23,n.t0=n.catch(0),n.next=27,(0,on.call)(Ps,n.t0);case 27:return n.prev=27,n.finish(27);case 29:case"end":return n.stop()}}),vs,null,[[0,23,27,29]])}function Us(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(gs,Ns);case 2:return e.next=4,(0,on.takeLatest)(ys,Fi);case 4:return e.next=6,(0,on.takeLatest)(Ds,Gi);case 6:case"end":return e.stop()}}),Ts)}const xs=(e(ds={},oa.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return _s(_s({},e),{},{currentUserId:r})})),e(ds,oa.LOGOUT_SUCCEEDED,(function(e){return _s(_s({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),ds);var ks,Ms,Ls,js=At().mark(Ws),Gs=At().mark(qs);function Fs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hs(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fs(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Ls=(0,C.checkIsScChat)();var Vs=(0,dr.createActions)((e(ks={},oa.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(ks,oa.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{shouldInitFSSDK:e.shouldInitFSSDK,hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),e(ks,oa.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),ks)),Bs=Vs.checkUserPermissionRequested,Ys=Vs.checkUserPermissionSucceeded,Qs=Vs.updateDelPermission;function Ws(){var e,t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,shouldInitFSSDK:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0},s.prev=1,s.next=4,(0,on.call)(hr,{subServer:"coreapi",parent:"user",resource:"global_config"});case 4:return t=s.sent,s.next=7,(0,on.select)(ga);case 7:r=s.sent,n=r.type,o=r.country,e.hasVideoPermission=t.video,e.hasReplyPermission=t.reply,e.shouldInitFSSDK=t.privacy&&Ls||"live"!==(0,C.getRuntimeServer)(),"seller"===n&&(a=t.delete_msg||{},e.deleteConfigVersion=a.config_version,c=(a.region_config||[]).find((function(e){return e.region===o})),c&&c.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=c.duration)),s.next=17;break;case 15:s.prev=15,s.t0=s.catch(1);case 17:return s.next=19,(0,on.put)(Ys(Hs({},e)));case 19:case"end":return s.stop()}}),js,null,[[1,15]])}function qs(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Bs,Ws);case 2:case"end":return e.stop()}}),Gs)}const Ks=(e(Ms={},oa.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.shouldInitFSSDK,o=r.hasVideoPermission,a=r.hasReplyPermission,c=r.hasDeletePermission,s=r.deleteConfigDuration,i=r.deleteConfigVersion;return Hs(Hs({},e),{},{shouldInitFSSDK:n,hasVideoPermission:o,hasReplyPermission:a,hasDeletePermission:c,deleteConfigDuration:s,deleteConfigVersion:i})})),e(Ms,oa.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return Hs(Hs({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),Ms);var zs,Xs,Js=At().mark(ei),$s=At().mark(ti),Zs=(0,dr.createActions)(e({},oa.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function ei(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,on.call)(hr,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,on.put)(Oo({entities:s}));case 13:return i.next=15,(0,on.put)(Yc({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),Js,null,[[1,7]])}function ti(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Zs,ei);case 2:case"end":return e.stop()}}),$s)}function ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ni(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ri(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var oi=At().mark(li),ai=At().mark(di),ci=(0,dr.createActions)((e(zs={},oa.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(zs,oa.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(zs,oa.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),zs)),si=ci.updateIsMainPage,ii=ci.updateCurTabFocused,ui=ci.updateCurTabFocusedSucceeded;function li(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return Bt.dispatch(C.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,on.put)(si({isMainPage:!0}));case 5:return r.next=7,(0,on.put)(ui({focused:t}));case 7:case"end":return r.stop()}}),oi)}function di(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(ii,li);case 2:case"end":return e.stop()}}),ai)}const pi=(e(Xs={},oa.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return ni(ni({},e),{},{isMainPage:r})})),e(Xs,oa.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return ni(ni({},e),{},{curTabFocused:r})})),Xs);var fi,_i;function Ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Si(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ei(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Oi=At().mark(bi),hi=At().mark(yi),vi=(0,dr.createActions)((e(fi={},oa.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(fi,oa.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(fi,oa.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),fi)),Ti=vi.updateCaptchaVisible,mi=vi.updateCaptchaSignature,gi=vi.updateCaptchaSignatureSucceeded;function bi(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,on.select)(va);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,on.select)(cE(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,Pc().put(Nc().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,on.put)(gi({signature:t}));case 14:case"end":return a.stop()}}),Oi)}function yi(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(mi,bi);case 2:case"end":return e.stop()}}),hi)}const Ri=(e(_i={},oa.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return Si(Si({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(_i,oa.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return Si(Si({},e),{},{captchaSignature:r})})),_i);var Di,Ci,Ai=At().mark(wi),Ii=At().mark(Ni),Pi=(0,dr.createActions)(e({},oa.REPORT_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}}))).reportUserRequested;function wi(e){var t,r,n,o,a,c,s,i,u,l;return At().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,d.prev=1,d.next=4,(0,on.call)(hr,{resource:"shop",id:n});case 4:o=d.sent,a=o.is_official_shop,c=void 0===a||a,s=o.country,i=void 0===s?"SG":s,u=(0,C.getMallUrl)(i),l="https://".concat(u,"/report/").concat(r),c&&(l="".concat(l,"?is_official_shop=true")),window.open(l),d.next=17;break;case 15:d.prev=15,d.t0=d.catch(1);case 17:case"end":return d.stop()}}),Ai,null,[[1,15]])}function Ni(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Pi,wi);case 2:case"end":return e.stop()}}),Ii)}function Ui(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ui(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ki=(0,dr.createActions)((e(Di={},oa.SET_TEXT_BOX_HEIGHT,(function(e){return e})),e(Di,oa.SET_CHAT_LIST_WIDTH,(function(e){return e})),Di)),Mi=ki.setTextBoxHeight,Li=ki.setChatListWidth;const ji=(e(Ci={},oa.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return xi(xi({},e),{},{textBoxHeight:r})})),e(Ci,oa.SET_CHAT_LIST_WIDTH,(function(e,t){var r=t.payload;return xi(xi({},e),{},{chatlistWidth:r})})),Ci);var Gi=At().mark((function e(){var t=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&Bt.close(),e.next=4,(0,on.put)(Rs());case 4:return e.next=6,(0,on.put)(NS());case 6:(0,C.removeItem)("mini-session"),(0,C.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),Fi=At().mark((function e(){var t;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,C.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:wt().get("SPC_CDS"),SPC_CDS_VER:2}},(0,C.isVisitingCNSC)()||(0,C.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,on.call)(hr,t);case 5:return document.location.replace("https://".concat((0,C.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){It.store.dispatch(Bc({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){It.store.dispatch(Bc({networkStatus:"offline"}))})),Xt(),e.next=11,(0,on.call)(Gi);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,on.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function Hi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Hi(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bi,Yi=[tc,pc,Rc,is,Us,ti,qs,yi,di,Ni],Qi="983743070955270817";Bi=C.MINI_MIN_TEXT_BOX_HEIGHT,Qi="983743070955270818";var Wi,qi,Ki={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},shouldInitFSSDK:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},textBoxHeight:Bi,showAutoHangupModal:!1,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1},zi=(0,dr.handleActions)(Vi(Vi(Vi(Vi(Vi(Vi(Vi(Vi(Vi({},{}),Ks),Ri),pi),ji),fc),Dc),us),xs),Ki),Xi=function(e){return e.conversationReducer.conversationIds},Ji=function(e){return e.conversationReducer.readRequestIds},$i=function(e){return e.conversationReducer.missedReadNoticeCount},Zi=function(e){return e.conversationReducer.inlocation},eu=function(e){return e.conversationReducer.updateTimeNow},tu=function(e){return e.conversationReducer.currentConversationId},ru=function(e){return e.conversationReducer.currentConversationCanRead},nu=function(e){return e.conversationReducer.status},ou=function(e){return e.conversationReducer.direction},au=(0,Wn.createSelector)(Xn,Xi,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),cu=(0,Wn.createSelector)(au,tu,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),su=(0,Wn.createSelector)(au,(function(e){return e.filter((function(e){return e.pinned}))})),iu=(0,Wn.createSelector)(au,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),uu=(0,Wn.createSelector)(au,tu,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),lu=(0,Wn.createSelector)(au,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),du=function(e){return e.conversationReducer.keyword},pu=function(e){return e.conversationReducer.filter},fu=(0,Wn.createSelector)(pu,au,cu,su,iu,uu,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),_u=(0,Wn.createSelector)(fu,(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})).filter((function(e){return void 0===e.faking}))})),Eu=(0,Wn.createSelector)(au,tu,ya,Zi,zn,Xn,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var l=u.to_id,d=(0,t.denormalize)(l,a,{users:c})||{},p={to_shop_id:d.shop_id,to_status:d.status,to_name:d.name||"-",to_avatar:d.avatar};return Object.assign(u,p)}return u})),Su=(0,Wn.createSelector)(Eu,(function(e){return(e||{}).to_id||null})),Ou=(0,Wn.createSelector)(Eu,co,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),hu=(0,Wn.createSelector)(Ou,(function(e){return(null==e?void 0:e.country)||"SG"})),vu=(0,Wn.createSelector)(Eu,(function(e){return e.shop_id})),Tu=(0,Wn.createSelector)(Eu,(function(e){return e.to_id})),mu=(0,Wn.createSelector)(Eu,(function(e){return e.status})),gu=(0,Wn.createSelector)(Eu,(function(e){return e.auto_translation})),bu=(0,Wn.createSelector)(Eu,(function(e){return e.max_general_option_hide_time})),yu=function(e){return(0,Wn.createSelector)(Xn,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},Ru=function(e){return(0,Wn.createSelector)(yu(e),(function(e){return e.shop_id}))},Du=function(e){return(0,Wn.createSelector)(au,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},Cu=(0,Wn.createSelector)(Eu,(function(e){return(e||{}).shop_id||null})),Au=(0,Wn.createSelector)(zn,Eu,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),Iu=(0,Wn.createSelector)(Eu,(function(e){return(e||{}).to_shop_id||null})),Pu=function(e){return e.conversationReducer.results},wu=function(e){return e.conversationReducer.searchStatus},Nu=(0,Wn.createSelector)(Eu,(function(e){return e.translationAccess})),Uu=function(e){return e.conversationReducer.listsHash},xu=function(e){return e.conversationReducer.conversationBeenDeleted},ku=(0,Wn.createSelector)(Eu,(function(e){return(e||{}).to_name})),Mu=function(e){return e.conversationReducer.access},Lu=function(e){return e.conversationReducer.isNavigateToUnreadMessage},ju=function(e){return e.conversationReducer.navigateToUnreadMessageId},Gu=function(e){return e.conversationReducer.pendingOffersCount},Fu=(0,Wn.createSelector)(Eu,Gu,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),Hu=function(e){return(0,Wn.createSelector)(yu(e),Gu,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},Vu=function(e){return(0,Wn.createSelector)(Ru(e),co,(function(e,r){var n=(0,t.denormalize)(e,p,{shops:r})||{};return(null==n?void 0:n.country)||"SG"}))};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.GET_PENDING_OFFERS_COUNT_REQUESTED="GET_PENDING_OFFERS_COUNT_REQUESTED",e.GET_PENDING_OFFERS_COUNT_SUCCEED="GET_PENDING_OFFERS_COUNT_SUCCEED",e.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED="GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED",e.SET_ACTIVE_TAB="SET_ACTIVE_TAB",e.SET_ACTIVE_TAB_SUCCEED="SET_ACTIVE_TAB_SUCCEED",e.UPDATE_IS_CONTACTS_VISIBLE="UPDATE_IS_CONTACTS_VISIBLE",e.SET_CURRENT_CONVERSATION_ID="SET_CURRENT_CONVERSATION_ID"}(Wi||(Wi={}));var Bu=(0,dr.createActions)((e(qi={},Wi.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e(qi,Wi.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestMessageRegion,o=e.latestMessageRegion,a=e.oldestReceivedMessageId,c=e.latestReceivedMessageId,s=e.oldestTimestampNano,i=e.latestTimestampNano,u=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestMessageRegion:n,latestMessageRegion:o,oldestReceivedMessageId:a,latestReceivedMessageId:c,direction:void 0===u?"reset":u,status:e.status,hasMore:e.hasMore,latestTimestampNano:i,oldestTimestampNano:s,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException}})),e(qi,Wi.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e(qi,Wi.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e(qi,Wi.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e(qi,Wi.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e(qi,Wi.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e(qi,Wi.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e(qi,Wi.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e(qi,Wi.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e(qi,Wi.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e(qi,Wi.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e(qi,Wi.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e(qi,Wi.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e(qi,Wi.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e(qi,Wi.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e(qi,Wi.SEARCH_BY_COMBINED_API,(function(){return{}})),e(qi,Wi.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e(qi,Wi.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e(qi,Wi.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e(qi,Wi.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e(qi,Wi.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e(qi,Wi.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e(qi,Wi.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e(qi,Wi.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e(qi,Wi.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e(qi,Wi.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e(qi,Wi.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e(qi,Wi.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e(qi,Wi.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e(qi,Wi.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e(qi,Wi.UPDATE_ACCESS,(function(e){return{access:e.access}})),e(qi,Wi.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e(qi,Wi.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e(qi,Wi.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e(qi,Wi.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e(qi,Wi.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?C.ConversationTypeEnum.Normal:o}})),e(qi,Wi.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?C.ConversationTypeEnum.Normal:t}})),e(qi,Wi.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e(qi,Wi.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e(qi,Wi.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e(qi,Wi.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e(qi,Wi.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(qi,Wi.GET_PENDING_OFFERS_COUNT_REQUESTED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId}})),e(qi,Wi.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}})),e(qi,Wi.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{records:e.records}})),e(qi,Wi.SET_CURRENT_CONVERSATION_ID,(function(e){return{conversationId:e.conversationId,previousId:e.previousId}})),qi)),Yu=Bu.deleteConversationRequested,Qu=Bu.deleteConversationSucceeded,Wu=Bu.getConversationDetailRequested,qu=Bu.fakeConversationSucceeded,Ku=Bu.fetchConversationsRequested,zu=Bu.fetchConversationsSucceeded,Xu=Bu.updateFetchConversationsStatus,Ju=Bu.updateFetchConversationsDirection,$u=Bu.updateConversationTimestamp,Zu=Bu.updateConversationFilter,el=(Bu.forwardConversationRequested,Bu.massForwardConversationRequested,Bu.markMessagesRequested),tl=Bu.markMessagesSucceeded,rl=Bu.updateReadRequestData,nl=Bu.pinConversationRequested,ol=(Bu.searchConversationsRequested,Bu.resetSearchParams),al=(Bu.updateExistedResultIdMap,Bu.updateCurrentConversationMode,Bu.setCurrentConversationMode,Bu.searchByCombinedApi,Bu.toggleMultipleSelectionMode,Bu.setSelectedConversationList,Bu.updateSelectedConversationId,Bu.selectedConversationsRequested,Bu.conversationBatchOperateRequested,Bu.setCurrentConversationCanRead),cl=Bu.showConversationRequested,sl=Bu.resetConversationRequested,il=Bu.showConversationSucceeded,ul=Bu.changeConversationStatusRequested,ll=Bu.fetchDegradeConversationsDetail,dl=Bu.conversationOperateRequested,pl=Bu.searchMoreResults,fl=(Bu.searchMoreSucceed,Bu.setSearchStatus,Bu.updateAccess),_l=Bu.showSearchedConversationRequested,El=Bu.locationMessage,Sl=Bu.updateLocationMode,Ol=Bu.updateSyncTimeNow,hl=Bu.showNormalConversationSucceeded,vl=Bu.setNavigateToUnreadMessage,Tl=Bu.setNavigateToUnreadMessageId,ml=Bu.resetNavigateToUnreadMessageId,gl=Bu.setConversationBeenDeleted,bl=Bu.muteConversationRequested,yl=Bu.getPendingOffersCountRequested,Rl=Bu.getPendingOffersCountSucceed,Dl=Bu.getBatchPendingOffersCountSucceed,Cl=Bu.setCurrentConversationId,Al=At().mark(Pl),Il=At().mark(wl);function Pl(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,on.select)(yu(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,on.call)(hr,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,on.put)(h_({error:c.t0}));case 17:case"end":return c.stop()}}),Al,null,[[1,13]])}function wl(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(nl,Pl);case 2:case"end":return e.stop()}}),Il)}function Nl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ul(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Nl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xl=function(t,r){var n=r.payload.conversationId,o=Ul(Ul({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return Ul(Ul({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})},kl=function(e){return function(e,t){var r=t.payload.filter;return Ul(Ul({},e),{},{filter:r})}},Ml=function(e,t){var r=t.payload.status;return Ul(Ul({},e),{},{status:r})},Ll=function(e,t){var r=t.payload.direction;return Ul(Ul({},e),{},{direction:r})},jl=function(e,t){var r=t.payload.conversationId;return Ul(Ul({},e),{},{previousConversationId:r})},Gl=function(e,t){var r=t.payload.canRead;return Ul(Ul({},e),{},{currentConversationCanRead:r})};function Fl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vl,Bl=function(e,t){var r=t.payload.conversationId,n=Hl({},e.draftHash);return delete n[r],Hl(Hl({},e),{},{draftHash:n})},Yl=function(e){return Hl(Hl({},e),{},{draftHash:{}})},Ql=function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=Hl({},e.draftHash);return n.forEach((function(e){delete o[e]})),Hl(Hl({},e),{},{draftHash:o})},Wl=function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=Hl({},e.draftHash);return a[n]=o,Hl(Hl({},e),{},{draftHash:a})},ql=At().mark(zl),Kl=(e(Vl={},C.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(Vl,C.ConversationTypeEnum.Normal,"receiveMessageRequested"),Vl);function zl(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=Kl[r],o.next=4,(0,on.spawn)(od,t.request_id);case 4:return o.next=6,Pc().put(Nc()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),ql)}function Xl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Xl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $l=function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return Jl(Jl({},t),{},{mediaMap:Jl(Jl({},c),{},e({},a,s))})},Zl=function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=Wt(c[a])||[];return s.splice(o,1),Jl(Jl({},t),{},{mediaMap:Jl(Jl({},c),{},e({},a,s))})},ed=function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return Jl(Jl({},t),{},{mediaMap:Jl(Jl({},o),{},e({},n,[]))})},td=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},rd=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},nd=At().mark(od);function od(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,C.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,Xr(qr.MESSAGE_SOCKET,n),(0,C.removeItem)(e));case 4:case"end":return o.stop()}}),nd)}var ad=y(439).t,cd=C.MessageTypes.MSG_TYPE_TEXT,sd=function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var l=0,d=null;l<i&&!d;){var p=e.all[l];(d=(0,t.denormalize)(p,c,{messages:n}))&&(d.type===C.MessageTypes.MSG_TYPE_SECURITY_TIPS||d.isFaking)&&(d=null),l++}d&&d.created_timestamp>Math.floor(r.last_message_time_nano/Math.pow(10,9))&&(u=(0,C.fillMessagePreview)(d))}if(!u){var f=r.latest_message_id,_=r.latest_message_content,E=r.latest_message_type,S=r.last_message_option,O=r.latest_message_source,h=r.last_message_time_nano;(u={id:f,content:_,type:E,message_option:S,source:O,to_shop_id:r.latest_message_to_shop_id}).created_at=new Date(h/1e6)+""}var v=u,T=v.id,m=v.message_option,g=a.includes(T)?C.MessageSendStatus.SENDING:s.includes(T)?C.MessageSendStatus.FAILED:u.send_status?C.MessageSendStatus.SUCCEED:null;return(0,C.hasTargetMessageOption)(m,C.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(g=C.MessageSendStatus.FAILED,u.type=cd,u.content={text:ad("common.blacklist.replaced_text")}),(0,C.hasTargetMessageOption)(m,C.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(g=C.MessageSendStatus.FAILED),u.send_status=g,u},id={MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",DELETE_CONVERSATION:"delete_conversation",UPDATE_OFFER_STATUS:"update_offer_status",UPDATE_CONVERSATION:"update_conversation",UPDATE_USER_STATUS:"update_user_status",UPDATE_CONVERSATION_FLAG:"update_conversation_flag",FORCE_LOGOUT:"force_logout",UPDATE_RATING_CARD_STATUS:"update_rating_card_status",PULL_NOTIFICATION:"pull_notification",PIN_CONVERSATION:"pin_conversation",UNPIN_CONVERSATION:"unpin_conversation",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_PIN:"mass_pin",MASS_UNPIN:"mass_unpin",MASS_CLOSE:"mass_close",MASS_ACTIVATE:"mass_activate",VIDEO_UPLOAD:"video_upload",MARK_AS_REPLIED:"mark_as_replied",MARK_AS_UNREPLIED:"mark_as_unreplied",CHAT_DELETE_MSG:"chat_delete_msg",FAQ_SESSION_UPDATE:"faq_session_update",MUTE_CONVERSATION:"mute_conversation",UNMUTE_CONVERSATION:"unmute_conversation"},ud=At().mark(dd),ld=At().mark(pd);function dd(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,on.select)(Ru(t));case 4:return r=n.sent,n.next=7,(0,on.call)(hr,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,on.put)(h_({error:n.t0}));case 13:case"end":return n.stop()}}),ud,null,[[1,9]])}function pd(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Yu,dd);case 2:case"end":return e.stop()}}),ld)}const fd=e({},Wi.DELETE_CONVERSATION_SUCCEEDED,xl);var _d,Ed=At().mark(bd),Sd=At().mark(yd),Od=At().mark(Rd),hd=At().mark(Dd),vd=At().mark(Cd),Td=At().mark(Ad);function md(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?md(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bd(e){var t,r,n,o,a,c,s,i,u,l,d,p,f;return At().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:if(t=e.conversation,r=e.isSubAccount,n=t.id,o=t.to_id,a={},r){_.next=8;break}return _.next=6,(0,on.call)(C.getItem,"mini-sc_redirect");case 6:(c=_.sent)&&(s=c.orderId,i=c.productId,u=c.conversationId,l=c.shopId,parseInt(n)===parseInt(u)&&(s?a={order_id:parseInt(s)}:i?a={product_id:parseInt(i)}:l&&(a={shop_id:parseInt(l)})));case 8:return _.next=10,(0,on.call)(hr,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(gd({conversation_id:n,to_id:o},a))});case 10:if(d=_.sent,p=d.faq_session_id,f=d.session_expiry_timestamp,r){_.next=16;break}return _.next=16,Pc().put(Nc().fetchFaqSessionSucceed({payload:{conversationId:n,faqSessionId:p,sessionExpiryTime:f}}));case 16:case"end":return _.stop()}}),Ed)}function yd(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y;return At().wrap((function(R){for(;;)switch(R.prev=R.next){case 0:return t=e.conversation,e.previousId,r=e.messageId,n=e.messageList,e.sourceInfo,a=(o=t).id,c=o.lack,R.next=4,(0,on.select)(ya);case 4:if((s=R.sent)||!c){R.next=11;break}return R.next=8,(0,on.call)(ep,{payload:{conversationIds:[a]}});case 8:return R.next=10,(0,on.select)(yu(a));case 10:t=R.sent;case 11:return u=(i=t).faking,l=i.status,d=i.to_id,p=i.shop_id,f=i.latest_message_id,_=i.to_shop_id,E=i.unread_count,S=i.last_read_message_id,Gn({shopId:p,operation:C.TrackerOperation.IMPRESSION,trackerName:"impressionChatRoom",data:{convo_userid:d,conversation_id:a}}),R.next=15,(0,on.spawn)(bd,{conversation:t,isSubAccount:s});case 15:return R.next=17,(0,on.select)(vh);case 17:if((O=R.sent)&&O[p]||!s){R.next=22;break}return R.next=22,(0,on.call)(Mh,wh({shopId:p}));case 22:return R.next=24,(0,on.put)(Zs({userId:d,shopId:p,buyerShopId:_}));case 24:return R.next=26,(0,on.put)(ml());case 26:return h="number"==typeof E&&E>0&&!r,R.next=29,(0,on.put)(vl({isNavigateToUnreadMessage:h}));case 29:return R.next=31,Pc().put(Nc().fetchMessagesRequested({payload:{conversationId:a,messageId:r||(h?S:void 0),direction:r||h?"around":"older",messageList:n,reset:!0}}));case 31:return R.next=33,(0,on.put)(yl({shopId:p,buyerId:d}));case 33:return R.next=35,Pc().call(Nc().handleCurrentConversationChange({payload:a}));case 35:if(v=R.sent,!(!u&&"closed"!==l&&E>0||v)){R.next=41;break}return T=v||f,R.next=41,(0,on.put)(el({conversationId:a,isRead:!0,latestMessageId:T}));case 41:if(m={},!s){R.next=50;break}return R.next=45,(0,on.call)(r_,{payload:{shopId:p}});case 45:return g=R.sent,b=g.auth_names,y=void 0===b?[]:b,R.next=50,(0,on.put)(fl({access:y}));case 50:return R.next=52,(0,on.select)(Df(p));case 52:if(m=R.sent){R.next=59;break}return R.next=56,(0,on.call)(Ff,{payload:{shopId:p}});case 56:return m=R.sent,R.next=59,(0,on.put)(ho({name:"shops",id:p,record:gd({},m)}));case 59:return R.next=63,Pc().put(Nc().messageSyncUpdate({payload:{conversation:t}}));case 63:return R.next=65,(0,on.put)(gl({conversationBeenDeleted:!1}));case 65:case"end":return R.stop()}}),Sd)}function Rd(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,c=t.sourceInfo,s=void 0===c?{}:c,i.prev=1,i.next=4,(0,on.spawn)(yd,{conversation:r,previousId:n,messageId:o,messageList:a,sourceInfo:s});case 4:i.next=9;break;case 6:i.prev=6,i.t0=i.catch(1),console.log("*** Show Conversation Failed: ",i.t0);case 9:case"end":return i.stop()}}),Od,null,[[1,6]])}function Dd(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.conversationId,n=t.previousId,o.next=3,(0,on.put)(il({conversationId:r,previousId:n}));case 3:case"end":return o.stop()}}),hd)}function Cd(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,on.put)(hl({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),vd)}function Ad(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(cl,Rd);case 2:return e.next=4,(0,on.takeEvery)(Cl,Dd);case 4:return e.next=6,(0,on.takeEvery)(il,Cd);case 6:case"end":return e.stop()}}),Td)}const Id=(e(_d={},Wi.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,gd(gd({},e),{},{currentConversationId:n})})),e(_d,Wi.RESET_CONVERSATION_REQUESTED,(function(e){return gd(gd({},e),{},{currentConversationId:null})})),e(_d,Wi.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return gd(gd({},e),{},{isNavigateToUnreadMessage:r})})),e(_d,Wi.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return gd(gd({},e),{},{navigateToUnreadMessageId:r})})),e(_d,Wi.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return gd(gd({},e),{},{navigateToUnreadMessageId:""})})),_d),Pd=e({},Wi.UPDATE_CONVERSATION_FILTER,kl(C.ConversationTypeEnum.Normal));function wd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ud,xd=At().mark(Md),kd=At().mark(Ld);function Md(e,t,r,n,o){var a,c,s,i,u,l,d,p,f,_,E,S,O,h,v;return At().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,on.select)(Eu);case 3:return c=m.sent,m.next=6,(0,on.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,l=s.shops,d=void 0===l?{}:l,p=[],c&&c.faking?(f=c.id,p=ln(t,a.result,n,f)):p=ln(t,a.result,n),_=p.length<C.persistLimit?null:Wt(p).splice(0,C.persistLimit),m.next=16,(0,on.put)(Oo({entities:{persist:_}}));case 16:return m.next=18,(0,on.call)(iv,u,e,"conversations");case 18:return m.next=20,(0,on.spawn)(Ld,e);case 20:if(!(E=o&&o.length)){m.next=26;break}return m.next=24,(0,on.call)(iv,d,o,"shops");case 24:return m.next=26,(0,on.put)(Uf({shopIds:o.map((function(e){return e.id}))}));case 26:return m.next=28,(0,on.put)(fr());case 28:if(!(S=fn(_,r,t))||!S.changed){m.next=40;break}if(h=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=35;break}O=a.entities.conversations&&a.entities.conversations[h],m.next=39;break;case 35:return m.next=37,(0,on.select)(au);case 37:v=m.sent,O=v.find((function(e){return e.id===h}));case 39:O&&(E?S.oldestReceivedMessageId=O.latest_message_id:S.oldestTimestampNano=O.last_msg_time_nano);case 40:return m.abrupt("return",{persistObj:S,resultConversationIds:p});case 41:case"end":return m.stop()}}),xd)}function Ld(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_;return At().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(t=[],e.forEach((function(e){(0,C.hasTargetMessageOption)(e.last_message_option,C.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){E.next=27;break}return E.next=5,(0,on.call)(hr,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=E.sent,!(n=Object.keys(r)).length){E.next=27;break}o={};case 9:if(!n.length){E.next=24;break}if(!(a=n.shift())){E.next=22;break}return E.next=14,(0,on.select)(yu(a));case 14:if(c=E.sent,(0,C.hasTargetMessageOption)(c.last_message_option,C.MessageOption.MSG_OPT_RECALL)){E.next=17;break}return E.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,l=s.content,d=s.to_shop_id,p=s.created_at,f=(0,C.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==d}),_=(0,C.getCrmPreviewParams)(s),o[a]=Nd(Nd({latest_message_id:i,latest_message_type:u,latest_message_content:l,last_message_time:p},f),_);case 22:E.next=9;break;case 24:if((0,C.checkEmptyObject)(o)){E.next=27;break}return E.next=27,(0,on.put)(To({name:"conversations",records:o}));case 27:case"end":return E.stop()}}),kd)}var jd=At().mark(Jd),Gd=At().mark($d),Fd=At().mark(Zd),Hd=At().mark(ep),Vd=At().mark(tp),Bd=At().mark(rp);function Yd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Yd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Wd=["pinned","unreplied"],qd=function(e,t,r,n,o){var a={},c="older"===e?t:"latest"===e?r:"",s=Wd.includes(n);return a.resource=s?"conversation/list":"conversations",a.params={next_timestamp_nano:c,direction:"latest"===e&&c?"latest":"older"},"unread"===n&&(a.params.unread_only=!0),s&&(a.params.type=n),new Promise((function(e,t){hr(a).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},Kd=function(e){e.source;var t=e.filter,r=e.shopId,n=e.direction,o=e.oldestMessageRegion,a=e.latestMessageRegion,c=e.oldestReceivedMessageId,s=e.latestReceivedMessageId,i="",u="";"older"===n?(i=o,u=c):"latest"===n&&(i=a,u=s);var l={direction:"latest"===n?"latest":"older"};return r&&(l.shop_id=r),i&&(l.last_message_region=i),u&&(l.last_received_message_id=u),t&&["unread","pinned"].includes(t)&&(l.type=t),new Promise((function(e,t){hr({parent:"subaccount",resource:"conversations",params:l}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},zd=function(e){return new Promise((function(t,r){hr({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},Xd=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){hr({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function Jd(t){var r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,D,C,A,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,Q,W,q,K;return At().wrap((function(z){for(;;)switch(z.prev=z.next){case 0:return r=t.list,n=t.needFetchOfferCount,o=void 0!==n&&n,a=t.conversationId,c=t.handleSave,z.next=3,(0,on.select)(ya);case 3:s=z.sent,i=[],u=[],l=[],d=[],p={},f=0;case 10:if(!(f<r.length)){z.next=26;break}if(_=r[f],E=_.id,S=_.conversation_id,O=_.type,h=_.content,v=_.latest_message_type,T=_.latest_message_content,m=_.to_id,g=_.shop_id,b=v||O,y=T||h,R=S||E,o&&d.push({buyer_id:m,shop_id:g}),!["order","offer","voucher"].includes(b)){z.next=23;break}return z.next=19,(0,on.select)(Ru(R));case 19:D=z.sent,C=!1,"order"===b&&s&&D!==y.shop_id&&(C=!0),C||(A="".concat(b,"_id"),I=y[A],P="order"===b?u:"offer"===b?i:l,0!==(w=y.shop_id)&&0!==parseInt(I)&&(P.push(e({shop_id:w},A,parseInt(I))),p[E]={type:b,itemId:I,conversationId:R}));case 23:f++,z.next=10;break;case 26:if(Object.keys(p).length||d.length){z.next=28;break}return z.abrupt("return");case 28:return N={},z.next=31,(0,on.select)(Aa);case 31:if(U=z.sent){z.next=37;break}if(!a){z.next=37;break}return z.next=36,(0,on.select)(Ru(a));case 36:U=z.sent;case 37:return U&&(N={params:{shop_id:U}}),z.prev=38,z.next=41,(0,on.call)(hr,Qd(Qd({method:"POST",parent:"chat_preview",resource:"detail"},N),{},{payload:JSON.stringify({offer_preview_req:i,order_preview_req:u,voucher_preview_req:l,offer_count_req:d})}));case 41:x=z.sent,z.next=47;break;case 44:z.prev=44,z.t0=z.catch(38),x={};case 47:if(M=(k=x).vouchers,L=void 0===M?[]:M,j=k.offers,G=void 0===j?[]:j,F=k.orders,H=void 0===F?[]:F,V=k.buyer_offer_counts,B=void 0===V?[]:V,L.length||G.length||H.length||B.length){z.next=50;break}return z.abrupt("return");case 50:Y={},Q=Object.keys(p),W=At().mark((function e(){var t,r,n,o,a,c,s,i,u;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=K[q],r=void 0,n=p[t],o=n.type,a=n.itemId,c=n.conversationId,e.next=5,(0,on.select)(Vu(c));case 5:s=e.sent,e.t0=o,e.next="voucher"===e.t0?9:"offer"===e.t0?12:"order"===e.t0?15:17;break;case 9:return i=L.find((function(e){return e.id===a})),r=i?Qd(Qd({},i),Re(i)):i,e.abrupt("break",17);case 12:return u=G.find((function(e){return e.id===a})),r=u?Qd(Qd({},u),{},{offer_price:oe(u.offer_price,s)}):u,e.abrupt("break",17);case 15:return r=H.find((function(e){return e.id===a})),e.abrupt("break",17);case 17:r&&(Y[t]=r);case 18:case"end":return e.stop()}}),e)})),q=0,K=Q;case 54:if(!(q<K.length)){z.next=59;break}return z.delegateYield(W(),"t1",56);case 56:q++,z.next=54;break;case 59:c&&c({records:Y,buyerOfferCounts:B});case 60:case"end":return z.stop()}}),jd,null,[[38,44]])}function $d(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},r={},n.next=4,(0,on.call)(Jd,{list:e,needFetchOfferCount:!0,handleSave:function(e){var n=e.records,o=e.buyerOfferCounts;Object.keys(n).forEach((function(e){t[e]={latest_message_content:n[e]}})),o.forEach((function(e){var t=e.shop_id,n=e.buyer_id,o=e.pending_count,a="".concat(t,"_").concat(n);r[a]=o}))}});case 4:return n.next=6,(0,on.put)(To({name:"conversations",records:t}));case 6:return n.next=8,(0,on.put)(Dl({records:r}));case 8:case"end":return n.stop()}}),Gd)}function Zd(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R,A,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,Q,W,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de;return At().wrap((function(pe){for(;;)switch(pe.prev=pe.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,pe.next=5,(0,on.select)(ja);case 5:return s=pe.sent,pe.next=8,(0,on.select)(ya);case 8:return i=pe.sent,pe.next=11,(0,on.select)(pu);case 11:if(u=pe.sent.toLowerCase(),l=!i,d=o===C.ConversationSource.SYNC,"reset"!==r){pe.next=19;break}return pe.next=17,Pc().put(Nc().resetConversationQueue({isLazy:!0}));case 17:return pe.next=19,(0,on.put)(zu({conversationIds:[],oldestMessageRegion:"",latestMessageRegion:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:C.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:l}));case 19:return pe.next=21,(0,on.select)((function(e){return e.conversationReducer}));case 21:if(p=pe.sent,f=p.oldestTimestampNano,_=p.latestTimestampNano,E=p.maxLatestTimestampNano,S=p.oldestReceivedMessageId,O=p.latestReceivedMessageId,h=p.maxLatestReceivedMessageId,v=p.hasMore,T=p.persist,m=p.conversationIds,g=p.status,b=p.syncFetchException,y=p.currentConversationId,R=p.oldestMessageRegion,A=p.latestMessageRegion,I="reset"===r||(l?!f:!S)&&"older"===r,pe.prev=37,"older"===r&&(l?"0"===f:!v)){pe.next=158;break}if(n){pe.next=42;break}return pe.next=42,(0,on.put)(Xu({status:I?C.DataFetchStatus.INIT_PENDING:C.DataFetchStatus.PENDING}));case 42:if(P=[],w={},!l){pe.next=53;break}return pe.next=47,(0,on.call)(qd,r,f,_,u,o);case 47:N=pe.sent,U=D(N,2),P=U[0],w=U[1],pe.next=56;break;case 53:return pe.next=55,(0,on.call)(Kd,{source:o,shopId:c,direction:r,oldestMessageRegion:R,latestMessageRegion:A,oldestReceivedMessageId:S,latestReceivedMessageId:O,filter:u});case 55:P=pe.sent;case 56:if(!(x=P.length)){pe.next=154;break}if("reset"===r&&(!l||Wd.includes(u))){pe.next=68;break}if(k=P[x-1],M="older"===r,l?(L=M?f:_,j=M?k.next_timestamp_nano:k.last_message_time_nano):(L=M?S:O,j=k.latest_message_id),!L||!j){pe.next=68;break}if(M?j<L:j>L){pe.next=68;break}return pe.next=67,(0,on.put)(zu({direction:r,status:C.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:O,maxLatestReceivedMessageId:O,conversationIds:m,oldestTimestampNano:f,latestTimestampNano:_,maxLatestTimestampNano:_,shouldFetchByTimestamp:l}));case 67:return pe.abrupt("return");case 68:if(s||i){pe.next=78;break}return pe.next=71,(0,on.select)(tS);case 71:if("enabled"===pe.sent){pe.next=78;break}return G=Array.from(new Set(P.map((function(e){return e.to_shop_id})))),pe.next=76,(0,on.call)(Xd,G);case 76:F=pe.sent,P=P.map((function(e){var t=F.find((function(t){return t.shop_id===e.to_shop_id}));return Qd(Qd({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 78:if(H={},P.forEach((function(e){H[e.id]=!0})),td(P),V=P[0],B=rd(V,w.next_cursor),Y=V.latest_message_id,Q={status:C.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:H,shouldFetchByTimestamp:l,latestMessageRegion:V.last_message_region,maxLatestReceivedMessageId:!h||h<Y?Y:h},!l){pe.next=100;break}return W=B.oldestTimestampNano,q=B.latestTimestampNano,pe.next=89,(0,on.select)((function(e){return e.conversationReducer}));case 89:return K=pe.sent,z=K.conversationIds,X=K.persist,pe.next=94,(0,on.call)(Md,P,z,X,r);case 94:J=pe.sent,$=J.persistObj,Z=J.resultConversationIds,Q=Object.assign({},Q,{oldestTimestampNano:W,latestTimestampNano:q,persist:$,conversationIds:Z,maxLatestTimestampNano:!E||E<q?q:E}),pe.next=120;break;case 100:return ee=[],te=[],pe.next=104,(0,on.select)(Cf);case 104:if(re=pe.sent,P.forEach((function(e){!re.includes(e.shop_id)&&te.push(e.shop_id)})),!te.length){pe.next=110;break}return pe.next=109,(0,on.call)(t_,{shopIds:Wt(new Set(te))});case 109:ee=pe.sent;case 110:return pe.next=112,(0,on.select)((function(e){return e.conversationReducer}));case 112:return ne=pe.sent,oe=ne.conversationIds,ae=ne.persist,pe.next=117,(0,on.call)(Md,P,oe,ae,r,ee);case 117:ce=pe.sent,se=P[x-1],Q=Object.assign({},Q,{hasMore:!0,conversationIdsMap:H,persist:ce.persistObj,oldestMessageRegion:se.last_message_region,oldestReceivedMessageId:se.latest_message_id,latestReceivedMessageId:Y,conversationIds:ce.resultConversationIds});case 120:if(!d){pe.next=132;break}if(!y||!H[y]){pe.next=132;break}return ie=P.find((function(e){return e.id===y})),ue=(ie||{}).latest_message_id,pe.next=126,(0,on.select)(NE);case 126:if(le=pe.sent,de=le.length?le[le.length-1].id:"",ue===de){pe.next=132;break}return pe.next=132,Pc().put(Nc().fetchMessagesRequested({payload:{conversationId:null==ie?void 0:ie.id,reset:!0},isLazy:!0}));case 132:return pe.next=134,(0,on.put)(zu(Q));case 134:return pe.next=136,(0,on.spawn)($d,P);case 136:if(!a){pe.next=149;break}if(!l){pe.next=145;break}if("0"===B.nextTimestampNano){pe.next=143;break}return pe.next=141,(0,on.put)(Ku({direction:r,noPending:!0}));case 141:pe.next=143;break;case 143:pe.next=147;break;case 145:return pe.next=147,(0,on.put)(Ku({direction:r,noPending:!0}));case 147:pe.next=152;break;case 149:if(!(Q.conversationIds.length<=20)){pe.next=152;break}return pe.next=152,(0,on.put)(Ku({direction:"older",noPending:!0}));case 152:pe.next=156;break;case 154:return pe.next=156,(0,on.put)(zu({direction:r,status:C.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:O,maxLatestReceivedMessageId:h,oldestTimestampNano:f,latestTimestampNano:_,maxLatestTimestampNano:E,shouldFetchByTimestamp:l,syncFetchException:d?b+1:0}));case 156:pe.next=161;break;case 158:if(g===C.DataFetchStatus.INIT_FAILED){pe.next=161;break}return pe.next=161,(0,on.put)(Xu({status:C.DataFetchStatus.SUCCEED}));case 161:pe.next=172;break;case 163:if(pe.prev=163,pe.t0=pe.catch(37),!(pe.t0 instanceof gt||pe.t0 instanceof it)){pe.next=170;break}return pe.next=168,(0,on.put)(Xu({status:C.DataFetchStatus.TEMPORY_ERROR}));case 168:pe.next=172;break;case 170:return pe.next=172,(0,on.put)(Xu({status:I?C.DataFetchStatus.INIT_FAILED:C.DataFetchStatus.FAILED}));case 172:case"end":return pe.stop()}}),Fd,null,[[37,163]])}function ep(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,on.select)(lu);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,on.call)(zd,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,on.put)(To({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),Hd,null,[[1,18]])}function tp(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerId,c.prev=1,c.next=4,(0,on.call)(hr,{parent:"offer",resource:"count",params:{shop_id:r,buyer_id:n}});case 4:return o=c.sent,a=o.pending_count,c.next=8,(0,on.put)(Rl({shopId:r,buyerId:n,count:a}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,(0,on.put)(Rl({shopId:r,buyerId:n,count:0}));case 14:case"end":return c.stop()}}),Vd,null,[[1,10]])}function rp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Ku,Zd);case 2:return e.next=4,(0,on.takeEvery)(ll,ep);case 4:return e.next=6,(0,on.takeEvery)(yl,tp);case 6:case"end":return e.stop()}}),Bd)}const np=(e(Ud={},Wi.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestMessageRegion,s=r.latestMessageRegion,i=r.oldestReceivedMessageId,u=r.latestReceivedMessageId,l=r.direction,d=void 0===l?"reset":l,p=r.status,f=r.hasMore,_=r.oldestTimestampNano,E=r.latestTimestampNano,S=r.persist,O=r.shouldFetchByTimestamp,h=r.maxLatestReceivedMessageId,v=r.maxLatestTimestampNano,T=r.syncFetchException,m=void 0===T?0:T,g=Qd(Qd({},e),{},{status:p,hasMore:f,persist:S,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===d?a:Qd(Qd({},e.conversationIdsMap),a),direction:"latest"===d?d:"older",maxLatestReceivedMessageId:h,maxLatestTimestampNano:v,syncFetchException:m});switch(d){case"reset":O?(g.latestTimestampNano=E,g.oldestTimestampNano=_):(g.oldestReceivedMessageId=i,g.latestReceivedMessageId=u);break;case"latest":O?g.latestTimestampNano=E>e.latestTimestampNano?E:e.latestTimestampNano:g.latestReceivedMessageId=u;break;case"older":O?g.oldestTimestampNano=_:g.oldestReceivedMessageId=i}return c&&(g.oldestMessageRegion=c),s&&(g.latestMessageRegion=s),g})),e(Ud,Wi.UPDATE_FETCH_CONVERSATIONS_STATUS,Ml),e(Ud,Wi.UPDATE_FETCH_CONVERSATIONS_DIRECTION,Ll),e(Ud,Wi.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return Qd(Qd({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),e(Ud,Wi.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(t,r){var n=r.payload,o=n.shopId,a=n.buyerId,c=n.count,s="".concat(o,"_").concat(a);return Qd(Qd({},t),{},{pendingOffersCount:Qd(Qd({},t.pendingOffersCount),{},e({},s,c))})})),e(Ud,Wi.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e,t){var r=t.payload.records;return Qd(Qd({},e),{},{pendingOffersCount:Qd(Qd({},e.pendingOffersCount),r)})})),Ud),op=e({},Wi.SET_CURRENT_CONVERSATION_CAN_READ,Gl);var ap,cp=At().mark(lp),sp=At().mark(dp);function ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function up(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ip(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ip(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lp(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h;return At().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,on.select)(yu(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,on.select)(yu(r));case 12:if(l=v.sent,d=l.unread_count,u!==o||d){v.next=16;break}return v.abrupt("return");case 16:if(p=n?{last_read_message_id:o}:{},i&&(p.shop_id=i),!n){v.next=21;break}return v.next=21,(0,on.put)(rl({requestId:a}));case 21:return v.next=23,(0,on.call)(hr,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(up({},p))});case 23:if(!n){v.next=41;break}return v.next=26,(0,on.select)((function(e){return e.conversationReducer}));case 26:return f=v.sent,_=f.conversationMark,E="socket"===_[r],v.next=31,(0,on.put)(tl({conversationId:r,markType:E?"":"api"}));case 31:if(E){v.next=41;break}return v.next=34,(0,on.select)(yu(r));case 34:return S=v.sent,O=S.unread_count,h=S.shop_id,v.next=39,(0,on.put)(ho({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,on.put)(Xo({type:Vo.MARK_AS_READ,conversation:{id:r,shop_id:h,unread_count:O}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,on.put)(h_({error:v.t0}));case 47:case"end":return v.stop()}}),cp,null,[[1,43]])}function dp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(el,lp);case 2:case"end":return e.stop()}}),sp)}const pp=(e(ap={},Wi.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return up(up({},t),{},{conversationMark:up(up({},t.conversationMark),{},e({},o,a))})})),e(ap,Wi.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=up({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),ap);var fp,_p=At().mark(Sp),Ep=At().mark(Op);function Sp(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,on.select)(ja);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,on.put)(jv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,on.select)(yu(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,on.call)(hr,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:fp[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,on.put)(h_({error:a.t0}));case 23:case"end":return a.stop()}}),_p,null,[[1,19]])}function Op(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(ul,Sp);case 2:case"end":return e.stop()}}),Ep)}!function(e){e.activated="closed",e.closed="activated"}(fp||(fp={}));var hp=At().mark(Tp),vp=At().mark(mp);function Tp(e){var t,r,n,o,a,c,s,i,u,l,d,p,f;return At().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.conversationId,_.prev=1,_.next=4,(0,on.select)(yu(t));case 4:return r=_.sent,n=r.id,o=r.unread_count,a=r.shop_id,_.next=8,(0,on.select)(tu);case 8:return c=_.sent,_.next=11,(0,on.call)(hr,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=_.sent,i=s.flag,u=s.entry_point,l=s.unread_count,d=s.latest_message_id,n){_.next=19;break}return p=T("conversations",s),f=p.entities,_.next=17,(0,on.put)(Oo({entities:f}));case 17:_.next=21;break;case 19:return _.next=21,(0,on.put)(ho({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:l}}));case 21:if(o||o===s.unread_count){_.next=24;break}return _.next=24,(0,on.put)(Xo({conversation:s,type:Vo.ACTIVE_CONVERSATION}));case 24:if(t!==c){_.next=28;break}if(!(l>0)){_.next=28;break}return _.next=28,(0,on.put)(el({conversationId:t,isRead:!0,latestMessageId:d}));case 28:return _.abrupt("return",s);case 31:return _.prev=31,_.t0=_.catch(1),_.abrupt("return",{});case 34:case"end":return _.stop()}}),hp,null,[[1,31]])}function mp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Wu,Tp);case 2:case"end":return e.stop()}}),vp)}function gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?gp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const yp=e({},Wi.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return bp(bp({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var Rp=At().mark(Pp),Dp=At().mark(wp);function Cp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Cp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ip={restart:ul,delete:Yu,read:el,unread:el,pin:nl,unpin:nl,mute:bl,unmute:bl};function Pp(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=Ip[r],a.next=4,(0,on.put)(o(Ap({},n)));case 4:case"end":return a.stop()}}),Rp)}function wp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(dl,Pp);case 2:case"end":return e.stop()}}),Dp)}function Np(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Up(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Np(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Ip.close=ul;var xp={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},kp=function(e){var t={},r=e.length;return Object.keys(xp).forEach((function(n){t[n]=!r||e.includes(xp[n])})),t};const Mp=e({},Wi.UPDATE_ACCESS,(function(e,t){var r=kp(t.payload.access);return Up(Up({},e),{},{access:r})}));var Lp=["combine","user","orderId","message","agent","agentMessage"];function jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fp=At().mark(Hp);function Hp(){var e,t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,on.select)(eu);case 2:return e=i.sent,i.prev=3,i.next=6,(0,on.call)(hr,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,on.put)(To({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,on.put)(Ol({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,on.call)(Hp);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof ft)){i.next=29;break}return i.next=27,(0,on.put)(Ol({timeNow:"0"}));case 27:return i.next=29,(0,on.call)(Zd,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),Fp,null,[[3,22]])}const Vp=e({},Wi.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return Gp(Gp({},e),{},{updateTimeNow:r})}));var Bp,Yp,Qp=At().mark(qp),Wp=At().mark(Kp);function qp(e){var t,r,n,o,a,c,s;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,on.select)(yu(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,on.select)(ya);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,on.call)(hr,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,on.put)(h_({error:i.t0}));case 21:case"end":return i.stop()}}),Qp,null,[[1,17]])}function Kp(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(bl,qp);case 2:case"end":return e.stop()}}),Wp)}var zp=At().mark(nf),Xp=At().mark(of);function Jp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $p(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Jp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Zp=(0,dr.createActions)((e(Bp={},Wi.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(Bp,Wi.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(Bp,Wi.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),Bp)),ef=Zp.searchConversationsRequested,tf=Zp.searchConversationsSucceeded,rf=Zp.updateSearchParams;function nf(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,on.put)(rf({keyword:n,searchStatus:C.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,on.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,on.select)(au);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push($p($p({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,on.put)(tf({results:r,searchStatus:C.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),zp)}function of(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(ef,nf);case 2:case"end":return e.stop()}}),Xp)}const af=(e(Yp={},Wi.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return $p($p({},e),{},{results:n,searchStatus:o})})),e(Yp,Wi.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return $p($p({},e),{},{keyword:n,searchStatus:o})})),Yp);var cf,sf=y(439).t;function uf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?uf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var df=At().mark(_f),pf=At().mark(Ef);function ff(e,t){return hr({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function _f(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h;return At().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,on.select)(NE);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,on.put)(Sl({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,on.select)(yu(s));case 12:return a=v.sent,v.next=15,(0,on.call)(Rd,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:En.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,on.all)([(0,on.call)(ff,r,n),Pc().call(Nc().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=D(i,2),l=u[0],d=u[1],p=(l||{}).conversation_info,f=void 0===p?[]:p,_=(d||{}).get_messages,0!==(E=void 0===_?[]:_).length&&E.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=f[0])){v.next=39;break}return S=T("conversations",a),O=S.entities,v.next=33,Pc().put(Nc().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,on.put)(Oo({entities:O}));case 35:return v.next=37,(0,on.delay)(300);case 37:return v.next=39,(0,on.call)(Rd,{payload:{conversation:a,messageId:r,messageList:E}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),h=sf("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return h=sf("message.server_error.not_found"),v.abrupt("break",56);case 49:return h=sf("conversation.server_error.deleted"),v.next=52,(0,on.put)(gl({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,on.put)(sl());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,on.call)(y_,h_({toast:{show:!0,type:"fail",message:h}}));case 58:case"end":return v.stop()}}),df,null,[[17,41]])}function Ef(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)(El,_f);case 2:case"end":return e.stop()}}),pf)}const Sf=(e(cf={},Wi.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return lf(lf({},e),{},{inlocation:r})})),e(cf,Wi.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return lf(lf({},e),{},{conversationBeenDeleted:r})})),cf);function Of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Of(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Of(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vf,Tf,mf,gf,bf=[pd,Ad,wl,dp,Op,rp,mp,wp,Kp,of,Ef],yf=(vf={},Lp.forEach((function(e){vf[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),Tf={},Lp.forEach((function(e){Tf[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:kp([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:"",pendingOffersCount:{}}),Rf=(0,dr.handleActions)(hf(hf(hf(hf(hf(hf(hf(hf(hf(hf(hf({},fd),Id),Pd),op),np),yp),pp),Mp),af),Sf),Vp),yf),Df=function(e){return(0,Wn.createSelector)(co,(function(r){return(0,t.denormalize)(e,p,{shops:r})}))},Cf=function(e){return e.shopReducer.fetchedShopIds},Af=(0,Wn.createSelector)(Eu,co,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),If=(0,Wn.createSelector)(Iu,Kn,(function(e,r){return(0,t.denormalize)(e,p,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}(mf||(mf={}));var Pf=(0,dr.createActions)((e(gf={},mf.FETCH_SHOPS_REQUESTED,(function(){return{}})),e(gf,mf.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e(gf,mf.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(gf,mf.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e(gf,mf.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e(gf,mf.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e(gf,mf.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e(gf,mf.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e(gf,mf.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e(gf,mf.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(gf,mf.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),gf)),wf=Pf.fetchShopsRequested,Nf=(Pf.fetchShopsSucceed,Pf.updateFetchShopsStatus,Pf.fetchShopAuthRequested),Uf=Pf.updateFetchedShopIds,xf=Pf.updateShopFilter,kf=Pf.visitShopSellerCenterRequested,Mf=Pf.searchShopsRequested,Lf=(Pf.searchShopsSucceed,Pf.updateSearchShopsStatus,Pf.fetchShopDetailInfo),jf=At().mark(Ff),Gf=At().mark(Hf);function Ff(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,on.select)(Df(t));case 4:return r=a.sent,a.next=7,(0,on.call)(hr,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,on.put)(Oo({entities:o}));case 11:return a.next=13,(0,on.put)(Uf({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),jf,null,[[1,16]])}function Hf(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Lf,Ff);case 2:case"end":return e.stop()}}),Gf)}function Vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Yf=e({},mf.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return Bf(Bf({},e),{},{shopFilter:r})}));var Qf,Wf=At().mark(Kf),qf=At().mark(zf);function Kf(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m,g,b,y,R;return At().wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,D.prev=1,D.next=4,(0,on.call)(hr,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=D.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){D.next=12;break}return l=window.open(),r?((d=r.split("/"))[2]=(0,C.getSellerCenterUrl)(u),p=d.join("/"),l.location=p.includes("?")?"".concat(p,"&cnsc_shop_id=").concat(n):"".concat(p,"?cnsc_shop_id=").concat(n)):l.location=o?"https://".concat((0,C.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,C.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,C.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),D.abrupt("return");case 12:if(!s){D.next=25;break}if(f=s.split("?"),_=f[1].split("&").find((function(e){return e.startsWith("sig=")})),E=_.substring(4),S=f[0].split("."),O=S[S.length-1],h=window.open(),!r){D.next=22;break}return h.location=r.includes("?")?"".concat(r,"&sig=").concat(E):"".concat(r,"?sig=").concat(E),D.abrupt("return");case 22:o||a?o?(v="https://".concat((0,C.getSellerCenterUrl)(O),"/portal/sale/").concat(o,"?sig=").concat(E),h.location=v):a&&(T="https://".concat((0,C.getSellerCenterUrl)(O),"/portal/product/").concat(a,"?sig=").concat(E),h.location=T):(m="https://".concat((0,C.getSellerCenterUrl)(O),"?sig=").concat(E),h.location=m),D.next=28;break;case 25:return g=E_(!1,{type:"permission-denied"}),D.next=28,(0,on.put)(h_({toast:g}));case 28:D.next=38;break;case 30:return D.prev=30,D.t0=D.catch(1),D.next=34,(0,on.select)(Df(n));case 34:b=D.sent,y="https://".concat((0,C.getSellerCenterUrl)(b.country),"/portal/"),R=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(y+R);case 38:case"end":return D.stop()}}),Wf,null,[[1,30]])}function zf(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(kf,Kf);case 2:case"end":return e.stop()}}),qf)}function Xf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jf(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Xf(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $f=At().mark(r_),Zf=At().mark(n_),e_=function(e){return new Promise((function(t){hr({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},t_=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){hr({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function r_(e){var t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,on.call)(hr,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),$f,null,[[1,8]])}function n_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(Nf,r_);case 2:case"end":return e.stop()}}),Zf)}const o_=(e(Qf={},mf.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return Jf(Jf({},e),{},{fetchResult:Jf(Jf({},e.fetchResult),{},{pagination:n,result:o})})})),e(Qf,mf.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return Jf(Jf({},e),{},{searchResult:Jf(Jf({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e(Qf,mf.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Jf(Jf({},e),{},{status:r})})),e(Qf,mf.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Jf(Jf({},e),{},{searchStatus:r})})),e(Qf,mf.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return Jf(Jf({},e),{},{fetchedShopIds:Wt(new Set(n.concat(r)))})})),Qf);function a_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s_,i_,u_={currentPage:0,perPage:20,hasMore:!0},l_=[Hf,n_,zf],d_={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:c_({},u_),result:[]},status:"",searchResult:{pagination:c_({},u_),result:[],keyword:""},searchStatus:""},p_=(0,dr.handleActions)(c_(c_({},Yf),o_),d_),f_=function(e){return e.toastReducer.toast},__=y(439).t,E_=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=__("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=__("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?__("settings.failed_to_enable"):__("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?__("settings.message.save_successfully"):"delete"===t.action?__("settings.message.delete_successfully"):__("settings.message.import_successfully"):"save"===t.action?__("settings.message.failed_to_save"):"delete"===t.action?__("settings.message.failed_to_delete"):__("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?__("settings.failed_to_enable"):__("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?__("forward.exception",{forwardName:""}):__("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=__("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=__("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=__("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=__("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=__(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=__("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=__(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(s_||(s_={}));var S_=(0,dr.createActions)((e(i_={},s_.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(i_,s_.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(i_,s_.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),i_)),O_=S_.copySucceedFeedback,h_=S_.setToastInformation,v_=S_.setToastInformationSucceeded;function T_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g_=At().mark(y_),b_=At().mark(R_);function y_(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,on.select)(ka);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=E_(!1,{type:r})),void 0!==n&&(a=n instanceof ft||n instanceof St?n.handler():E_(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,on.put)(v_({toast:a}));case 11:case"end":return c.stop()}}),g_)}function R_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(h_,y_);case 2:case"end":return e.stop()}}),b_)}const D_=e({},s_.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return m_(m_({},e),{},{toast:r})}));var C_=y(439).t,A_=At().mark(P_),I_=At().mark(w_);function P_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.put)(h_({toast:E_(!0,{message:C_("common.successful_copied")})}));case 2:case"end":return e.stop()}}),A_)}function w_(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(O_,P_);case 2:case"end":return e.stop()}}),I_)}function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var U_=[R_,w_],x_=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?N_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},D_),{toast:{type:"",message:"",show:!1}});function k_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?k_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L_,j_,G_=C.MessageTypes.MSG_TYPE_OFFER,F_=C.MessageTypes.MSG_TYPE_ORDER,H_=C.MessageTypes.MSG_TYPE_PRODUCT,V_=C.MessageTypes.MSG_TYPE_IMAGE,B_=C.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,Y_=C.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,Q_=C.MessageTypes.MSG_TYPE_VIDEO,W_=C.MessageTypes.MSG_TYPE_NOTIFICATION,q_=C.MessageTypes.MSG_TYPE_RATE_CARD,K_=C.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,z_=[F_,H_],X_=function(e){return(e.messageReducer||{}).faqHistoryStatus},J_=function(e){return(e.messageReducer||{}).faqHistoryHash},$_=function(e){return(e.messageReducer||{}).faqId},Z_=(0,Wn.createSelector)(J_,$_,(function(e,t){return e&&t&&e[t]||{all:[]}})),eE=function(e){return(e.messageReducer||{}).status},tE=(0,Wn.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),rE=function(e){return e.messageReducer.offlineMessages},nE=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},oE=function(e){return(0,Wn.createSelector)(nE,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},aE=function(e){return(0,Wn.createSelector)(nE,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},cE=function(e){return(0,Wn.createSelector)($n,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},sE=function(e){return(0,Wn.createSelector)($n,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},iE=(0,Wn.createSelector)(tu,tE,(function(e,t){return t[e]||{all:[]}})),uE=function(e){return(0,Wn.createSelector)(tE,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},lE=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},dE=Yn((function(e){return(0,Wn.createSelector)(uE(e),yu(e),$n,(function(e,t,r){return sd(e,t,r)}))})),pE=(0,Wn.createSelector)(iE,(function(e){var t=Wt(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),fE=(0,Wn.createSelector)(iE,(function(e){return e.sending||[]})),_E=(0,Wn.createSelector)(iE,(function(e){return e.failed||[]})),EE=(0,Wn.createSelector)(iE,(function(e){return e.hasMoreOlderMessage})),SE=(0,Wn.createSelector)(iE,(function(e){return e.hasMoreLatestMessage})),OE=(0,Wn.createSelector)(iE,(function(e){return e.hasNext})),hE=function(e){return e.messageReducer.entryPoint},vE=function(e){return e.messageReducer.toBottomHasConflict},TE=(0,Wn.createSelector)($n,pE,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),mE=function(e){return(0,Wn.createSelector)(uE(e),$n,(function(e,r){return((0,t.denormalize)(e.all,[c],{messages:r})||[]).filter((function(e){return null==e?void 0:e.isFaking}))}))},gE=(0,Wn.createSelector)(TE,(function(e){return e.reverse()})),bE=(0,Wn.createSelector)(gE,Eu,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,C.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),yE=(0,Wn.createSelector)(Eu,gE,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,C.getMessageIsSend)(t,e);return t&&!n&&(0,C.greaterThan)(t.id,r)&&t.type!==W_}))})),RE=(0,Wn.createSelector)(Kn,Z_,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),DE=(0,Wn.createSelector)(RE,gE,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,C.isDeletedMessage)(e)&&[V_,Q_,K_].includes(t)}))})),CE=(0,Wn.createSelector)(DE,Eu,Ou,ga,Cu,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,C.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,C.getMessageIsSend)(e,t);switch(e.type){case V_:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,C.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case Q_:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case K_:var l=e.content;r=l.thumb_url?"".concat((0,C.getFileServer)()).concat(l.thumb_url):l.image_url}var d=e.id,p=e.type,f=e.request_id,_=e.content;return{type:p,id:d,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:d===f?0:d,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:_.duration_seconds}}}))})),AE=(0,Wn.createSelector)(yE,(function(e){return e.length?e.map((function(e){return e.id})):[]})),IE=(0,Wn.createSelector)(Eu,gE,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,a=t.content;if(!n||r===G_||[-1,0].includes(o["".concat(n,"_id")]))return e;if(z_.includes(r)&&o){var c="".concat(r,"_id");if(a[c]===o[c])return e}var s=e.lastSourceMessage,i=e.sourceList;if(!i.length)return{sourceList:i.concat(t),lastSourceMessage:t};if(n===H_){var u=null==o?void 0:o.product_id,l=s.source_content&&s.source_content.product_id;if(!u||l===u)return e}else if(n===F_){var d=null==o?void 0:o.order_id,p=s.source_content&&s.source_content.order_id;if(!d||[-1,0,p].includes(d))return e}return{sourceList:i.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),PE=(0,Wn.createSelector)(IE,(function(e){return e.map((function(e){return e.id}))})),wE=(0,Wn.createSelector)(Kn,TE,(function(e,r){var n=r.filter((function(e){return e&&e.type===G_})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[l],e)})),NE=(0,Wn.createSelector)(gE,PE,fE,_E,Eu,ao,wE,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![B_,Y_].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?C.MessageSendStatus.SENDING:n.includes(e.id)?C.MessageSendStatus.FAILED:e.send_status?C.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,l=u.type,d=u.content,p=void 0===d?{}:d,f=u.message_option;switch(l){case G_:var _=c.find((function(e){return e&&e.id===p.offer_id}));i=Object.assign({},i,{textContent:_});break;case q_:var E=a[p.card_id];E&&(i=Object.assign({},i,{textContent:E}))}return(0,C.hasTargetMessageOption)(f,C.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=M_(M_({},i),{},{send_status:C.MessageSendStatus.FAILED,errorCode:C.MessageErrorCode.BLACKLIST})),i})):[]})),UE=function(e){return(0,Wn.createSelector)(ao,(function(r){return(0,t.denormalize)(e,E,{rateCards:r})}))},xE=(0,Wn.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),kE=(0,Wn.createSelector)(tu,xE,(function(e,t){return t[e]||""})),ME=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},LE=(0,Wn.createSelector)(kE,$n,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),jE=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},GE=function(e){return e.messageReducer.imageUrl},FE=function(e){return e.messageReducer.faqSessions||{}},HE=(0,Wn.createSelector)(tu,FE,(function(e,t){return t[e]||{}})),VE=function(e){return e.messageShortcutGroupReducer},BE=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},YE=(0,Wn.createSelector)(VE,BE,(function(e,t){return e&&e[t]||{groups:[],status:""}})),QE=(0,Wn.createSelector)(YE,(function(e){return e.status})),WE=(0,Wn.createSelector)(YE,(function(e){return e.currentGroupId})),qE=(0,Wn.createSelector)(YE,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),KE=(0,Wn.createSelector)(VE,(function(e){var t=(e&&e[C.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),zE=(0,Wn.createSelector)(VE,(function(e){var t=(e&&e[C.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),XE=(0,Wn.createSelector)(KE,zE,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(Wt(e),Wt(t))})),JE=function(e){return e.settingsReducer.settings},$E=function(e){return e.settingsReducer.needForceUpdate},ZE=function(e){return e.settingsReducer.status},eS=function(e){return e.settingsReducer.fetchStatus},tS=(0,Wn.createSelector)(JE,(function(e){return e.auto_translation_status||""})),rS=(0,Wn.createSelector)(JE,(function(e){return e.show_msg_time||"enabled"})),nS=(0,Wn.createSelector)(JE,(function(e){return e.message_shortcuts_status||""})),oS=(0,Wn.createSelector)(JE,(function(e){return e.legacy_message_shortcuts_count||0})),aS=(0,Wn.createSelector)(JE,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(L_||(L_={}));var cS,sS=(0,dr.createActions)((e(j_={},L_.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(j_,L_.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(j_,L_.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(j_,L_.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(j_,L_.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(j_,L_.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(j_,L_.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),j_)),iS=sS.fetchSettingsRequested,uS=sS.fetchSettingsSucceeded,lS=sS.fetchSettingsStatus;function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}sS.updateSettingStatus,sS.updateSettingsRequestedByType,sS.updateSettingsRequested,sS.updateSettingsSucceeded;var fS=At().mark(ES),_S=At().mark(SS);function ES(){var e;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,on.put)(lS({fetchStatus:C.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,on.call)(hr,{parent:"user",resource:"setting"});case 5:return e=t.sent,t.next=8,(0,on.put)(uS({settings:e,fetchStatus:C.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return t.abrupt("return",e);case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,(0,on.put)(lS({fetchStatus:C.DataFetchStatus.FAILED}));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),fS,null,[[0,11]])}function SS(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeLatest)([iS],ES);case 2:case"end":return e.stop()}}),_S)}const OS=(e(cS={},L_.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return pS(pS({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(cS,L_.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return pS(pS({},e),{},{fetchStatus:r})})),cS);function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var vS,TS,mS=[SS],gS=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?hS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},OS),{settings:{},fetchStatus:""}),bS={currentPage:0,perPage:20,total:0,hasMore:!0},yS=function(e){return e.offerReducer.status},RS=(0,Wn.createSelector)(Kn,(function(e){return e.offers||{}})),DS=function(e,t,r,n){return(0,Wn.createSelector)(RS,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===C.OfferStatus.PENDING}))}))},CS=function(e){return(0,Wn.createSelector)(Kn,(function(r){return(0,t.denormalize)(e,l,r)}))},AS=function(e){return e.offerReducer.fetchResult},IS=function(e,t){return(0,Wn.createSelector)(AS,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:bS,result:[]}}))},PS=(0,Wn.createSelector)(AS,Eu,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:bS})),wS=(0,Wn.createSelector)(AS,Eu,Kn,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[l],n).filter((function(e){return e}))})),NS=(0,dr.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(vS||(vS={}));const US=(e(TS={},vS.REMOVE_SINGLE_DRAFT,Bl),e(TS,vS.REMOVE_ALL_DRAFT,Yl),e(TS,vS.BATCH_REMOVE_DRAFT,Ql),TS),xS=e({},vS.SAVE_DRAFT,Wl);var kS,MS=(0,dr.createActions)((e(kS={},vS.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(kS,vS.REMOVE_ALL_DRAFT,(function(){return{}})),e(kS,vS.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(kS,vS.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),kS)),LS=MS.removeSingleDraft,jS=MS.removeAllDraft,GS=MS.batchRemoveDraft,FS=MS.saveDraft;function HS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function VS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?HS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var BS=(0,dr.handleActions)(VS(VS({},xS),US),{draftHash:{}}),YS=function(e){return e.draftReducer.draftHash},QS=function(e){return(0,Wn.createSelector)(YS,(function(t){return t[e]}))},WS=(0,Wn.createSelector)(tu,YS,(function(e,t){return e&&t[e]}));function qS(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function KS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?KS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var XS,JS=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===C.SocketConnectionStatus.DISCONNECT){var l=c<=5?"s":c<=10?"m":"l";u=zS(zS({},u),{},{reconnectType:l,exceptionReason:i,exceptionType:o})}else u=zS(zS({},u),{},{exceptionType:o});Xr(qr[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT"}(XS||(XS={}));var $S=y(439).t,ZS=["type"];function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rO,nO,oO=At().mark(sO),aO=At().mark(iO),cO=function(e){return OO({feedback:{status:e,network:!0,content:$S("common.toast.".concat(e))}})};function sO(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,on.select)(ya);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,on.select)(ga);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,on.call)(hr,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),oO,null,[[10,16]])}function iO(e,t){return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===C.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,on.put)(Jo({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),aO)}var uO=(0,dr.createActions)(e({},XS.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;rO=At().mark((function e(t){var r;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,on.put)(es({socketSuccess:!0}));case 4:return e.next=6,(0,on.spawn)(sO);case 6:e.next=11;break;case 8:return Xr(qr.SOCKET_FAILED,0,{status:r}),e.next=11,(0,on.put)(es({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),nO=At().mark((function e(t){var r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T,m;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,C.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,l=i.type,o=u,a=l;case 9:e.t0=r,e.next=e.t0===C.SocketConnectionStatus.CONNECT?12:e.t0===C.SocketConnectionStatus.DISCONNECT?38:e.t0===C.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===C.SocketConnectionStatus.RECONNECTING?49:e.t0===C.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,on.select)($O);case 14:if(!e.sent){e.next=19;break}return d=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,on.delay)(d);case 19:return e.next=21,(0,on.put)(hO({feedback:void 0}));case 21:return e.next=23,(0,C.getItem)("mini-session");case 23:if(p=e.sent,f=p&&p.p_token,_=p&&p.user,!f||!_){e.next=33;break}return e.next=29,(0,on.call)(Yt,{token:f,account_id:_.uid});case 29:if(E=e.sent,Vt){e.next=33;break}return e.next=33,(0,on.call)(rO,E);case 33:return e.next=35,(0,on.put)(uO({flag:!1}));case 35:return e.next=37,(0,on.put)(es({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,on.put)(uO({flag:!0}));case 40:return e.next=42,(0,on.put)(cO("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,on.put)(cO("error"));case 45:return Xr(qr.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,on.put)(es({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,on.put)(cO("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,on.put)(cO("resolved"));case 54:return e.abrupt("break",76);case 55:if(O=(S=n).type,h=S.response,"login"!==O){e.next=59;break}return e.next=59,(0,on.call)(rO,h);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,on.call)(Gi,!1);case 62:return e.abrupt("break",76);case 63:return Bt.dispatch(C.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return JS(n,o,a),e.abrupt("break",76);case 67:return Xr(qr.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,on.put)(si({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=qS(v,ZS),e.next=75,(0,on.call)(iO,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const lO=e({},XS.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return tO(tO({},e),{},{reconnectFlag:r})}));var dO;function pO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _O=At().mark(vO),EO=At().mark(TO),SO=(0,dr.createActions)((e(dO={},XS.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(dO,XS.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),dO)),OO=SO.feedbackRequested,hO=SO.feedbackSucceeded;function vO(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,on.put)(hO({feedback:t}));case 3:return r.next=5,(0,on.delay)(2500);case 5:return r.next=7,(0,on.put)(hO({feedback:void 0}));case 7:case"end":return r.stop()}}),_O)}function TO(){var e,t,r;return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,on.actionChannel)(OO);case 2:e=n.sent;case 3:return n.next=6,(0,on.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,on.call)(vO,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),EO)}const mO=e({},XS.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return fO(fO({},e),{},{feedback:r})}));var gO=y(655);function bO(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var yO=y(439).t,RO=At().mark(NO),DO=At().mark(UO);function CO(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return AO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AO(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function AO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?IO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wO=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,l=t.flag,d=t.cardId,p=t.mute;switch(e){case"conversations":r=l?{flag:l}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:1},void 0!==c&&(r={pinned:c}),void 0!==p&&(r={mute:p}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=d}return ho({name:e,id:n,record:r})};function NO(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,m,g,b,y,R,D,A,I,P,w,N,U,x,k,M,L,j,G,F,H,V,B,Y,Q,W,q,K,z,X,J,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,le,de,pe,fe,_e,Ee,Se,Oe,he;return At().wrap((function(ve){for(;;)switch(ve.prev=ve.next){case 0:return t=e.type,r=e.payload,ve.next=3,(0,on.select)(ia);case 3:return n=ve.sent,ve.next=6,(0,on.select)(tu);case 6:if(o=ve.sent,"notification"!==t){ve.next=301;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,l=u.flag,d=u.status,p=u.card_id,f=u.offer_id,_=u.shop_id,E=u.request_id,S=u.conversation_id,O=u.conversation_ids,h=void 0===O?[]:O,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,b=u.expiry_time,y=u.is_auto_update,R={},D={},!S){ve.next=17;break}return ve.next=14,(0,on.select)(yu(S));case 14:R=ve.sent,ve.next=22;break;case 17:if(!f){ve.next=22;break}return ve.next=20,(0,on.select)(RS);case 20:A=ve.sent,D=A[f];case 22:return I=R&&n===s,ve.next=25,(0,on.select)(pu);case 25:P=ve.sent,w="Unread"===P,ve.t0=c,ve.next=ve.t0===id.MARK_AS_READ?30:ve.t0===id.MARK_AS_UNREAD?59:ve.t0===id.DELETE_CONVERSATION?65:ve.t0===id.UPDATE_OFFER_STATUS?84:ve.t0===id.UPDATE_CONVERSATION?98:ve.t0===id.UPDATE_USER_STATUS?126:ve.t0===id.UPDATE_CONVERSATION_FLAG?150:ve.t0===id.FORCE_LOGOUT?154:ve.t0===id.UPDATE_RATING_CARD_STATUS?157:ve.t0===id.PIN_CONVERSATION?160:ve.t0===id.UNPIN_CONVERSATION?163:ve.t0===id.MASS_READ?169:ve.t0===id.MASS_UNREAD?179:ve.t0===id.MASS_PIN?189:ve.t0===id.MASS_UNPIN?195:ve.t0===id.MASS_ACTIVATE?201:ve.t0===id.MASS_CLOSE?230:ve.t0===id.VIDEO_UPLOAD?249:ve.t0===id.MARK_AS_UNREPLIED||ve.t0===id.MARK_AS_REPLIED?258:ve.t0===id.CHAT_DELETE_MSG?266:ve.t0===id.FAQ_SESSION_UPDATE?287:ve.t0===id.MUTE_CONVERSATION?291:ve.t0===id.UNMUTE_CONVERSATION?295:299;break;case 30:if(!I){ve.next=58;break}return ve.next=33,(0,on.select)((function(e){return e.conversationReducer}));case 33:return N=ve.sent,U=N.conversationMark,x="api"===U[S],ve.next=38,(0,on.put)(tl({conversationId:S,markType:x?"":"socket"}));case 38:return ve.next=40,(0,on.select)(Ji);case 40:if(k=ve.sent,M=k.findIndex((function(e){return e===E})),-1===M){ve.next=51;break}return Xr(qr.READ_SOCKET,Date.now()-E),ve.next=46,(0,on.select)($i);case 46:return L=ve.sent,M>0&&(L+=M),k=k.slice(M+1),ve.next=51,(0,on.put)(rl({requestIds:k,count:L}));case 51:if(x){ve.next=58;break}if(!R.unread_count){ve.next=58;break}return ve.next=56,(0,on.put)(wO("conversations",{conversation:R,read:!0}));case 56:return ve.next=58,(0,on.put)(Xo({type:Vo.MARK_AS_READ,conversation:R}));case 58:return ve.abrupt("break",299);case 59:if(w&&(I=R&&n===s),!I){ve.next=64;break}if(0!==R.unread_count){ve.next=64;break}return ve.next=64,(0,on.put)(Xo({type:Vo.MARK_AS_UNREAD,conversation:R}));case 64:return ve.abrupt("break",299);case 65:return ve.next=67,Pc().put(Nc().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 67:return ve.next=69,(0,on.put)(LS({conversationId:S}));case 69:return ve.next=71,(0,on.put)(Qu({conversationId:S}));case 71:return ve.next=73,(0,on.put)(vo({name:"conversations",id:S}));case 73:return ve.next=75,(0,on.select)(Xi);case 75:if(!(ve.sent.length<20)){ve.next=79;break}return ve.next=79,(0,on.put)(Ku({direction:"older"}));case 79:if(!R){ve.next=83;break}return ve.next=83,(0,on.put)(Xo({type:Vo.DELETE_CONVERSATION,conversation:R}));case 83:return ve.abrupt("break",299);case 84:if(!D||!d||d===C.OfferStatus.PENDING){ve.next=97;break}return j=r.conversation_id,ve.next=88,(0,on.select)(yu(j));case 88:return G=ve.sent,ve.next=91,(0,on.put)(wO("offers",{offer:D,status:d}));case 91:return ve.next=93,(0,on.put)(yl({buyerId:D.buyer_id,shopId:D.shop_id}));case 93:if(F=G.latest_message_type,H=G.latest_message_content,F!==C.MessageTypes.MSG_TYPE_OFFER||(null==H?void 0:H.offer_id)!==f||(null==H?void 0:H.status)!==C.OfferStatus.PENDING){ve.next=97;break}return ve.next=97,(0,on.put)(ho({name:"conversations",id:j,record:{latest_message_content:PO(PO({},H),{},{status:d})}}));case 97:return ve.abrupt("break",299);case 98:if(!I){ve.next=125;break}return bO(R),ve.next=103,(0,on.put)(wO("conversations",{conversation:R,status:d}));case 103:if("closed"!==d){ve.next=116;break}return ve.next=106,(0,on.put)(sh({conversationId:S}));case 106:return ve.next=108,(0,on.put)(LS({conversationId:S}));case 108:return ve.next=110,Pc().call(Nc().deleteFakingMessages({payload:{conversationId:S}}));case 110:return ve.next=112,(0,on.put)(Xo({type:Vo.CLOSE_CONVERSATION,conversation:R}));case 112:return ve.next=114,(0,on.put)(wO("conversations",{conversation:R,read:!0}));case 114:ve.next=125;break;case 116:if("activated"!==d){ve.next=125;break}return o===S&&Pc().put(Nc().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),ve.next=121,(0,on.select)(Xi);case 121:if(!ve.sent.includes(S)){ve.next=125;break}return ve.next=125,(0,on.put)(Wu({conversationId:S}));case 125:return ve.abrupt("break",299);case 126:return ve.next=128,(0,on.select)(Ba);case 128:if(V=ve.sent,n!==s){ve.next=147;break}if(!y){ve.next=138;break}if(V){ve.next=136;break}return ve.next=134,(0,on.put)(Lo({type:"CONFIRM_MODAL",title:yO("modal.title.auto_switch_to_hangup"),actions:{confirm:{label:yO("common.close"),handler:function(){It.store.dispatch(jo()),It.store.dispatch(Wc({showAutoHangupModal:!1}))}}},additions:{content:yO("modal.content.auto_switch_to_hangup")}}));case 134:return ve.next=136,(0,on.put)(Wc({showAutoHangupModal:!0}));case 136:ve.next=144;break;case 138:if("working"!==d){ve.next=144;break}if(!V){ve.next=144;break}return ve.next=142,(0,on.put)(jo());case 142:return ve.next=144,(0,on.put)(Wc({showAutoHangupModal:!1}));case 144:if(!v){ve.next=147;break}return ve.next=147,(0,on.put)(Lo({type:"CONFIRM_MODAL",title:yO("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:yO("common.".concat("working"===d?"online":"offline"))}}},actions:{confirm:{label:yO("common.ok")}}}));case 147:return ve.next=149,(0,on.put)(wO("users",{userId:s,status:d}));case 149:return ve.abrupt("break",299);case 150:if(!I){ve.next=153;break}return ve.next=153,(0,on.put)(wO("conversations",{conversation:R,flag:l}));case 153:return ve.abrupt("break",299);case 154:return ve.next=156,(0,on.call)(Fi);case 156:return ve.abrupt("break",299);case 157:return ve.next=159,(0,on.put)(wO("rateCards",{cardId:p,status:d}));case 159:return ve.abrupt("break",299);case 160:return ve.next=162,(0,on.put)(wO("conversations",{conversation:R,pinned:!0}));case 162:return ve.abrupt("break",299);case 163:return ve.next=165,(0,on.put)(wO("conversations",{conversation:R,pinned:!1}));case 165:if(o!==S||"Pinned"!==P){ve.next=168;break}return ve.next=168,(0,on.put)(sl());case 168:return ve.abrupt("break",299);case 169:if(!(B=h.length)){ve.next=178;break}return Y={},h.forEach((function(e){Y[e]={unread_count:0}})),ve.next=175,(0,on.put)(To({name:"conversations",records:Y}));case 175:return Q=Object.assign({},{count:B,type:Vo.MASS_READ},_?{shopId:_}:{}),ve.next=178,(0,on.put)(Xo(Q));case 178:return ve.abrupt("break",299);case 179:if(W=h.length,!h.length){ve.next=188;break}return q={},h.forEach((function(e){q[e]={unread_count:1}})),ve.next=185,(0,on.put)(To({name:"conversations",records:q}));case 185:return K=Object.assign({},{count:W,type:Vo.MASS_UNREAD},_?{shopId:_}:{}),ve.next=188,(0,on.put)(Xo(K));case 188:return ve.abrupt("break",299);case 189:if(!h.length){ve.next=194;break}return z={},h.forEach((function(e){z[e]={pinned:!0}})),ve.next=194,(0,on.put)(To({name:"conversations",records:z}));case 194:return ve.abrupt("break",299);case 195:if(!h.length){ve.next=200;break}return X={},h.forEach((function(e){X[e]={pinned:!1}})),ve.next=200,(0,on.put)(To({name:"conversations",records:X}));case 200:return ve.abrupt("break",299);case 201:return ve.next=203,(0,on.put)(Ku({direction:"latest"}));case 203:if(!h.length){ve.next=229;break}J={},$=CO(h),ve.prev=207,$.s();case 209:if((Z=$.n()).done){ve.next=217;break}if(ee=Z.value,J[ee]={status:"activated"},o!==ee){ve.next=215;break}return ve.next=215,Pc().put(Nc().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 215:ve.next=209;break;case 217:ve.next=222;break;case 219:ve.prev=219,ve.t1=ve.catch(207),$.e(ve.t1);case 222:return ve.prev=222,$.f(),ve.finish(222);case 225:return ve.next=227,(0,on.put)(To({name:"conversations",records:J}));case 227:return ve.next=229,(0,on.call)(handleNotifyBatchConversation);case 229:return ve.abrupt("break",299);case 230:if(!h.length){ve.next=248;break}return te={},re=[],ve.next=236,(0,on.select)(Du(h));case 236:return ne=ve.sent,oe=ne.filter((function(e){return(null==e?void 0:e.unread_count)>0})),h.forEach((function(e){te[e]={status:"closed",unread_count:0},re.push((0,on.put)(sh({conversationId:e}))),Pc().call(Nc().deleteFakingMessages({payload:{conversationId:e}}))})),ve.next=241,(0,on.all)(re);case 241:return ve.next=243,(0,on.put)(To({name:"conversations",records:te}));case 243:return ae=Object.assign({},{count:oe.length,type:Vo.MASS_CLOSE},_?{shopId:_}:{}),ve.next=246,(0,on.put)(Xo(ae));case 246:return ve.next=248,(0,on.put)(GS({conversationIds:h}));case 248:return ve.abrupt("break",299);case 249:return ce=r.content,ve.next=252,(0,on.select)(aE(ce.vid));case 252:return se=ve.sent,ve.next=255,(0,on.select)(oE(se));case 255:return ve.sent.status||(ie=ce.status,ue=ce.vid,"successful"===ie&&(le=performance.getEntriesByName("REPORT_UPLOAD_".concat(ue),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(ue)),de=performance.getEntriesByName("SERVICE_DONE_".concat(ue))[0].startTime-le.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(ue)),performance.clearMarks("SERVICE_DONE_".concat(ue)),Xr(qr.SERVICE_DONE,de)),Pc().put(Nc().updateVideoInfo({payload:{id:se,info:{status:ie,uploadResult:ce}}}))),ve.abrupt("break",299);case 258:if("Unreplied"!==P){ve.next=265;break}return ve.next=261,(0,on.select)(Xi);case 261:if(!ve.sent.includes(S)){ve.next=265;break}return ve.next=265,(0,on.put)(ho({name:"conversations",id:S,record:{unreplied:c===id.MARK_AS_UNREPLIED}}));case 265:return ve.abrupt("break",299);case 266:return ve.next=268,(0,on.select)(cE(m));case 268:if(!(pe=ve.sent)){ve.next=281;break}return fe=pe.message_option|C.MessageOption.MSG_OPT_DELETE,_e=T("messages",PO(PO({},pe),{},{message_option:fe})),Ee=_e.entities,ve.next=274,(0,on.put)(Oo({entities:Ee}));case 274:if(![C.MessageTypes.MSG_TYPE_VIDEO,C.MessageTypes.MSG_TYPE_IMAGE,C.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(pe.type)){ve.next=281;break}return ve.next=277,(0,on.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 277:if(ve.sent!==m){ve.next=281;break}return ve.next=281,(0,on.put)(Sh());case 281:if(!R||R.latest_message_id!==m){ve.next=286;break}return Se=R.last_message_option|C.MessageOption.MSG_OPT_DELETE,Oe=T("conversations",PO(PO({},R),{},{last_message_option:Se,latest_message_content:{text:""},latest_message_from_id:i})),he=Oe.entities,ve.next=286,(0,on.put)(Oo({entities:he}));case 286:return ve.abrupt("break",299);case 287:if(!I){ve.next=290;break}return ve.next=290,Pc().put(Nc().fetchFaqSessionSucceed({payload:{faqSessionId:g,sessionExpiryTime:b,conversationId:S}}));case 290:return ve.abrupt("break",299);case 291:if(!I){ve.next=294;break}return ve.next=294,(0,on.put)(wO("conversations",{conversation:R,mute:!0}));case 294:return ve.abrupt("break",299);case 295:if(!I){ve.next=298;break}return ve.next=298,(0,on.put)(wO("conversations",{conversation:R,mute:!1}));case 298:return ve.abrupt("break",299);case 299:ve.next=304;break;case 301:if("message"!==t){ve.next=304;break}return ve.next=304,(0,on.call)(zl,{payload:r,type:C.ConversationTypeEnum.Normal});case 304:case"end":return ve.stop()}}),RO,null,[[207,219,222,225]])}function UO(e){return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,on.call)(NO,e);case 2:case"end":return t.stop()}}),DO)}function xO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?xO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var MO=At().mark(HO),LO=At().mark(VO),jO=(0,dr.createActions)(e({},XS.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),GO=jO.updateNoticesCount,FO=function(){return(0,gO.eventChannel)((function(e){return Vt?Bt.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(C.SocketConnectionStatus).forEach((function(t){Bt.on(t,(function(){return e({event:t})}))})),Bt.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function HO(e){var t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,on.call)(nO,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,on.put)(GO());case 9:return o.next=11,(0,on.call)(UO,{type:r,payload:n});case 11:case"end":return o.stop()}}),MO)}function VO(){var e;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,on.call)(FO);case 2:return e=t.sent,t.next=5,(0,on.takeEvery)(e,HO);case 5:case"end":return t.stop()}}),LO)}const BO=e({},XS.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return kO(kO({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));var YO=At().mark(QO);function QO(){var e,t,r,n;return At().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e="mini-session";case 1:return o.next=4,(0,on.delay)(6e4);case 4:return o.next=6,(0,C.getItem)(e);case 6:return t=o.sent,o.next=9,(0,on.select)(ZO);case 9:return r=o.sent,o.next=12,(0,on.select)($i);case 12:if(n=o.sent,!t||!t.token){o.next=19;break}return Qt({noticesCount:r,readMissedCount:n}),o.next=17,(0,on.put)(rl({count:0}));case 17:return o.next=19,(0,on.put)(GO({type:"reset"}));case 19:o.next=1;break;case 21:case"end":return o.stop()}}),YO)}function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?WO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var KO,zO=[TO,QO,VO],XO=(0,dr.handleActions)(qO(qO(qO({},lO),mO),BO),{reconnectFlag:!1,feedback:null,noticesCount:0}),JO=function(e){return e.socketReducer.feedback},$O=function(e){return e.socketReducer.reconnectFlag},ZO=function(e){return e.socketReducer.noticesCount};function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var th,rh=function(e){return e.mediaPreviewerReducer.mediaMap},nh=(0,Wn.createSelector)(tu,rh,(function(e,t){return t[e]||[]})),oh=(0,dr.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),ah=oh.addMediaFile,ch=oh.deleteMediaFile,sh=oh.clearMediaFile,ih=(e(KO={},ah,$l),e(KO,ch,Zl),e(KO,sh,ed),KO),uh=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ih),{mediaMap:{}});function lh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var dh,ph=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},fh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},_h=(0,dr.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),Eh=_h.showMediaPreviewModalRequested,Sh=_h.closeMediaPreviewModalRequested,Oh=(e(th={},Eh,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(th,Sh,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),th),hh=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Oh),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),vh=function(e){return e.translatePreferenceReducer.translationSettings},Th=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},mh=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(dh||(dh={}));var gh,bh,yh=y(439).t;function Rh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Rh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ch=At().mark(Mh),Ah=At().mark(Lh),Ih=At().mark(jh),Ph=(0,dr.createActions)((e(gh={},dh.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(gh,dh.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(gh,dh.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(gh,dh.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(gh,dh.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),gh)),wh=Ph.fetchShopTranslationSettings,Nh=Ph.updateShopTranslationSettings,Uh=Ph.updateFetchStatus,xh=Ph.updateSettingPreferenceStatus,kh=Ph.updateShopTranslationSettingsRecord;function Mh(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,on.put)(Uh({status:"loading"}));case 4:return s.next=6,(0,on.call)(hr,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,on.put)(Uh({status:"succeed"}));case 13:return s.next=15,(0,on.put)(kh({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,on.put)(Uh({status:"failed"}));case 21:case"end":return s.stop()}}),Ch,null,[[1,17]])}function Lh(e){var t,r,n,o;return At().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,on.put)(jv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,on.put)(xh({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,on.call)(hr,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,on.put)(kh({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,on.call)(y_,h_({toast:{show:!0,type:"success",message:yh("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,on.put)(xh({status:"failed"}));case 19:return a.next=21,(0,on.call)(y_,h_({toast:{show:!0,type:"fail",message:yh("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),Ah,null,[[1,15]])}function jh(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(wh,Mh);case 2:return e.next=4,(0,on.takeEvery)(Nh,Lh);case 4:case"end":return e.stop()}}),Ih)}var Gh=(0,dr.handleActions)((e(bh={},dh.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=Dh({},e.translationSettings),u=i[n]||{};return i[n]=Dh(Dh({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),Dh(Dh({},e),{},{translationSettings:i})})),e(bh,dh.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return Dh(Dh({},e),{},{fetchSettingsStatus:r})})),e(bh,dh.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return Dh(Dh({},e),{},{updateStatus:r})})),bh),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),Fh=[jh];function Hh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Hh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Bh=At().mark(Jh),Yh=At().mark($h),Qh=At().mark(Zh),Wh=At().mark(ev),qh=At().mark(tv),Kh=At().mark(rv),zh=At().mark(nv),Xh=At().mark(ov);function Jh(e){var t,r,n,o,a,c;return At().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,on.call)(hr,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:Bn});case 3:return o=s.sent,o=ce(o),a=T("products",o),c=a.entities,s.next=8,(0,on.put)(Oo({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),Bh)}function $h(e){var t,r,n,o,a,c,s,i,u,l;return At().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,d.next=3,(0,on.select)(hu);case 3:return a=d.sent,d.next=6,(0,on.call)(hr,{resource:"order",id:r,params:{shop_id:n}});case 6:return c=d.sent,d.next=9,(0,on.select)(ja);case 9:return s=d.sent,i=Qe(c,n,a,!s||o),u=T("orders",i),l=u.entities,d.next=15,(0,on.put)(Oo({entities:l}));case 15:return d.abrupt("return",i);case 16:case"end":return d.stop()}}),Yh)}function Zh(e,t,r,n,o){var a,c,s,i,u,l;return At().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(a=Array.isArray(e),c=a?e:[e],s=Array.from(new Set(c.map((function(e){return e.product_id})))),i=[],!a){d.next=19;break}return d.prev=5,d.next=8,(0,on.call)(showProducts,{payload:{productIds:s,shopId:t}});case 8:i=d.sent,d.next=17;break;case 11:return d.prev=11,d.t0=d.catch(5),u=s.map((function(e){return(0,on.call)(Jh,{payload:{id:e,shopId:t}})})),d.next=16,(0,on.all)(u);case 16:i=d.sent;case 17:d.next=23;break;case 19:return d.next=21,(0,on.call)(Jh,{payload:{id:e.product_id,shopId:t}});case 21:l=d.sent,i=[l];case 23:return d.abrupt("return",c.map((function(e){var t=i.find((function(t){return t.id===e.product_id}))||{};return Se(e,"list",r,n,t,o)})));case 24:case"end":return d.stop()}}),Qh,null,[[5,11]])}function ev(e){var t,r,n,o,a,c,s,i,u,l,d;return At().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,p.next=3,(0,on.select)(CS(r));case 3:return o=p.sent,p.next=6,(0,on.select)(hu);case 6:return a=p.sent,p.next=9,(0,on.select)(Ra);case 9:return c=p.sent,p.next=12,(0,on.select)(ba);case 12:if(s=p.sent,!o||o.status===C.OfferStatus.PENDING){p.next=15;break}return p.abrupt("return",o);case 15:return p.next=17,(0,on.call)(hr,{resource:"offers",id:r,params:{shop_id:n}});case 17:return i=p.sent,p.next=20,(0,on.call)(Zh,i,n,a,c,s);case 20:return u=p.sent,l=T("offers",u),d=l.entities,p.next=24,(0,on.put)(Oo({entities:d}));case 24:return p.abrupt("return",u[0]);case 25:case"end":return p.stop()}}),Wh)}function tv(e){var t,r,n,o,a,c,s,i,u;return At().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.shopId,r=e.id,l.next=3,(0,on.select)(ia);case 3:return n=l.sent,l.next=6,(0,on.select)(ya);case 6:return o=l.sent,a="vouchers_by_ids",l.next=10,(0,on.call)(hr,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=l.sent,!(s=c[a])||!s.length){l.next=18;break}return s=s.map((function(e){return Re(e,!1)})),i=T("vouchers",s),u=i.entities,l.next=17,(0,on.put)(Oo({entities:u}));case 17:return l.abrupt("return",s[0]);case 18:case"end":return l.stop()}}),qh)}function rv(e){var t,r,n,o,a,c,s,i,u;return At().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,l.next=3,(0,on.select)(Eu);case 3:return o=l.sent,a=o.shop_id,l.next=7,(0,on.call)(hr,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=l.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,l.next=12,(0,on.put)(Oo({entities:u}));case 12:return l.abrupt("return",s);case 13:case"end":return l.stop()}}),Kh)}function nv(e){var t,r,n,o,a;return At().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,on.call)(hr,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(_e));case 7:case"end":return c.stop()}}),zh)}function ov(e){var t,r,n,o,a,c,s,i;return At().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.ids,n=t.id,u.next=3,(0,on.select)(Eu);case 3:return o=u.sent,a=o.shop_id,c=o.id,u.next=7,(0,on.call)(hr,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return s=u.sent,i=s.messages,u.next=11,(0,on.call)(Jd,{list:Wt(i),conversationId:c,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var r=i.findIndex((function(t){return t.id===e}));if(r>=0){var n=i[r];i.splice(r,1,Vh(Vh({},n),{},{content:Vh(Vh({},n.content),t[e])}))}}))}});case 11:return u.abrupt("return",{id:n,messages:i});case 12:case"end":return u.stop()}}),Xh)}var av=At().mark(iv);function cv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?cv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iv(e,t,r){var n,o,a,c,s=arguments;return At().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=sv(sv({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,on.put)(ho({name:r,id:t,record:sv({},e)})))):c.push(e)})),c.length&&a.push((0,on.put)(Oo({entities:T(r,c).entities}))),i.next=9,(0,on.all)(a);case 9:case"end":return i.stop()}}),av)}var uv,lv,dv=function(e){return e.voucherReducer.status},pv=(0,Wn.createSelector)(ro,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[h],{vouchers:e})||[]).filter((function(e){return e}))})),fv=function(e){return(0,Wn.createSelector)(ro,(function(r){return(0,t.denormalize)(e,h,{vouchers:r})}))},_v={currentPage:0,perPage:20,total:0,hasMore:!0},Ev=function(e){return(0,Wn.createSelector)(eo,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},Sv=function(e){return(e.orderReducer||{}).cancelReasons},Ov=function(e){return e.orderReducer.status},hv=function(e){return e.orderReducer.fetchResult},vv=function(e,t){return(0,Wn.createSelector)(hv,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:_v,result:[]}}))},Tv=(0,Wn.createSelectorCreator)(Wn.defaultMemoize,(function(e,t){return e.id===t.id}))(Eu,(function(e){return e})),mv=(0,Wn.createSelector)(hv,Tv,eo,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),gv=function(e){return(0,Wn.createSelector)(to,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},bv=function(e){return(0,Wn.createSelector)(to,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},yv={currentPage:0,perPage:20,total:0,hasMore:!0},Rv=function(e){return e.productReducer.fetchResult},Dv=function(e){return e.productReducer.allProductsSearchStatus},Cv=function(e){return e.productReducer.sellerRecommendProducts},Av=function(e){return e.productReducer.systemRecommendProducts},Iv=function(e){return e.productReducer.groups},Pv=function(e){return e.productReducer.systemRecommendProductsFetchStatus},wv=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},Nv=function(e){return e.productReducer.fetchGroupsStatus},Uv=function(e){return(0,Wn.createSelector)(Rv,(function(t){return t[e]||{pagination:yv,result:[]}}))},xv=(0,Wn.createSelector)(Rv,Cu,to,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),kv=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(uv||(uv={}));var Mv,Lv=(0,dr.createActions)((e(lv={},uv.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(lv,uv.CLEAR_REPORT_REQUESTED,(function(){return{}})),lv)),jv=Lv.reportRequested,Gv=Lv.clearReportRequested,Fv=At().mark(Yv),Hv=At().mark(Qv);function Vv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yv(){var e,t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,on.select)(kv);case 2:if(!(e=r.sent).length){r.next=10;break}return t=Wt(e),r.next=7,(0,on.put)(Gv());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,on.call)(hr,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify(Bv(Bv({},t[0]),{},{platform_id:(0,C.isVisitingCNSC)()||(0,C.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),Fv)}function Qv(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,on.delay)(6e4);case 3:return e.next=5,Yv();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),Hv)}const Wv=(e(Mv={},uv.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(Wt(e.beingReported),[{event_time:n,url:o}])}})),e(Mv,uv.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Mv);function qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Kv=[Qv],zv=(0,dr.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Wv),{beingReported:[]}),Xv=At().mark(oT);function Jv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $v(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Jv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Zv,eT=48e4,tT=6e4,rT=!1,nT="9223372036854775807";function oT(){var e,t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S;return At().wrap((function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=3,(0,on.delay)(tT);case 3:return e=void 0,e="mini-session",O.next=7,(0,C.getItem)(e);case 7:if(!(t=O.sent)||!t.token){O.next=58;break}return O.prev=9,O.next=12,(0,on.select)((function(e){return e.conversationReducer}));case 12:return r=O.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,O.next=17,(0,on.select)(ya);case 17:return a=O.sent,O.next=20,(0,on.select)(pu);case 20:return c=O.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||nT:u.last_message_id=n||nT,u.last_unread_count_sync=rT,O.next=28,(0,on.spawn)(hr,{method:"POST",resource:"user",suffix:"sync",params:$v({},u)});case 28:return l=O.sent,O.next=31,(0,on.join)(l);case 31:if(d=O.sent,p=d.have_new_msg,f=d.unread_count,_=d.current_version,rT=!1,!p){O.next=44;break}return O.next=39,(0,on.select)((function(e){return e.conversationReducer}));case 39:if(!(O.sent.syncFetchException<3)||i){O.next=44;break}return O.next=44,(0,on.put)(Ku({direction:"latest",source:C.ConversationSource.SYNC}));case 44:if(!(f>-1)){O.next=53;break}return O.next=47,(0,on.select)(Ho);case 47:if((E=O.sent)===f){O.next=52;break}return O.next=51,(0,on.put)(Jo({count:f}));case 51:rT=!0;case 52:a||(tT=E!==f||p?6e4:tT>=eT?eT:2*tT);case 53:_&&_!==t.version&&(S=Object.assign({},t,{version:_}),(0,C.setItem)(e,S)),O.next=58;break;case 56:O.prev=56,O.t0=O.catch(9);case 58:O.next=0;break;case 60:case"end":return O.stop()}}),Xv,null,[[9,56]])}function aT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?aT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED"}(Zv||(Zv={}));var sT=At().mark(pT),iT=At().mark(fT),uT=At().mark(_T),lT=(0,dr.createActions)(e({},Zv.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}}))),dT=lT.redirectConversationRequested;function pT(e){var t;return At().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,on.put)(Oo({entities:t.entities}));case 3:case"end":return r.stop()}}),sT)}function fT(e){var t,r,n,o,a,c,s,i,u,l,d,p,f,_,E,S,O,h,v,T;return At().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.isFromSearch,c=void 0!==a&&a,s=t.productId,i=t.message,u=t.entryPointType,m.next=3,(0,on.select)(Xi);case 3:return l=m.sent,m.next=6,(0,on.call)(hr,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(d=m.sent,p=d.id,f=d.faking,_=d.mask,E=d.to_name,O=cT(cT({userId:r,shopId:n},S={orderId:o,productId:s}),{},{conversationId:d.id}),h=l.length,v=f||!l.includes(p),u&&Pc().put(Nc().setEntryPoint({payload:{type:u,conversationId:p}})),!v){m.next=21;break}return m.next=16,(0,on.call)(pT,d);case 16:if(!h){m.next=19;break}return m.next=19,(0,on.put)(qu({conversationId:p}));case 19:m.next=23;break;case 21:return m.next=23,(0,on.put)(ho({name:"conversations",id:p,record:{to_name:E,mask:_}}));case 23:if(!i){m.next=26;break}return m.next=26,(0,on.put)(FS({draft:i,conversationId:p}));case 26:return m.next=28,(0,on.call)(C.setItem,"mini-sc_redirect",O);case 28:return m.next=30,(0,on.select)(tu);case 30:if(m.sent===p&&!v){m.next=36;break}return m.next=34,(0,on.put)(Cl({conversationId:d.id}));case 34:return m.next=36,(0,on.put)(cl({conversation:d,sourceInfo:S}));case 36:return m.next=38,(0,on.select)(Ma);case 38:if(m.sent){m.next=44;break}return T="",o?T=C.ChatbotFromType.OrderPage:s?T=C.ChatbotFromType.ProductPage:n&&(T=C.ChatbotFromType.ShopPage),m.next=44,(0,on.call)(cs,{payload:{shouldShowWindow:!0,from:T}});case 44:if(h){m.next=47;break}return m.next=47,(0,on.put)(qu({conversationId:p}));case 47:return m.next=49,(0,on.put)(zc({shouldShowConversationDetail:!0}));case 49:!c&&Pc().put(Nc().sendMessagesRequested({payload:{conversationId:d.id,messages:[{type:"text",content:{text:""},isFaking:!0}],more:{isFakingSource:!0}}}));case 50:case"end":return m.stop()}}),iT)}function _T(){return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,on.takeEvery)(dT,fT);case 2:case"end":return e.stop()}}),uT)}var ET=[oT,_T],ST=At().mark(OT);function OT(e,t,r){return At().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,on.takeEvery)(e,At().mark((function e(n){var o;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,on.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,on.race)({task:(0,on.call)(t,n),cancel:(0,on.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),ST)}})(),R})(),e.exports=n(r(82677),r(26842),r(58518),r(28366),r(36808),r(6222),r(94301),r(68214),r(52153),r(53053),r(59065),r(67677),r(58397),r(98282),r(34857),r(47190),r(97869),r(20573),r(847),r(17311),r(67429),r(46811))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>C,Ey:()=>A,Fy:()=>V,Ht:()=>R,I7:()=>k,I9:()=>X,IE:()=>Q,Jy:()=>N,L6:()=>q,Ll:()=>x,Od:()=>M,S1:()=>i,S8:()=>y,Vm:()=>D,X7:()=>W,Y8:()=>O,YH:()=>j,dV:()=>U,jz:()=>J,k2:()=>G,nr:()=>m,qk:()=>b,r:()=>Y,u7:()=>P,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],l=["id","th"],d=["us"],p=function(e){return u.includes(e)?"com.".concat(e):l.includes(e)?"co.".concat(e):d.includes(e)?"com":e},f=function(e){return"tw"===e?"xiapi":e.toLowerCase()},_=function(e){return p(e)},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},O=function(){return"kr"===n};function h(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||h()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(f(r),".").concat(E(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return h()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(_(a))},b=function(e){return g("seller",e)},y=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},D=function(){return"".concat(b(),"/webchat/api")},C=function(){return"".concat(b(),"/api")},A=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},P=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(f(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(E(),".").concat(_(t))},w=["sg","my","th","ph","vn","id","tw","br"],N=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(O())return"https://cf.shopee.sg/file/";var r=w.includes(t);return h()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(p(t),"/file/")},U=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(p(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},k=function(){return"https://subaccount.".concat(E(),".com/")},M=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||O()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(h()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(p(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(p(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(p(e)):"https://help.shopee.".concat(p(e)),"".concat(t,"/portal/webform/").concat(B[e])},Q=function(){return o},W=function(){return n},q=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(P(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(P(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},X=function(e,t,r,n){window.open("https://".concat(e?P(t):P(),"/product/").concat(n,"/").concat(r,"/"))},J=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new A(n||[]);return a._invoke=function(e,t,r){var n=d;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return P()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=l(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function l(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function O(){}function h(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=h.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=l(e[o],e,a);if("throw"!==i.type){var u=i.arg,d=u.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=l(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:P}}function P(){return{value:t,done:!0}}return O.prototype=g.constructor=h,h.constructor=O,O.displayName=i(h,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>Ce,AVAILABLE_VIDEO_EXT:()=>Ie,AVAILABLE_VIDEO_TYPE:()=>Ae,AccountType:()=>fe,AgentOnlineStatus:()=>R,AlertType:()=>je,AllProductFilters:()=>ce,ApiMessageTypes:()=>Xn,BATCH_OPERATE_MAX_SELECTION:()=>W,BatchOperates:()=>q,CHAT_MIN_TEXT_BOX_HEIGHT:()=>S,ChatBotInteractionType:()=>Me,ChatBotMessageContentSource:()=>Le,ChatbotFromType:()=>X,ConversationFilter:()=>K,ConversationSource:()=>Z,ConversationTab:()=>z,ConversationTypeEnum:()=>M,Currencies:()=>r,CustomShareEvent:()=>qe,DataFetchStatus:()=>A,DiscountType:()=>L,EvaluationErrorCode:()=>u,EvaluationStatus:()=>i,FeedbackInfo:()=>E,FetchMessageStatus:()=>v,HALF_HOUR:()=>Ho,INVALID_PRICE:()=>Tt,LS:()=>Tr,LogisticsLog:()=>be,LogisticsStatus:()=>ye,MAX_IMAGE_SIZE:()=>we,MAX_MEDIA_NUM:()=>p,MAX_SHOWING_ITEM_COUNT:()=>ie,MAX_VIDEO_SIZE:()=>Ne,MAX_Z_INDEX:()=>ze,MINI_MIN_TEXT_BOX_HEIGHT:()=>O,MessageErrorCode:()=>a,MessageFillStatus:()=>h,MessageOption:()=>e,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>f,MessageSource:()=>ee,MessageStatus:()=>d,MessageTypes:()=>n,MessagesRelatedKey:()=>T,NO_ACCESS_KEY:()=>Ue,ONE_DAY:()=>Vo,OfferStatus:()=>U,OperationStatus:()=>I,OrderCancelReason:()=>ve,OrderItemStatus:()=>Se,OrderListTabs:()=>re,OrderListType:()=>me,OrderPayMethod:()=>Oe,OrderStatusExt:()=>Te,OrderTabStatus:()=>_e,OrderTabStatusIndex:()=>Ee,OrderType:()=>ge,PERMISSION_DELETE_MESSAGE:()=>_,PredictionType:()=>J,ProductFiltersMap:()=>ae,ProductPromotionLabel:()=>ue,ProductStatusUsingNumber:()=>ne,ProductStatusUsingString:()=>oe,PromotionStatus:()=>l,ReportType:()=>$,RewardType:()=>j,SECOND_TO_MILLISECOND:()=>Fo,SERVER_ERROR_CAPACITY:()=>De,SERVER_ERROR_VALID_CONV_COUNT:()=>Re,SPECIAL_VIDEO_MIME_TYPE:()=>Pe,SearchFilter:()=>Ye,SearchResultType:()=>Qe,SellerCancelOrderReason:()=>he,ShareDataType:()=>Ke,SocketConnectionStatus:()=>Q,SocketToAlertType:()=>Ge,StorageKey:()=>We,SubAccountRole:()=>pe,SubAccountShopStatus:()=>de,SwitchStatus:()=>w,SystemProductFilters:()=>se,TrackerOperation:()=>ke,TranslationFeedbackQuality:()=>t,TranslationStatus:()=>N,UnreadSource:()=>te,UserLoginStatus:()=>P,VIEW_DETAIL_KEY:()=>xe,VoucherOperateType:()=>Y,VoucherStamp:()=>V,VoucherStatus:()=>H,VoucherTab:()=>G,VoucherTabIndex:()=>F,VoucherType:()=>B,WorkstationCommonKey:()=>Fe,WorkstationProductCommonKey:()=>He,WorkstationProductPanel:()=>le,WorkstationVoucherCommonKey:()=>Ve,camelCase:()=>lt,cancelOrderPolicy:()=>Yn.An,capitalizeFirstLetter:()=>Xt,changeLanguage:()=>ca.D,checkEmptyObject:()=>Je,checkEntryGuide:()=>Or,checkHeaderGuide:()=>Sr,checkImportTemplateGuide:()=>ur,checkIsScChat:()=>tt,checkMassToolGuide:()=>pr,checkObjectId:()=>$e,checkProductDeleted:()=>Mo,checkProductInvalid:()=>Go,checkRegionFilterGuide:()=>Er,checkReplyGuide:()=>_r,checkSearchGuilde:()=>fr,checkTranslationGuilde:()=>lr,checkTranslationSettingsGuide:()=>dr,convertBase64ToBlob:()=>dt,countingDown:()=>Yo,customizeTime:()=>Pt,debounce:()=>nr,deepMerge:()=>pt,downloadVideoWithBlob:()=>Bn,encode:()=>ct,escapeRegex:()=>uo,fillMessagePreview:()=>Rn,fillWithZero:()=>Qo,formatDiscount:()=>zo,formatMessageTime:()=>xt,formatPrice:()=>mt,formatTransifyKeyWithNumber:()=>Bt,getApiServer:()=>Yn.Vm,getBrowserInfo:()=>Qt,getCDNUrl:()=>Yn.jz,getCNSCSellerCenterUrl:()=>Yn.S8,getCSChatServer:()=>Yn.wK,getCancelOrderDisplayStatus:()=>Uo,getChatBotParams:()=>gn,getCrmPreviewParams:()=>bn,getCurrentTimestampString:()=>Wo,getCustomMessageText:()=>un,getFileServer:()=>Yn.Jy,getFormattedData:()=>Fn,getFormattedTime:()=>Nt,getHasSameSourceAndTarget:()=>Tn,getIsMessageShortcutKeywordValid:()=>co,getIsMessageValidToDelete:()=>Zn,getItem:()=>mr,getKRSCSellerCenterUrl:()=>Yn.Ht,getLocaleText:()=>vn,getMallOrderUrl:()=>Yn.Db,getMallUrl:()=>Yn.u7,getMediaData:()=>Mn,getMessageIsRatecard:()=>hn,getMessageIsSend:()=>eo,getMessageShortcutsKeywords:()=>so,getOrderPayment:()=>fo,getOrderStatusTransifyKey:()=>po,getPayMethod:()=>No,getProductStatusTransifyKey:()=>ko,getPushServer:()=>Yn.Ey,getReplyTrackerMessageType:()=>Jn,getRuntimeLocale:()=>Yn.CE,getRuntimeRegion:()=>Yn.X7,getRuntimeServer:()=>Yn.IE,getRuntimeVersion:()=>Yn.L6,getSCApiServer:()=>Yn.E3,getSellerCenterUrl:()=>Yn.qk,getServiceLocale:()=>tr,getShopeeCNUrl:()=>Yn.nr,getShopeeCustomerService:()=>Yn.Fy,getSpammerPolicyUrl:()=>Yn.r,getSystemMessageByLocale:()=>yn,getTimestampNano:()=>qo,getTranslateFileServer:()=>Yn.k2,getTranslationLocale:()=>Zt,getUrlParam:()=>Yt,getVideoServer:()=>Yn.dV,getVoucherCondition:()=>ea,getVoucherTimeText:()=>ta,getWebChatPureUrl:()=>Yn.YH,getWebChatUrl:()=>Yn.xC,goToPcMall:()=>Yn.I9,greaterThan:()=>et,handleBigNumber:()=>ft,handleDisplayTranslation:()=>Xo,handleReportItem:()=>aa,handleReportItems:()=>oa,hasSelectShop:()=>nt,hasTargetMessageOption:()=>En,hasTargetMessageOptions:()=>On,init:()=>Yn.S1,isAbnormalProduct:()=>Lo,isDeletedMessage:()=>Sn,isProductSoldout:()=>jo,isValidBrowser:()=>rt,isValidMessageStatusToReply:()=>zn,isValidMessageTypeToReply:()=>Wn,isVisitingCNSC:()=>Yn.z$,isVisitingKRSC:()=>Yn.Y8,itemSize:()=>Be,makeSecurityTipsMessage:()=>mn,memFn:()=>ar,needWarnNotificationType:()=>m,persistLimit:()=>yr,previewMessage:()=>_n,redirectionWithAccess:()=>rr,removeItem:()=>br,removeItemFromArray:()=>_t,searchMessageShortcuts:()=>io,setItem:()=>gr,simpleEqualCheck:()=>Ze,stickersURI:()=>Yn.Ll,subAccountURL:()=>Yn.I7,throttle:()=>or,transPrice:()=>gt,transformVideoTime:()=>Ut,unifyLocale:()=>$t,updateTimeLocale:()=>Ct,validateDuration:()=>Un,validateMediaDuration:()=>Nn,validateTypeAndSize:()=>Vn,videoURL:()=>Yn.Od,voucherIsExpired:()=>$o,voucherIsStockout:()=>Zo});var e,t,r={SG:"$",TH:"฿",VN:"₫",ID:"Rp",TW:"$",MY:"RM",PH:"₱",BR:"R$",IN:"₹",CN:"¥",MX:"$",CO:"$",CL:"$",AR:"$",PL:"zł",ES:"€",FR:"€",KR:"₩",US:"$"},n={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1},i={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},u={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},l={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},d={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},p=9,f={PERSONAL:1,TEAM:2},_=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(t||(t={}));var E={IMPROVED:1,WRONG:2,OFFENSIVE:4},S=156,O=88,h={FILLED:"filled",FILLING:"filling",FAILED:"failed"},v={PRELOADING:"preloading",FETCHING:"fetching"},T={TIME_NOW:"timeNow",PRELOADED:"preloaded"},m=["game_quota_reach","game_block"];function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R,D,C={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},A=y(y({},C),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),I=y(y({},C),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),P={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},w={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},N={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},U={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(R||(R={}));var M,L={AMOUNT:"amount",PERCENTAGE:"percentage"},j={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},G={ONGOING:"ongoing",SCHEDULED:"scheduled"},F=(g(D={},G.ONGOING,0),g(D,G.SCHEDULED,1),D),H=k(k({},G),{},{FINISHED:"finished"}),V={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},B={ITEM:"item",SHOP:"shop"},Y={DETAILS:"details",CLAIM:"claim",USE:"use"},Q={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},W=50,q={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(M||(M={}));var K,z={CUSTOMER:"customer",AGENT:"agent"};!function(e){e.All="All",e.Unread="Unread",e.Pinned="Pinned",e.Closed="Closed",e.Unreplied="Unreplied"}(K||(K={}));var X,J,$,Z={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},ee={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},te={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},re={MINE:"mine",HIS:"his"},ne={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},oe={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},ae={sales:"sold",recent:"mtime"},ce={SALES:"sales",RECENT:"recent"},se={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},ie=4,ue={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},le={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},de={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},pe={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},fe={SELLER:"seller",SUBACCOUNT:"subaccount"},_e={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},Ee={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},Se={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},Oe={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},he=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],ve={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},Te={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},me={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},ge={UNKNOWN:0,SIMPLE:1,ESCROW:2},be={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},ye={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},Re=-1,De=0,Ce=["image/png","image/jpeg","image/jpg"],Ae=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],Ie=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],Pe=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],we=2097152,Ne=31457280,Ue="common.no_sc_access",xe="conversation_detail.workstation.order_panel.manage",ke={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search",CLOSE:"close"},Me={MESSAGE:1001,SOLUTION:1002},Le={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(X||(X={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}(J||(J={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}($||($={}));var je={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Ge={pending:je.warn,error:je.error,resolved:je.success},Fe="conversation_detail.workstation.panel",He="".concat(Fe,".product"),Ve="conversation_detail.workstation.voucher_panel",Be={itemHeight:{conversationCellForBCSubAccount:94,conversationCell:72,shopCardCell:212,shopListCell:72,voucherCell:146,conversationShopListCell:60,dropdownShopListCell:44,contactCell:48},itemWidth:{shopCardCell:356}},Ye={ALL:"all",CUSTOMER:"customer",MESSAGES:"messages",AGENT:"agent"},Qe={NAME:"name",ORDER:"order",MESSAGE:"message",AGENT:"agent",AGENT_MESSAGE:"agentMessage"},We={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},qe={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},Ke={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"},ze=199999;function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}var Je=function(e){return!e||0===Object.keys(e).length},$e=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},Ze=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},et=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},tt=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},rt=function(){try{return!("undefined"!=typeof window&&"object"===Xe(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===Xe(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":Xe(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),nt=function(e){return!(null==e||!e.id)};function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function at(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var st,it,ut,lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},dt=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},pt=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},ft=function(e){return e>=1e3?"999+":e},_t=function(e,t){var r=at(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},Et=c(994),St=["PL","ES","FR"],Ot=function(e){return e?e.toUpperCase():"SG"},ht=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,Et.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(St.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,Et.getCurrencyConfig)(r).symbolPosition===Et.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},vt=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},Tt="NaN",mt=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,l=r.withComma,d=void 0===l||l,p=Ot(t),f=Number(e);if(Number.isNaN(f))return ht({price:Tt,country:p,isSCChat:n});var _="",E="";if(u){var S=vt(f);_=S.unit,f=S.value}return s&&(E="-"),f=(0,Et.formatCurrency)(p,f,{symbol:"",spaceBetweenSymbol:a,noSeparator:!d}),f=ht({price:f,country:p,isSCChat:n}),"".concat(E).concat(f).concat(_)},gt=function(e,t,r){return t=Ot(t),ht({price:e,country:t,isSCChat:r})},bt=c(602),yt=c.n(bt),Rt=c(470).t,Dt=new(yt()),Ct=function(e){return Dt.locale.set(e)};!function(e){e.Today="today",e.Yesterday="yesterday"}(st||(st={})),function(e){e[e.Time=0]="Time"}(it||(it={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(ut||(ut={}));var At,It=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=Rt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===it.Time?function(e){return e.format("hh:mm")}(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(At||(At={}));var Pt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=Dt.create(e);if(a)return It({value:i.format("LHD"),date:i,suffix:{type:it.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(Dt.locale.current),l=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return At.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?At.Today:c-1===s?At.Yesterday:At.ThisMonth}return At.ThisYear}return At.NONE}(e,s);switch(l){case At.Today:var d=n?void 0:{type:st.Today},p={type:it.Time,separator:""};return It({value:"",date:i,prefix:d,suffix:p});case At.Yesterday:var f={type:st.Yesterday},_=o?void 0:{type:it.Time,separator:""};return It({value:"",date:i,prefix:f,suffix:_});case At.ThisWeek:return Rt("common.".concat(ut[new Date(e).getDay()]));case At.ThisMonth:case At.ThisYear:var E=o?void 0:{type:it.Time};return It({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:E});default:var S=o?void 0:{type:it.Time};return It({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},wt="YYYY-MM-DD hh:mm",Nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Dt.create(e);return r.format(t||wt)},Ut=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},xt=function(e){var t=e.created_at,r=e.created_timestamp;return Pt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},kt=c(661),Mt=c.n(kt),Lt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},jt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},Gt=function(e){return e<=1?"one":"other"},Ft={fr:Lt,pl:jt,default:Gt},Ht={fr:function(e,t){return"".concat(Lt(e),".").concat(Lt(t))},pl:function(e,t){return"".concat(jt(e),".").concat(jt(t))},default:function(e,t){return"".concat(Gt(e),"_").concat(Gt(t))}},Vt=["fr","pl"],Bt=function(e,t,r){var n=Mt().language||"en",o=Vt.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(Ht[o](t,r)):"".concat(e,"_").concat(Ft[o](t))},Yt=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},Qt=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qt,Kt=["hans","hant"],zt=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr"],Xt=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},Jt=function(e){if(e.includes("-")){var t=e.split("-");return Kt.includes(t[1])?"".concat(t[0],"-").concat(Xt(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},$t=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Wt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(zt);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=Jt(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},Zt=function(e){var t=$t(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},er={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar"},tr=function(e){var t=$t(e);return er[t]||"default"},rr=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},nr=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},or=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var l=t-(u-s);r=this;for(var d=arguments.length,p=new Array(d),f=0;f<d;f++)p[f]=arguments[f];return n=p,l<=0||l>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,l)),o};return u},ar=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,at(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},cr="Auto-Translation",sr="modal",ir=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},ur=function(e){return ir(e,{superType:"Import-Template",secondaryType:sr})},lr=function(e){return ir(e,{superType:cr,secondaryType:sr})},dr=function(e){return ir(e,{superType:cr,secondaryType:"settings"})},pr=function(e){return ir(e,{superType:"Mass-Tool",secondaryType:sr})},fr=function(e){return ir(e,{superType:"SearchV3",secondaryType:sr})},_r=function(e){return ir(e,{superType:"Reply",secondaryType:sr})},Er=function(e){return ir(e,{superType:"Region-Filter",secondaryType:sr})},Sr=function(e){return ir(e,{superType:"MiniChat-Header",secondaryType:sr})},Or=function(e){return ir(e,{superType:"MiniChat-Entry",secondaryType:sr})},hr=c(349),vr=c.n(hr),Tr={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},mr=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Tr.getItem(e):vr().getItem(e)},gr=function(e,t){return vr().setItem(e,t)},br=function(e,t){return t?Tr.removeItem(e):vr().removeItem(e)},yr=vr().supports(vr().INDEXEDDB)||vr().supports(vr().WEBSQL)?1e3:100,Rr=c(470).t;function Dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ar=n.MSG_TYPE_TEXT,Ir=n.MSG_TYPE_IMAGE,Pr=n.MSG_TYPE_OFFER,wr=n.MSG_TYPE_PRODUCT,Nr=n.MSG_TYPE_ORDER,Ur=n.MSG_TYPE_STICKER,xr=n.MSG_TYPE_NOTIFICATION,kr=n.MSG_TYPE_VOUCHER,Mr=n.MSG_TYPE_ITEM_LIST,Lr=n.MSG_TYPE_FAQ,jr=n.MSG_TYPE_FAQ_QUESTION,Gr=n.MSG_TYPE_FAQ_LIVEAGENT,Fr=n.MSG_TYPE_FAQ_FEEDBACK,Hr=n.MSG_TYPE_FAQ_UNSUPPORTED,Vr=n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Br=n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,Yr=n.MSG_TYPE_BUNDLE_MESSAGE,Qr=n.MSG_TYPE_OPTION_PACK,Wr=n.MSG_TYPE_SELECTED_OPTION,qr=n.MSG_TYPE_VIDEO,Kr=n.MSG_TYPE_IMAGE_WITH_TEXT,zr=n.MSG_TYPE_RATE_CARD,Xr=n.MSG_TYPE_NEW_FAQ,Jr=n.MSG_TYPE_FAQ_CATEGORY_CHOICE,$r=n.MSG_TYPE_FAQ_QUESTION_LIST,Zr=n.MSG_TYPE_FAQ_TYPE_CHOICE,en=n.MSG_TYPE_FAQ_CATEGORY_LIST,tn=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,rn=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,nn=n.FAQ_TYPE_BOT_RESPONSE_MESSAGE,on=U.PENDING,an=U.REJECTED,cn="common.unsupported_message",sn=(g(qt={},n.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),g(qt,n.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),g(qt,n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),g(qt,n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),g(qt,n.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),g(qt,n.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),qt),un=function(e){return Rr(sn[e]||cn)},ln=[Mr],dn=[qr,Hr,Vr,Br,Kr],pn=[Ir,Yr,rn,Pr,wr,Nr,kr,zr,Ur],fn=[$r,Zr,en],_n=function(t){var r=t.message,n=t.enableTranslation,o=t.locale,a=t.conversationShopId;if(!r)return{text:Rr(cn)};var c=r.type,s=r.content,i=void 0===s?{}:s,u=r.crm_message_preview,l=void 0===u?{}:u,d=r.message_option,p=r.source,f=r.send_status;if(l.text)return{text:l.text};if(null!=i&&i.preview_text&&c===nn)return{text:i.preview_text};if(En(d,e.MSG_OPT_CENSORED_BLACKLIST))return{text:Rr("common.blacklist.replaced_text")};if(c){var _,E,S=i||{},O=S.text,h=void 0===O?"":O,v=S.title,T=S.opening,m=S.caption,g=S.translation,b=S.product_name,y=S.sticker_name,R=S.chat_product_infos,D=void 0===R?[]:R,C=S.products,A=void 0===C?[]:C,I=eo(r,{isAgent:!1,shop_id:a}),P=function(e,t,r,n){var o,a=t||{},c=a.live_agent_text,s=void 0===c?[]:c,i=a.fixed_title,u=a.faq_type_choice_translation;if(dn.includes(e))o=s.length?vn(s,r):un(e);else if(fn.includes(e))o=vn(e===Zr?u:i,r);else{var l=pn.includes(e)?"conversation_list.conversation_cell.new_".concat(e,"_message"):ln.includes(e)?"common.tips.recommended".concat(n?"":"_for_you"):"";o=l?"[".concat(Rr(l),"]"):Rr(cn)}return o}(c,i,o,I);switch(c){case Xr:case Lr:E=T||Rr("faq.no_set.chat_bot_title");break;case Ar:var w=Tn(i);E=!n||w||d===e.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(p)||2===f?h:(null==g?void 0:g.text)||h;break;case Gr:case jr:case Fr:case Wr:case Qr:case Jr:case tn:E=h||v;break;case qr:E="[".concat(P,"]");break;case Kr:E="[".concat(P,"] ").concat(m||v||h);break;case Hr:case Vr:case Br:case $r:case Zr:case en:E=P;break;case wr:E="".concat(P," ").concat(b);break;case Ur:E=y?"[".concat(y,"]"):P;break;case Mr:var N=D.map((function(e){return e.name})).join("; ");E="".concat(P," ").concat(N);break;case xr:var U=yn(i||{},o),x=U.notification_for_sender,k=U.notification_for_receiver;E=I?x:k;break;case zr:E="".concat(P," ").concat(Rr(I?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case Pr:var M=i||{},L=M.status,j=M.products_count,G=M.offer_price;if(L)if(L===on){var F=Rr("conversation_list.preview.offer_pending_".concat(I?"sender":"receiver"));E="".concat(P," ").concat(F,": ").concat(G," x ").concat(j),I||(_=!0)}else{var H=L===an?"declined":L;E="".concat(P," ").concat(Rr("conversation_detail.workstation.offer_panel.".concat(H)))}else E=P;break;case Nr:E="".concat(P," ").concat(A.map((function(e){return e.title})).join("; "));break;case kr:var V=i||{},B=V.type,Y=V.rule_text,Q=V.discount_text;if(B){var W="[".concat(Rr("conversation_detail.workstation.voucher_panel.".concat(B,"_voucher")),"]");E="".concat(W," ").concat(Q,", ").concat(Y)}else E=P;break;default:E=P}return{text:E,isPendingReceivedOffer:_}}return{text:Rr(cn)}},En=function(e,t){return(e&t)===t},Sn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return En(t.message_option,e.MSG_OPT_DELETE)},On=function(e,t){return t.some((function(t){return En(e,t)}))},hn=function(e){return e===zr},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return Zt(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},Tn=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,l=void 0===u?"":u,d=c.source_language,p=void 0===d?"":d,f=s?s.target_language:l,_=s?s.source_language:p,E=i?i.source_language:a;return E?E===f:_===f&&"unknown"!==_},mn=function(e,t){return{type:n.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},gn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},l=a?{last_message_option:i}:{};return Cr(Cr({},u),l)},bn=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},yn=function(e,t){var r=e.noti_text_of_all_languages,n=void 0===r?[]:r;if(!n.length)return e;var o=n.find((function(e){return Zt(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var a=n.find((function(e){return"en"===e.language}));return a||e},Rn=function(e){var t=e.type,r=e.textContent,n=e.content,o={};switch(t){case Nr:o={products:(r||{}).products};break;case kr:var a=r||{};o={rule_text:a.rule_text,discount_text:a.discount_text,type:a.type};break;case Pr:var c=r||{};o={status:c.status,products_count:c.products_count,offer_price:c.offer_price};break;case wr:o={product_name:n.product_name||(null==r?void 0:r.name)}}return Cr(Cr({},e),{},{content:Cr(Cr({},n),o)})};function Dn(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function Cn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){Dn(a,n,o,c,s,"next",e)}function s(e){Dn(a,n,o,c,s,"throw",e)}c(void 0)}))}}var An,In=c(757),Pn=c.n(In),wn=c(470).t,Nn=function(e){return Un(e)?wn(Bt("label.exceed_media_limit.video_duration",180),{max:180}):null},Un=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},xn=function(){return window.createObjectURL||window.URL.createObjectURL},kn=function(e){return{type:"video",cover:"",file:e,duration:0}},Mn=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=xn()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=xn()(e)}catch(r){return void t(kn(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?xn()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(kn(e))})),n.addEventListener("error",(function(){t(kn(e))}))}(e,r)}))},Ln=function(e){return e.size},jn=function(e){return e.type},Gn=function(e){var t=jn(e);return function(e){return e.includes("video")||Pe.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},Fn=function(){var e=Cn(Pn().mark((function e(t){var r;return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=Cn(Pn().mark((function e(t){return Pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(t,Gn(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hn="common.toast.file_unsupport",Vn=function(e,t,r,n){var o=Gn(e);if("all"===r&&!o||"all"!==r&&o!==r)return wn(Hn);if("video"===o){if(!t)return wn(Hn);if(!function(e){return Ln(e)<=Ne}(e))return wn("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return Ie.includes(r)}(e))return wn(Hn)}else if("image"===o){if(!function(e,t){return Ln(e)<=(t||we)}(e,n))return n?wn("ps_feedback_upload_img_size_error"):wn("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return Ce.includes(jn(e))}(e))return wn("feedback_modal.error.upload_image_failed.format")}return null},Bn=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},Yn=c(547),Qn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER],Wn=function(e){return Qn.includes(e)},qn=[e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],Kn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ITEM_LIST,n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_ADD_ON_DEAL,n.MSG_TYPE_VOUCHER,n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OFFER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT,n.MSG_TYPE_IMAGE_WITH_TEXT],zn=function(e,t){var r=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var l=Kn.includes(r)&&!qn.find((function(e){return En(u,e)})),p=c!==o.SENDING&&c!==o.FAILED&&i!==d.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(l&&p){var f=(e||{}).textContent,_=void 0===f?{}:f;if(r===n.MSG_TYPE_ORDER)return!(!_||!_.id);if(r===n.MSG_TYPE_PRODUCT){var E=_,S=E.id,O=E.actual_price;return!(!S||!O)}return!0}}return!1},Xn=(g(An={},n.MSG_TYPE_TEXT,0),g(An,n.MSG_TYPE_IMAGE,1),g(An,n.MSG_TYPE_OFFER,3),g(An,n.MSG_TYPE_PRODUCT,4),g(An,n.MSG_TYPE_ORDER,5),g(An,n.MSG_TYPE_STICKER,6),g(An,n.MSG_TYPE_VIDEO,18),g(An,n.MSG_TYPE_ITEM_LIST,1011),g(An,n.MSG_TYPE_VOUCHER,1013),g(An,n.MSG_TYPE_SHOPPING_CART,1014),g(An,n.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),g(An,n.MSG_TYPE_BUNDLE_DEAL,1016),g(An,n.MSG_TYPE_FLASH_SALE,1017),g(An,n.MSG_TYPE_ADD_ON_DEAL,1018),An),Jn=function(e){return void 0!==Xn[e]?Xn[e]:-1},$n=[e.MSG_OPT_AUTO_REPLY,e.MSG_OPT_BLOCKED,e.MSG_OPT_CENSORED_BLACKLIST,e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,e.MSG_OPT_INVISIBLE_FOR_RECEIVER,e.MSG_OPT_INVISIBLE_FOR_SENDER,e.MSG_OPT_ADS,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_OFFWORK_AUTOREPLY,e.MSG_OPT_CANCELORDER_WARNING_RETRACT,e.MSG_OPT_CHATBOT_SESSION,e.MSG_OPT_TRIGGER_CHATBOT,e.MSG_OPT_PRIVATE_MESSAGE,e.MSG_OPT_SILENT_FOR_SENDER],Zn=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&_.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!On(s,$n)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},eo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function to(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?to(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):to(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var no,oo,ao=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=uo(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},co=function(e){return e.trim().length>=1},so=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=at(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},io=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return ro(ro({},e),{},{weight:ao(e,t)})})))):e},uo=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},lo=c(470).t,po=function(e){return"common.order.status.".concat(e)},fo=function(e){var t=e.order,r=e.region,n=(e.isOwnOrder,e.isNewPrice),o=t.products,a=void 0===o?[]:o,c=t.estimated_escrow,s=void 0===c?0:c,i=t.total_price,u=void 0===i?0:i,l=t.voucher_price,d=void 0===l?0:l,p=t.price_before_discount,f=void 0===p?0:p,_=t.credit_card_promotion,E=void 0===_?0:_,S=a.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return{shopeeCoin:S,payment:mt(n?s||u?u:f||u:f-d-E-S,r)}},_o=Oe.PAY_CREDIT_CARD,Eo=Oe.PAY_BANK_TRANSFER,So=Oe.PAY_OFFLINE_PAYMENT,Oo=Oe.PAY_IPAY88,ho=Oe.PAY_FREE,vo=Oe.PAY_COD,To=Oe.PAY_ESUN,mo=Oe.PAY_BILL_PAYMENT,go=Oe.PAY_INDOMARET,bo=Oe.PAY_KREDIVO,yo=Oe.PAY_NICEPAY_CC,Ro=Oe.PAY_AIRPAY,Do=Oe.PAY_SHOPEE_WALLET,Co=Oe.PAY_SHOPEE_WALLET_V2,Ao=Oe.PAY_AKULAKU,Io=Oe.PAY_INSTALLMENT,Po=Oe.PAY_IBANKING,wo=(g(no={},_o,"cc"),g(no,Eo,"bank_transfer"),g(no,So,"offline"),g(no,Oo,"online"),g(no,ho,"waived"),g(no,vo,"cod"),g(no,To,"esun"),g(no,mo,"bill_payment"),g(no,go,"indomaret"),g(no,bo,"kredivo"),g(no,yo,"cc_installment"),g(no,Ro,"airpay"),g(no,Do,"shopee_wallet"),g(no,Co,"shopee_wallet_v2"),g(no,Ao,"akulaku"),g(no,Io,"installment"),g(no,Po,"ibanking"),no),No=function(e){var t=wo[e];return t?lo("common.order.pay_method.".concat(t)):""},Uo=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===Te.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),l=!!i&&Date.now()>=new Date(i).getTime(),d=!0;switch(r){case me.TOPAY:if(a===Oe.PAY_OFFLINE_PAYMENT)return d;break;case me.TOSHIP:return l&&u&&a===Oe.PAY_COD&&s===ye.LOGISTICS_REQUEST_CREATED||(o===ge.ESCROW?(n===Te.ORDER_EXT_RETURN_PROCESSING||c>0&&s===ye.LOGISTICS_REQUEST_CREATED&&l)&&(d=!1):o===ge.SIMPLE&&(d=!1)),d}return d},xo=(g(oo={},ne.DELETED,oe.DELETED),g(oo,ne.BANNED,oe.BANNED),g(oo,ne.SOLD_OUT,oe.SOLD_OUT),g(oo,ne.DELISTED,oe.DELISTED),oo),ko=function(e){return e===ne.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(xo[e])},Mo=function(e,t){return!(!e||t!==ne.DELETED)},Lo=function(e){return void 0!==e&&e!==ne.NORMAL},jo=function(e){return void 0!==e&&e<=0},Go=function(e,t){return Lo(e)||jo(t)},Fo=1e3,Ho=1800,Vo=86400,Bo=[Vo,3600,60],Yo=function(e){var t=e,r=Bo.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},Qo=function(e){return"".concat(e>=10?"":"0").concat(e)},Wo=function(){return Math.ceil(Date.now()/1e3).toString()},qo=function(e){return e*Math.pow(10,9)+""},Ko=["zh-CN","zh-Hant","zh-Hans"],zo=function(e){var t=Mt().language||"en",r=$t(t);return Ko.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},Xo=function(e,t,r,n,o){return n||t?e:e||o&&!!r},Jo=c(470).t,$o=function(e){return e===H.FINISHED},Zo=function(e,t){return e===t},ea=function(e,t){return mt(e,t,{withUnit:e>=1e4})},ta=function(e,t,r,n){return Jo("conversation_detail.workstation.voucher_panel.".concat(n?H.ONGOING:e,"_time"),{time:e===H.SCHEDULED?Nt(t,"MM.DD.YYYY h:mm"):Nt(r,"MM.DD.YYYY")})};function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function na(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oa=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,l=void 0===u?[]:u,d=[];return o.length&&o.forEach((function(e,r){d.push(aa({item:e,index:r,type:$.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){d.push(aa({item:e,index:n+o.length,type:$.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){d.push(aa({item:e,index:r+o.length+c.length,type:$.Intent,isNewFaq:t}))})),l.length&&l.forEach((function(e,r){d.push(aa({item:e,index:r,type:$.Question,isNewFaq:t}))})),d},aa=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case $.Categories:c={content:t.title,location:r};break;case $.OtherFaqType:c={content:vn(t.faq_type_choice_translation,a),location:r};break;case $.Intent:var s=t;c=na(na({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case $.Question:c={content:t.text,location:r};break;case $.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(na(na({},c),{},{is_intent_prediction:n===$.Intent?J.Intent:J.Faq,is_default_hq:o?1:0})),type:1}},ca=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);