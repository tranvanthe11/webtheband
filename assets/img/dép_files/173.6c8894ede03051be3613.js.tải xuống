(self.miniJsonp=self.miniJsonp||[]).push([[173],{67167:(e,t,n)=>{var r;self,r=(e,t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O,w,T,B,k,R,P,D,N,j,F,L,q,G,U,H,Y)=>(()=>{var V,z,W,Z,Q={7757:(e,t,n)=>{e.exports=n(5666)},5945:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(885),s={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["showChatbotImage","closeChatbotMediaPreview","chatbotIntentsReportRequest","fetchFaqSessionSucceed","updateChatbotFrom","updateHasConflict","deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","deleteMessageIdInHash","deleteFakingMessages","deleteMessageContentAndId","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","setSecurityTipsMessage","fetchConversationMessagesSaga","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","updateMessageFillStatusMap","fillMessageRequested","fillMessageContent","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleNewConversationMessageQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","handleFaqExpiredMessage","sendMessages","messageSyncUpdate","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","updateMessagesRelated","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1].forEach((function(e){s[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload,s=t.isLazy;return{id:n,action:e,payload:r,isLazy:s}}}))}));const a=s},4323:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(8661),s=n.n(r),a=s().t.bind(s())},5668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xoYO4owojG {\n  color: #2673dd;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/Common/CancelOrderHint/index.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,eAAe;AACjB",sourcesContent:[".policy {\n  color: #2673dd;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={policy:"xoYO4owojG"};const i=o},2147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ldGwUka16V {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.PpPQNYTjzu {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n","",{version:3,sources:["webpack://./src/components/Common/ScrollList/style.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,4BAA4B;AAC9B;;AAEA;EACE,MAAM;EACN,SAAS;EACT,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,sBAAsB;AACxB",sourcesContent:[".root {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.empty {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n"],sourceRoot:""}]),o.locals={root:"ldGwUka16V",empty:"PpPQNYTjzu"};const i=o},1644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xvgXvQJfBg {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n._louvguDj8 {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n}\n\n._louvguDj8.pcRh6o4FtL {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n.Gj6Kb_8akL {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/ModalHeader/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,aAAa;EACb,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB,gBAAgB;AAQlB;;AANE;IACE,cAAc;IACd,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;AAGF;EACE,aAAa;EACb,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,aAAa;EACb,eAAe;AACjB",sourcesContent:[".root {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n.title {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n\n  &.has-cancel {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.cancel {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={root:"xvgXvQJfBg",title:"_louvguDj8","has-cancel":"pcRh6o4FtL",hasCancel:"pcRh6o4FtL",cancel:"Gj6Kb_8akL"};const i=o},5792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".QOPArcVPa0 {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.e4rHNIVBIc {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.e4rHNIVBIc:focus {\n  outline: none;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,0EAA0E;AAC5E;;AAEA;EACE,aAAa;AACf",sourcesContent:[".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.content {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.content:focus {\n  outline: none;\n}\n"],sourceRoot:""}]),o.locals={overlay:"QOPArcVPa0",content:"e4rHNIVBIc"};const i=o},1696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ICwdhNZt8D {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.LsH14oWYoo {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.B_39Xx2sa4 {\n}\n\n.B_39Xx2sa4:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/ErrorContent/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".icon-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"icon-wrap":"ICwdhNZt8D",iconWrap:"ICwdhNZt8D","icon-base":"LsH14oWYoo",iconBase:"LsH14oWYoo",icon:"B_39Xx2sa4 LsH14oWYoo"};const i=o},7370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".lvfGaGmEO_ {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  margin-bottom: 4px;\n}\n\n.KZ2zq28zXu {\n  margin-bottom: 0;\n  color: #ee4d2d;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Order/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,iBAAiB;EACjB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EAEE,gBAAgB;EAChB,cAAc;AAChB",sourcesContent:[".line {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  margin-bottom: 4px;\n}\n\n.status {\n  composes: line;\n  margin-bottom: 0;\n  color: #ee4d2d;\n}\n"],sourceRoot:""}]),o.locals={line:"lvfGaGmEO_",status:"KZ2zq28zXu lvfGaGmEO_"};const i=o},7625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".C3cOkBPl3G,\n.MArSWKlROx,\n.iTQsEeB_Ll {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.MArSWKlROx {\n  color: #bbb;\n  text-decoration: line-through;\n}\n\n.C3cOkBPl3G {\n  color: #ee4d2d;\n  margin-left: 0.5em;\n}\n\n.C3cOkBPl3G.YSkZkfABAh {\n    margin-left: 0;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Product/index.css"],names:[],mappings:"AAAA;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,6BAA6B;AAC/B;;AAEA;EACE,cAAc;EACd,kBAAkB;AAKpB;;AAHE;IACE,cAAc;EAChB",sourcesContent:[".current-price,\n.original-price,\n.status {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.original-price {\n  color: #bbb;\n  text-decoration: line-through;\n}\n\n.current-price {\n  color: #ee4d2d;\n  margin-left: 0.5em;\n\n  &.no-origin {\n    margin-left: 0;\n  }\n}\n"],sourceRoot:""}]),o.locals={"current-price":"C3cOkBPl3G",currentPrice:"C3cOkBPl3G","original-price":"MArSWKlROx",originalPrice:"MArSWKlROx",status:"iTQsEeB_Ll","no-origin":"YSkZkfABAh",noOrigin:"YSkZkfABAh"};const i=o},1177:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".aPkxwEmpbc {\n  width: 100%;\n  height: 116px;\n  padding: 0.5em;\n  font-size: 16px;\n  box-sizing: border-box;\n  display: flex;\n  border-radius: 8px;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: #f7f8fb;\n}\n\n.Z3EF4a7S93 {\n  height: 96px;\n}\n\n.chEJ5cCbft {\n  color: #555;\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.JFRlMYQSZi {\n  height: 1px;\n  width: 100%;\n  margin-top: 8px;\n  margin-bottom: 7px;\n  transform: scaleY(0.5);\n  background-color: rgba(0, 0, 0, 0.09);\n}\n\n.UDiSvl0kP4 {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  position: relative;\n}\n\n.vXn2gIYM5j {\n  margin-top: 0.5em;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.hmektzZglE {\n  cursor: pointer;\n}\n\n.HYyNk4qtp7 {\n  width: 3em;\n  height: 3em;\n  border: 1px solid #f5f5f5;\n  background: transparent;\n}\n\n.LVBo2ECzmo {\n  width: calc(3em - 2px);\n  height: calc(3em - 2px);\n}\n\n.QEbVX7exP7,\n.afn7AObQhK,\n.DN8Uh8ITG6 {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.QEbVX7exP7 {\n  color: #555;\n}\n\n.nzIBjG_Juk {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.afn7AObQhK {\n  color: #888;\n}\n\n.DN8Uh8ITG6 {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.RtRCeE7Rd7 {\n  color: #ccc;\n  cursor: default;\n}\n\n.IPp1hvocDi {\n  color: #ccc;\n  cursor: default;\n}\n\n.g1RCCZAeWH {\n  height: 100%;\n  padding-left: 0.5em;\n}\n\n.g1RCCZAeWH._G6ZxA1qYO {\n    display: flex;\n    align-items: center;\n  }\n\n.cBomL4XnjJ {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  display: -webkit-box;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  word-break: break-all;\n  overflow: hidden;\n}\n\n.RsTExA8pvG {\n  padding-top: 2px;\n}\n\n.pQWcEN6WDr {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.UFWU17wVUx {\n  margin-top: 4px;\n}\n\n.JMr6x3BJJC {\n  margin-top: 0.125em;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/common.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,aAAa;EACb,cAAc;EACd,eAAe;EACf,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,sBAAsB;EACtB,8BAA8B;EAC9B,yBAAyB;AAC3B;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,WAAW;EACX,eAAe;EACf,iBAAiB;AACnB;;AAGA;EACE,WAAW;EACX,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,sBAAsB;EACtB,qCAAqC;AACvC;;AAEA;EACE,OAAO;EACP,WAAW;EACX,aAAa;EACb,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,aAAa;EACb,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,UAAU;EACV,WAAW;EACX,yBAAyB;EACzB,uBAAuB;AACzB;;AAEA;EACE,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,cAAc;EACd,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,YAAY;EACZ,mBAAmB;AAMrB;;AAJE;IACE,aAAa;IACb,mBAAmB;EACrB;;AAGF;EACE,eAAe;EACf,iBAAiB;EACjB,yBAAyB;EACzB,oBAAoB;EACpB,uBAAuB;EACvB,qBAAqB;EACrB,4BAA4B;EAC5B,mBAAmB;EACnB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EAEE,eAAe;AACjB;;AAEA;EAEE,mBAAmB;AACrB",sourcesContent:[".root {\n  width: 100%;\n  height: 116px;\n  padding: 0.5em;\n  font-size: 16px;\n  box-sizing: border-box;\n  display: flex;\n  border-radius: 8px;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: #f7f8fb;\n}\n\n.short-root {\n  composes: root;\n  height: 96px;\n}\n\n.header {\n  color: #555;\n  font-size: 12px;\n  line-height: 14px;\n}\n\n\n.divider {\n  height: 1px;\n  width: 100%;\n  margin-top: 8px;\n  margin-bottom: 7px;\n  transform: scaleY(0.5);\n  background-color: rgba(0, 0, 0, 0.09);\n}\n\n.body {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  position: relative;\n}\n\n.footer {\n  margin-top: 0.5em;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.hover {\n  cursor: pointer;\n}\n\n.img-wrapper {\n  width: 3em;\n  height: 3em;\n  border: 1px solid #f5f5f5;\n  background: transparent;\n}\n\n.img {\n  width: calc(3em - 2px);\n  height: calc(3em - 2px);\n}\n\n.label,\n.status-text,\n.link {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.label {\n  color: #555;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.status-text {\n  color: #888;\n}\n\n.link {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.deleted {\n  color: #ccc;\n  cursor: default;\n}\n\n.no-access {\n  color: #ccc;\n  cursor: default;\n}\n\n.content {\n  height: 100%;\n  padding-left: 0.5em;\n\n  &.no-model {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.name {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  display: -webkit-box;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  word-break: break-all;\n  overflow: hidden;\n}\n\n.order-name {\n  composes: name;\n  padding-top: 2px;\n}\n\n.detail {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.product-detail {\n  composes: detail;\n  margin-top: 4px;\n}\n\n.order-detail {\n  composes: detail;\n  margin-top: 0.125em;\n}\n"],sourceRoot:""}]),o.locals={root:"aPkxwEmpbc","short-root":"Z3EF4a7S93 aPkxwEmpbc",shortRoot:"Z3EF4a7S93 aPkxwEmpbc",header:"chEJ5cCbft",divider:"JFRlMYQSZi",body:"UDiSvl0kP4",footer:"vXn2gIYM5j",hover:"hmektzZglE","img-wrapper":"HYyNk4qtp7",imgWrapper:"HYyNk4qtp7",img:"LVBo2ECzmo",label:"QEbVX7exP7","status-text":"afn7AObQhK",statusText:"afn7AObQhK",link:"DN8Uh8ITG6",actions:"nzIBjG_Juk",deleted:"RtRCeE7Rd7","no-access":"IPp1hvocDi",noAccess:"IPp1hvocDi",content:"g1RCCZAeWH","no-model":"_G6ZxA1qYO",noModel:"_G6ZxA1qYO",name:"cBomL4XnjJ","order-name":"RsTExA8pvG cBomL4XnjJ",orderName:"RsTExA8pvG cBomL4XnjJ",detail:"pQWcEN6WDr","product-detail":"UFWU17wVUx pQWcEN6WDr",productDetail:"UFWU17wVUx pQWcEN6WDr","order-detail":"JMr6x3BJJC pQWcEN6WDr",orderDetail:"JMr6x3BJJC pQWcEN6WDr"};const i=o},5522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".YgwCAyD4Nu {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.qu7NqjdBtM {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.zjxBy6muI4 {\n  color: #eda500;\n}\n\n.r1mvfORZKY {\n  color: #30b566;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MetaInfo/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EAEE,cAAc;AAChB",sourcesContent:[".meta-content {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.icon {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.warn-icon {\n  composes: icon;\n  color: #eda500;\n}\n\n.success-icon {\n  composes: icon;\n  color: #30b566;\n}\n"],sourceRoot:""}]),o.locals={"meta-content":"YgwCAyD4Nu",metaContent:"YgwCAyD4Nu",icon:"qu7NqjdBtM","warn-icon":"zjxBy6muI4 qu7NqjdBtM",warnIcon:"zjxBy6muI4 qu7NqjdBtM","success-icon":"r1mvfORZKY qu7NqjdBtM",successIcon:"r1mvfORZKY qu7NqjdBtM"};const i=o},8733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".giWDyn0pBc {\n  box-sizing: border-box;\n  background: #fafafa;\n  margin-top: 1em;\n  height: 28px;\n  color: #bbb;\n  font-size: 14px;\n  text-align: center;\n  padding: 6px 0;\n  margin-left: -7.5px;\n  margin-right: -7.5px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/NewMessageTip/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,mBAAmB;EACnB,eAAe;EACf,YAAY;EACZ,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,cAAc;EACd,mBAAmB;EACnB,oBAAoB;AACtB",sourcesContent:[".new-message-tip {\n  box-sizing: border-box;\n  background: #fafafa;\n  margin-top: 1em;\n  height: 28px;\n  color: #bbb;\n  font-size: 14px;\n  text-align: center;\n  padding: 6px 0;\n  margin-left: -7.5px;\n  margin-right: -7.5px;\n}\n"],sourceRoot:""}]),o.locals={"new-message-tip":"giWDyn0pBc",newMessageTip:"giWDyn0pBc"};const i=o},6322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ttPQqPfWBw {\n  margin-right: 0.5em;\n}\n\n.jfwEgZmTS8 {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.qLygjvHbi_ {\n}\n\n.qLygjvHbi_:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/SendingStatus/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".sending-wrap {\n  margin-right: 0.5em;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"sending-wrap":"ttPQqPfWBw",sendingWrap:"ttPQqPfWBw","icon-base":"jfwEgZmTS8",iconBase:"jfwEgZmTS8",icon:"qLygjvHbi_ jfwEgZmTS8"};const i=o},8304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".lZX8jHufoA {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.WTt5Zxu_wD {\n  padding-bottom: 0.75em;\n}\n\n.uAjc6BXz_7 {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.n7tPV8kPwM {\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.qAGJYsVJQu {\n  justify-content: flex-start;\n}\n\n.P3ZdqDjG37 {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.ABKca6B6Ht {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.uCUlXlm0QJ {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.z_Xhr9b5fr {\n  position: relative;\n}\n\n.GdJhfJ3Op6 {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sNqF64S6Ls {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.bYxtrDTEPp {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.DLvnpF6s13 {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DLvnpF6s13:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.DcB5O9mC5j {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DcB5O9mC5j:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.BeN6c_qwKf .DLvnpF6s13:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n\n.h0x92TVWo6 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.Prfii1SpEb {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n}\n\n.Prfii1SpEb::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n\n.RjM9TcwKtg {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.nLboISDstO {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.zIxwRJ1LdF {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.PMSbyVSfsf {\n  color: #ff4742;\n}\n\n.fSRVoLiSel {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.y0mvzRsyQC {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.bCeP7O7kIU {\n  width: 100%;\n  height: 100%;\n}\n\n.qUVi9b0o_d {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.GmQ6XKEO1A {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.WZc6v51Ui3 {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.dAcTlOVojQ {\n  display: flex;\n  flex-direction: row;\n}\n\n.V5XYcsiIjs {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.W5wfnXLeev {\n  margin-bottom: 0.428em;\n}\n\n.l9LJVab1Cf {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.nA662Ba2GJ {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.XPgj2M188U {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.vCA0Qf4XEs {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.ZZd9f8t9vy {\n  margin-right: 1.333em;\n}\n\n.EPXlbwcmCC {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.YcgygeHQkO {\n  height: 1em;\n  width: 1em;\n}\n\n.gOXjE4DJKC {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.aihhYFJGJZ {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.ULipY89W0D {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.CpuhigVQTg {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n}\n\n.CpuhigVQTg > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n.CpuhigVQTg > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n\n.XzkgdAK3Dj {\n  font-size: 14px;\n  color: #555;\n}\n\n.fDWC8RPEk1 {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes Sy68QEc9eS {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.ZbPw85eBry {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.z_IvwASUPS {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n\n.d6OoDRmeTf {\n  display: flex;\n  justify-content: center;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EAEE,2BAA2B;AAC7B;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,oBAAoB;EACpB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,oCAAoC;EACpC,4BAA4B;EAC5B,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAGF;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAIA;IACE,WAAW;IACX,mBAAmB;EACrB;;AAGF;EACE,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,kBAAkB;EAClB,WAAW;AAWb;;AATE;IACE,WAAW;IACX,WAAW;IACX,WAAW;IACX,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,sBAAsB;EACxB;;AAGF;EACE,iBAAiB;EACjB,iBAAiB;EACjB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,iBAAiB;EACjB,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,cAAc;EACd,aAAa;EACb,gBAAgB;AAelB;;AAbE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;EACpB;;AAEA;IACE,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,iBAAiB;EACnB;;AAGF;EACE,eAAe;EACf,WAAW;AACb;;AAEA;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;EACxB,eAAe;EACf,oBAAoB;EACpB,kBAAkB;EAClB,yBAAyB;AAC3B;;AAEA;EACE,aAAa;EACb,uBAAuB;AACzB",sourcesContent:[".root {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.last-message {\n  padding-bottom: 0.75em;\n}\n\n.message {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.message-send {\n  composes: message;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.message-receive {\n  composes: message;\n  justify-content: flex-start;\n}\n\n.message-time {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.product-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.product-origin-info {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.image-wrapper {\n  position: relative;\n}\n\n.product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sold-out {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.background-settings {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.view-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.view-mall-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.banned {\n  & .view-link:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n}\n\n.product-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.origin-price {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n}\n\n.product-price {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.product-stock {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.deleted-product {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.banned-product {\n  composes: product-price;\n  color: #ff4742;\n}\n\n.view-product-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.avatar-wrap {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n}\n\n.avatar-placeholder {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.order-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.order-origin-info {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.order-product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.status-wrap {\n  margin-bottom: 0.428em;\n}\n\n.order-status {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.pipe {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.order-product-name {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.order-detail {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.order-sn {\n  margin-right: 1.333em;\n}\n\n.shop-information {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.shop-avatar {\n  height: 1em;\n  width: 1em;\n}\n\n.shop-name {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.shop-origin {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.shop-origin-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.shop-origin-avatar {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n\n  & > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  & > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n}\n\n.shop-origin-name {\n  font-size: 14px;\n  color: #555;\n}\n\n.view-shop-block {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.bubble {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.offer-tips {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n\n.center {\n  display: flex;\n  justify-content: center;\n}\n"],sourceRoot:""}]),o.locals={root:"lZX8jHufoA","last-message":"WTt5Zxu_wD",lastMessage:"WTt5Zxu_wD",message:"uAjc6BXz_7","message-send":"n7tPV8kPwM uAjc6BXz_7",messageSend:"n7tPV8kPwM uAjc6BXz_7","message-receive":"qAGJYsVJQu uAjc6BXz_7",messageReceive:"qAGJYsVJQu uAjc6BXz_7","message-time":"P3ZdqDjG37",messageTime:"P3ZdqDjG37","product-origin":"ABKca6B6Ht",productOrigin:"ABKca6B6Ht","product-origin-info":"uCUlXlm0QJ",productOriginInfo:"uCUlXlm0QJ","image-wrapper":"z_Xhr9b5fr",imageWrapper:"z_Xhr9b5fr","product-image":"GdJhfJ3Op6",productImage:"GdJhfJ3Op6","sold-out":"sNqF64S6Ls",soldOut:"sNqF64S6Ls","background-settings":"bYxtrDTEPp",backgroundSettings:"bYxtrDTEPp","view-link":"DLvnpF6s13",viewLink:"DLvnpF6s13","view-mall-link":"DcB5O9mC5j",viewMallLink:"DcB5O9mC5j",banned:"BeN6c_qwKf","product-name":"h0x92TVWo6",productName:"h0x92TVWo6","origin-price":"Prfii1SpEb",originPrice:"Prfii1SpEb","product-price":"RjM9TcwKtg",productPrice:"RjM9TcwKtg","product-stock":"nLboISDstO",productStock:"nLboISDstO","deleted-product":"zIxwRJ1LdF",deletedProduct:"zIxwRJ1LdF","banned-product":"PMSbyVSfsf RjM9TcwKtg",bannedProduct:"PMSbyVSfsf RjM9TcwKtg","view-product-block":"fSRVoLiSel",viewProductBlock:"fSRVoLiSel","avatar-wrap":"y0mvzRsyQC",avatarWrap:"y0mvzRsyQC",avatar:"bCeP7O7kIU","avatar-placeholder":"qUVi9b0o_d",avatarPlaceholder:"qUVi9b0o_d","order-origin":"GmQ6XKEO1A",orderOrigin:"GmQ6XKEO1A","order-origin-info":"WZc6v51Ui3",orderOriginInfo:"WZc6v51Ui3","order-info":"dAcTlOVojQ",orderInfo:"dAcTlOVojQ","order-product-image":"V5XYcsiIjs",orderProductImage:"V5XYcsiIjs","status-wrap":"W5wfnXLeev",statusWrap:"W5wfnXLeev","order-status":"l9LJVab1Cf",orderStatus:"l9LJVab1Cf",pipe:"nA662Ba2GJ","order-product-name":"XPgj2M188U",orderProductName:"XPgj2M188U","order-detail":"vCA0Qf4XEs",orderDetail:"vCA0Qf4XEs","order-sn":"ZZd9f8t9vy",orderSn:"ZZd9f8t9vy","shop-information":"EPXlbwcmCC",shopInformation:"EPXlbwcmCC","shop-avatar":"YcgygeHQkO",shopAvatar:"YcgygeHQkO","shop-name":"gOXjE4DJKC",shopName:"gOXjE4DJKC","shop-origin":"aihhYFJGJZ",shopOrigin:"aihhYFJGJZ","shop-origin-info":"ULipY89W0D",shopOriginInfo:"ULipY89W0D","shop-origin-avatar":"CpuhigVQTg",shopOriginAvatar:"CpuhigVQTg","shop-origin-name":"XzkgdAK3Dj",shopOriginName:"XzkgdAK3Dj","view-shop-block":"fDWC8RPEk1",viewShopBlock:"fDWC8RPEk1",bubble:"ZbPw85eBry","offer-tips":"z_IvwASUPS",offerTips:"z_IvwASUPS",center:"d6OoDRmeTf",rotate:"Sy68QEc9eS"};const i=o},8674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xQ_ZVDDSL5 {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n}.xQ_ZVDDSL5.sXjBJZAZ93 {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n\n.YDdA3QTCvb {\n  max-width: 240px;\n  line-height: 21px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/CustomMessage/index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,sBAAsB;EACtB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;EACX,eAAe;EACf,yBAAyB;AAM3B,CAJE;IACE,yBAAyB;IACzB,WAAW;EACb;;AAGF;EACE,gBAAgB;EAChB,iBAAiB;AACnB",sourcesContent:[".message {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n\n  &.send {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n}\n\n.unsupport-faq {\n  max-width: 240px;\n  line-height: 21px;\n}\n"],sourceRoot:""}]),o.locals={message:"xQ_ZVDDSL5",send:"sXjBJZAZ93","unsupport-faq":"YDdA3QTCvb",unsupportFaq:"YDdA3QTCvb"};const i=o},699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".zMhG2GcJB5 {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.vruaYFWPIz {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.rHWU4R6moI {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.UdG8ieRpin {\n  text-align: right;\n}\n\n.WA7EkEk7KY {\n  color: #888;\n}\n\n.VsOdpRSHy9 {\n  color: #bbb;\n}\n\n.Mseg1zlntD {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/HistoryList/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,qBAAqB;EACrB,QAAQ;EACR,gBAAgB;AAClB",sourcesContent:[".list {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.header {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.message {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.right {\n  text-align: right;\n}\n\n.username {\n  color: #888;\n}\n\n.stamp {\n  color: #bbb;\n}\n\n.split {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n"],sourceRoot:""}]),o.locals={list:"zMhG2GcJB5",header:"vruaYFWPIz",message:"rHWU4R6moI",right:"UdG8ieRpin",username:"WA7EkEk7KY",stamp:"VsOdpRSHy9",split:"Mseg1zlntD"};const i=o},7539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".IFFE2hRR3g {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}.IFFE2hRR3g.Eev1E6LFhB {\n    border: 0.25em solid #d7e4ff;\n  }.IFFE2hRR3g.Kv35x4rdMm {\n    border: 0.25em solid #f1f3f4;\n  }\n\n.P387dp5Goh {\n  width: 600px;\n  height: 672px;\n}\n\n.eefwgb8vaR {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.nCqHkv5xsO {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.KXHfh5bou2 {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,yBAAyB;AAS3B,CAPE;IACE,4BAA4B;EAC9B,CAEA;IACE,4BAA4B;EAC9B;;AAGF;EACE,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;EACjB,gBAAgB;EAChB,8BAA8B;EAC9B,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,gBAAgB;EAChB,qBAAqB;EACrB,mBAAmB;EACnB,YAAY;AACd",sourcesContent:[".root {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.send {\n    border: 0.25em solid #d7e4ff;\n  }\n\n  &.receive {\n    border: 0.25em solid #f1f3f4;\n  }\n}\n\n.container {\n  width: 600px;\n  height: 672px;\n}\n\n.header {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.footer {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.preview {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n"],sourceRoot:""}]),o.locals={root:"IFFE2hRR3g",send:"Eev1E6LFhB",receive:"Kv35x4rdMm",container:"P387dp5Goh",header:"eefwgb8vaR",footer:"nCqHkv5xsO",preview:"KXHfh5bou2"};const i=o},5965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".sWnNfV3B5s {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n}.sWnNfV3B5s.zlsgqeBenz {\n    background-color: #d7e4ff;\n  }\n\n.TfXcQ_zrLr {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/OrderMessage/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,kBAAkB;EAClB,yBAAyB;EACzB,gBAAgB;EAChB,YAAY;EACZ,iBAAiB;AAKnB,CAHE;IACE,yBAAyB;EAC3B;;AAGF;EACE,cAAc;EACd,0BAA0B;EAC1B,eAAe;AACjB",sourcesContent:[".order {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n\n  &.send {\n    background-color: #d7e4ff;\n  }\n}\n\n.link {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={order:"sWnNfV3B5s",send:"zlsgqeBenz",link:"TfXcQ_zrLr"};const i=o},1500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".E_OLrXNoEk {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.LDttZcGOz6 {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.wf9mOd836y {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.fI2ODdwFGy {\n  color: #ee4d2d;\n}\n\n.lPtsH0BIt2 {\n  color: #ccc;\n  cursor: default;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/PondMessage/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB",sourcesContent:[".root {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.option {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.title {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.primary {\n  color: #ee4d2d;\n}\n\n.invalid {\n  color: #ccc;\n  cursor: default;\n}\n"],sourceRoot:""}]),o.locals={root:"E_OLrXNoEk",option:"LDttZcGOz6",title:"wf9mOd836y",primary:"fI2ODdwFGy",invalid:"lPtsH0BIt2"};const i=o},6496:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".EfqwjCbjYK {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.lRBlAKma_w {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.MxoUoxkjhX {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/UnreadBriefMessages/index.css"],names:[],mappings:"AAAA;EACE,OAAO;EACP,SAAS;EACT,WAAW;EACX,aAAa;EACb,WAAW;EACX,YAAY;EACZ,eAAe;EACf,eAAe;EACf,mBAAmB;EACnB,mBAAmB;EACnB,sBAAsB;EACtB,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,cAAc;EACd,YAAY;EACZ,WAAW;AACb",sourcesContent:[".root {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.new-message {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.new-message-arrow {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n"],sourceRoot:""}]),o.locals={root:"EfqwjCbjYK","new-message":"lRBlAKma_w",newMessage:"lRBlAKma_w","new-message-arrow":"MxoUoxkjhX",newMessageArrow:"MxoUoxkjhX"};const i=o},1337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".N1x9FHSgsu {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.AbLCooIIar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.cmgkmzn7la {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.kRvCnxx7Qk {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,eAAe;EACf,4BAA4B;AAC9B;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,eAAe;AACjB",sourcesContent:[".message-section {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.layers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.grid {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.iconWrapper {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={"message-section":"N1x9FHSgsu",messageSection:"N1x9FHSgsu",layers:"AbLCooIIar",grid:"cmgkmzn7la",iconWrapper:"kRvCnxx7Qk"};const i=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(s," */"),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([a]).join("\n")}return[t].join("\n")}},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",i=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new O(r||[]);return a._invoke=function(e,t,n){var r=d;return function(s,a){if(r===f)throw new Error("Generator is already running");if(r===g){if("throw"===s)throw a;return T()}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var i=x(o,n);if(i){if(i===A)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?g:p,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=g,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",f="executing",g="completed",A={};function h(){}function m(){}function E(){}var v={};v[a]=function(){return this};var S=Object.getPrototypeOf,_=S&&S(S(w([])));_&&_!==n&&r.call(_,a)&&(v=_);var b=E.prototype=h.prototype=Object.create(v);function y(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(s,a,o,i){var c=u(e[s],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,i)}))}i(c.arg)}var s;this._invoke=function(e,r){function a(){return new t((function(t,s){n(e,r,t,s)}))}return s=s?s.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var s=u(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,A;var a=s.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,A):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function w(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:T}}function T(){return{value:t,done:!0}}return m.prototype=b.constructor=E,E.constructor=m,m.displayName=c(E,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,i,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(C.prototype),C.prototype[o]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,s,a){void 0===a&&(a=Promise);var o=new C(l(t,n,r,s),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(b),c(b,i,"Generator"),b[a]=function(){return this},b.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(r,s){return i.type="throw",i.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;I(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:w(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),A}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],u=a[l]||0,d="".concat(l," ").concat(u);a[l]=u+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var g=s(f,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:g,references:1})}o.push(d)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=r(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var i=n(a[o]);t[i].references--}for(var c=r(e,s),l=0;l<a.length;l++){var u=n(a[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},6512:e=>{"use strict";e.exports=T},1361:e=>{"use strict";e.exports=M},6359:e=>{"use strict";e.exports=d},2236:e=>{"use strict";e.exports=L},3710:e=>{"use strict";e.exports=P},6572:e=>{"use strict";e.exports=w},2066:e=>{"use strict";e.exports=R},5423:e=>{"use strict";e.exports=H},9977:e=>{"use strict";e.exports=E},1506:e=>{"use strict";e.exports=G},5247:e=>{"use strict";e.exports=U},4209:e=>{"use strict";e.exports=S},5401:e=>{"use strict";e.exports=x},411:e=>{"use strict";e.exports=_},3123:e=>{"use strict";e.exports=C},7770:e=>{"use strict";e.exports=y},914:e=>{"use strict";e.exports=b},3195:e=>{"use strict";e.exports=Y},8310:e=>{"use strict";e.exports=N},8661:e=>{"use strict";e.exports=m},8550:e=>{"use strict";e.exports=j},8156:t=>{"use strict";t.exports=e},9424:e=>{"use strict";e.exports=F},4756:e=>{"use strict";e.exports=n},4236:e=>{"use strict";e.exports=o},2779:e=>{"use strict";e.exports=i},3202:e=>{"use strict";e.exports=c},2167:e=>{"use strict";e.exports=a},8252:e=>{"use strict";e.exports=f},5447:e=>{"use strict";e.exports=t},1655:e=>{"use strict";e.exports=v},4944:e=>{"use strict";e.exports=g},8509:e=>{"use strict";e.exports=I},5600:e=>{"use strict";e.exports=p},2511:e=>{"use strict";e.exports=u},3682:e=>{"use strict";e.exports=O},1501:e=>{"use strict";e.exports=r},2760:e=>{"use strict";e.exports=q},3162:e=>{"use strict";e.exports=s},4321:e=>{"use strict";e.exports=D},1855:e=>{"use strict";e.exports=l},2839:e=>{"use strict";e.exports=k},4148:e=>{"use strict";e.exports=B},4672:e=>{"use strict";e.exports=h},459:e=>{"use strict";e.exports=A},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(181);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(907);function s(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},X={};function K(e){var t=X[e];if(void 0!==t)return t.exports;var n=X[e]={id:e,exports:{}};return Q[e](n,n.exports,K),n.exports}K.m=Q,V=[],K.O=(e,t,n,r)=>{if(!t){var s=1/0;for(c=0;c<V.length;c++){for(var[t,n,r]=V[c],a=!0,o=0;o<t.length;o++)(!1&r||s>=r)&&Object.keys(K.O).every((e=>K.O[e](t[o])))?t.splice(o--,1):(a=!1,r<s&&(s=r));if(a){V.splice(c--,1);var i=n();void 0!==i&&(e=i)}}return e}r=r||0;for(var c=V.length;c>0&&V[c-1][2]>r;c--)V[c]=V[c-1];V[c]=[t,n,r]},K.F={},K.E=e=>{Object.keys(K.F).map((t=>{K.F[t](e)}))},K.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return K.d(t,{a:t}),t},W=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,K.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);K.r(n);var r={};z=z||[null,W({}),W([]),W(W)];for(var s=2&t&&e;"object"==typeof s&&!~z.indexOf(s);s=W(s))Object.getOwnPropertyNames(s).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,K.d(n,r),n},K.d=(e,t)=>{for(var n in t)K.o(t,n)&&!K.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},K.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),K.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Z={374:0,574:0},K.F.j=e=>{if(!K.o(Z,e)||void 0===Z[e]){Z[e]=null;var t=document.createElement("link");K.nc&&t.setAttribute("nonce",K.nc),t.rel="prefetch",t.as="script",t.href=K.p+K.u(e),document.head.appendChild(t)}},K.O.j=e=>0===Z[e],K.nc=void 0,K.O(0,[374],(()=>{}),5);var J={};return(()=>{"use strict";K.r(J),K.d(J,{default:()=>zp,getModule:()=>Vp});var e={};function t(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}K.r(e),K.d(e,{ChatbotProvider:()=>ri,HIGHLIGHT_TIMEOUT:()=>Xt,abortAllSendingMessages:()=>Es,cancelSendingMessageRequested:()=>vs,cancelSendingMessageSucceeded:()=>Ss,changeTranslateStatus:()=>Xs,chatbotIntentsReportRequest:()=>ii,closeChatbotMediaPreview:()=>oi,collectChatbotReportTask:()=>Di,deleteConversationMessageHash:()=>Ln,deleteFakingMessages:()=>xo,deleteMessageContentAndId:()=>Mo,deleteMessageIdInHash:()=>Co,deleteMessagePostRequested:()=>yo,deleteMessageRequested:()=>bo,deleteVideoInfo:()=>sr,evaluationRequested:()=>Be,fetchConversationMessagesSaga:()=>Pt,fetchFaqMessagesRequested:()=>_a,fetchFaqMessagesSucceeded:()=>ba,fetchFaqSessionSucceed:()=>ci,fetchMessagesRequested:()=>wt,fetchMessagesRequestedSaga:()=>Lt,fetchMessagesRequestedWithPreloadSaga:()=>Ft,fetchMessagesSucceeded:()=>Tt,fillMessageContent:()=>ot,fillMessageRequested:()=>st,getChatbotSdk:()=>ei,handleCurrentConversationChange:()=>co,handleFaqExpiredMessage:()=>Ts,handleNewConversationMessageQueue:()=>so,handleSendSucceededMessages:()=>ws,handleSensitiveUrl:()=>fa,makeServiceList:()=>fr,messageSyncUpdate:()=>No,receiveMessageRequested:()=>za,receiveMessageSucceeded:()=>Wa,reducerMap:()=>tc,replaceHttpLinkWithHttps:()=>tr,resendMessageRequested:()=>mn,resendOfflineMessagesOnce:()=>Tn,resendOfflineMessagesOnceSucceed:()=>Bn,resetConversationQueue:()=>Xa,resetCurrentConversationReplyToMessage:()=>an,resetMessagesFailedByOffline:()=>wn,resetNewConversationQueue:()=>Za,resetOldConversationQueue:()=>Qa,resetReplyToMessage:()=>$t,resetScrollToMessageId:()=>nn,sagas:()=>ec,scrollToMessage:()=>en,scrollToMessageSaga:()=>on,sendMessages:()=>Bs,sendMessagesFailed:()=>ms,sendMessagesFailedByOffline:()=>On,sendMessagesRequested:()=>fs,sendMessagesSucceeded:()=>gs,sendMessagesToPending:()=>hs,sendTranslateFeedback:()=>Js,sendVideoMessageRequested:()=>_s,sendingMessages:()=>As,setCurrentConversationReplyToMessage:()=>sn,setEntryPoint:()=>Vi,setInScrollToMessage:()=>rn,setReplyToMessage:()=>Jt,setScrollToMessageId:()=>tn,setSecurityTipsMessage:()=>kt,showChatbotImage:()=>ai,showFaqHistoryModal:()=>xa,showMyRateCard:()=>Oe,showRateCard:()=>we,showTranslateFeedback:()=>Ks,translateMessagesRequested:()=>Qs,updateChatbotFrom:()=>ti,updateCurrentFaqId:()=>Ca,updateFetchFaqMessagesRequestedStatus:()=>ya,updateFetchMessagesRequestedStatus:()=>Bt,updateHasConflict:()=>Xi,updateMessageFillStatusMap:()=>rt,updateMessagesRelated:()=>gt,updateResendConversationMessage:()=>Rn,updateVideoInfo:()=>rr,uploadMonitor:()=>ir,uploadVideGetResult:()=>dr,uploadVideo:()=>gr,uploadVideoGetToken:()=>cr,watchDeleteMessage:()=>wo,watchEvaluation:()=>Re,watchFaqHistorySagas:()=>Oa,watchFetchMessage:()=>Gt,watchFill:()=>lt,watchNewConversationMessageQueue:()=>ao,watchOffline:()=>Pn,watchOldConversationMessageQueue:()=>oo,watchReceive:()=>lo,watchReplySaga:()=>dn,watchResend:()=>vn,watchSend:()=>js,watchSendWithCancel:()=>Ns,watchTranslate:()=>ia});var n=K(8156),r=K.n(n),s=K(5447);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function g(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var h=K(4756),m=K(1501),E=K.n(m),v=K(3162),S=K.n(v),_=K(2167),b=K.n(_),y=K(4236),C=K.n(y),x=K(2779),M=K.n(x),I=K(3202),O=K.n(I),w=K(1855),T=K(2511),B=K(6359),k=K.n(B),R=K(3379),P=K.n(R),D=K(7795),N=K.n(D),j=K(569),F=K.n(j),L=K(3565),q=K.n(L),G=K(9216),U=K.n(G),H=K(4589),Y=K.n(H),V=K(1337),z={};z.styleTagTransform=Y(),z.setAttributes=q(),z.insert=F().bind(null,"head"),z.domAPI=N(),z.insertStyleElement=U(),P()(V.Z,z);const W=V.Z&&V.Z.locals?V.Z.locals:void 0;var Z=r().createContext({});Z.displayName="ImgCacheContext";var Q=K(5600),X=K(907),$=K(181);function ee(e){return function(e){if(Array.isArray(e))return(0,X.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,$.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var te=K(8252),ne=K(7757),re=K.n(ne),se=K(4944),ae=K(459);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}w.MessageTypes.MSG_TYPE_OFFER,w.MessageTypes.MSG_TYPE_ORDER;var ce,le,ue=w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,de={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment"},pe=function(e){var t=e.id,n=e.recipientID,r=e.message,s=e.redirectInfo,a=e.conversationId,o=e.entryPoint,i=e.replyToMessageId,c=e.shopId,l=t||(0,ae.v4)(),u=r.content,d=r.type,p=r.textContent,f={id:l,type:d,content:u,isFaking:r.isFaking,to_id:n,shop_id:c,request_id:l,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(i&&(f.content=ie(ie({},f.content),{},{quoted_msg_id:i})),p&&d===ue&&(f.textContent=p),o&&o.type&&o.conversationId===a?f.entry_point=de[o.type]:f.entry_point="direct_chat_entry_point",s){var g=s.orderId,A=s.productId,h=s.conversationId,m=s.shopId;if(parseInt(a)===parseInt(h)){if(f.conversation_id=a,g){var E=parseInt(g);f=ie(ie({},f),{},{order_id:E,source_content:{order_id:E,shop_id:m},source_type:"order"})}if(A){var v=parseInt(A);f=ie(ie({},f),{},{product_id:v,source_content:{product_id:v,shop_id:m},source_type:"product"})}}}return f},fe=function(e,t){return e===t?0:(0,w.greaterThan)(e,t)?1:-1},ge=w.MessageTypes.MSG_TYPE_ITEM_LIST,Ae=w.MessageTypes.MSG_TYPE_ADD_ON_DEAL,he=w.MessageTypes.MSG_TYPE_BUNDLE_DEAL,me=w.MessageTypes.MSG_TYPE_FLASH_SALE,Ee=(o(ce={},ge,{listKey:"chat_product_infos",cleaner:T.itemListDetailCleaner}),o(ce,Ae,{listKey:"add_on_deal_item_list",cleaner:T.addOnDealItemDetailCleaner}),o(ce,he,{listKey:"bundle_deal_item_list",cleaner:T.bundleDealItemDetailCleaner}),o(ce,me,{listKey:"flash_sale_item",cleaner:T.flashSaleItemDetailCleaner}),ce),ve=[ge,Ae,he,me],Se=function(e){var t=e.type,n=e.content,r=e.country,s=n.shop_id;if(Ee[t]){var a=Ee[t],o=a.listKey,i=a.cleaner,c=e.content[o];e.content[o]=c.slice(0,w.MAX_SHOWING_ITEM_COUNT).map((function(e){return i(e,r,s)}))}if(t===ge){var l=n.chat_product_infos;e.content.exceedMaxCount=l.length>w.MAX_SHOWING_ITEM_COUNT}else if(t===Ae){var u=n.add_on_deal_rule;e.content.add_on_deal_rule=(0,T.addOnDealRuleCleaner)(u,r)}else if(t===he){var d=n.bundle_rule;e.content.bundle_rule=(0,T.bundleDealRuleCleaner)(d,r)}},_e=function(e){Array.isArray(e)?e.forEach((function(e){Se(e),e.quoted_msg&&Se(e.quoted_msg)})):(Se(e),e.quoted_msg&&Se(e.quoted_msg))};!function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.FILL_MESSAGE_REQUESTED="FILL_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.SHOW_TRANSLATE_FEEDBACK="SHOW_TRANSLATE_FEEDBACK",e.SEND_TRANSLATE_FEEDBACK="SEND_TRANSLATE_FEEDBACK",e.UPDATE_MESSAGE_FILL_STATUS_MAP="UPDATE_MESSAGE_FILL_STATUS_MAP",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.UPDATE_HAS_CONFLICT="UPDATE_HAS_CONFLICT",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED"}(le||(le={}));var be=re().mark(Oe),ye=re().mark(we),Ce=re().mark(ke),xe=re().mark(Re);function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){var r,s;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,se.select)((0,T.rateCardSelector)(e));case 2:if((r=n.sent)&&r.status!==w.EvaluationStatus.UNRATED){n.next=8;break}return s={subServer:"workbenchapi",resource:"rating_card",id:e},n.next=7,(0,se.call)(T.fetch,Ie(Ie({},s),{},{params:t}));case 7:r=n.sent;case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),be)}function we(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A;return re().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.ids,n=e.shopId,r=e.type,s=Array.isArray(t)?t:[t],a={},"0"!==n&&(a.shop_id=n),h.next=6,(0,se.select)(T.isSubAccountSelector);case 6:return o=h.sent,h.next=9,(0,se.select)(T.currentUserShopIdSelector);case 9:if(h.sent===parseInt(n)||o){h.next=23;break}return i=[],s.forEach((function(e){return i.push((0,se.call)(Oe,e,a,r))})),h.next=15,(0,se.all)(i);case 15:if(c=h.sent,"rating_card"!==r){h.next=20;break}return l=(0,T.normalize)("rateCards",c),u=l.entities,h.next=20,(0,se.put)((0,T.updateEntities)({entities:u}));case 20:return h.abrupt("return",c);case 23:return d="rating_cards",a.ids="[".concat(s.join(","),"]"),h.next=27,(0,se.call)(T.fetch,{resource:d,params:a});case 27:if(p=h.sent,f=p[d],"rating_card"!==r){h.next=33;break}return g=(0,T.normalize)("rateCards",p[d]),A=g.entities,h.next=33,(0,se.put)((0,T.updateEntities)({entities:A}));case 33:return h.abrupt("return",f||[]);case 34:case"end":return h.stop()}}),ye)}var Te,Be=(0,te.createActions)(o({},le.EVALUATION_REQUESTED,(function(e){var t=e.messageId,n=e.grade,r=e.reason;return{messageId:t,grade:n,reason:void 0===r?[]:r,otherReason:e.otherReason}}))).evaluationRequested;function ke(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A;return re().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.messageId,r=t.grade,s=t.reason,a=t.otherReason,h.next=3,(0,se.select)((0,T.getMessageSelector)(n));case 3:return o=h.sent,i=o.from_shop_id,c=o.textContent,l=c.id,h.prev=6,u={grade:r,reason:s,other_reason:a},d={subServer:"workbenchapi",parent:"rating_card"},i&&(u.shop_id=i),h.next=12,(0,se.call)(T.fetch,Ie(Ie({method:"PUT"},d),{},{parentId:l,payload:JSON.stringify(u)}));case 12:return p=h.sent,h.next=15,(0,se.put)((0,T.updateRecord)({name:"rateCards",id:l,record:{grade:r,status:w.EvaluationStatus.RATED,reason_ids:p.reason_ids,other_reason:p.other_reason}}));case 15:h.next=25;break;case 17:return h.prev=17,h.t0=h.catch(6),g=Date.now(),null!==h.t0&&void 0!==h.t0&&null!==(f=h.t0.error)&&void 0!==f&&f.error_code&&((A=h.t0.error.error_code)===w.EvaluationErrorCode.RATED&&(g=w.EvaluationStatus.RATED),A===w.EvaluationErrorCode.EXPIRED&&(g=w.EvaluationStatus.EXPIRED)),h.next=23,(0,se.put)((0,T.updateRecord)({name:"rateCards",id:l,record:{status:g}}));case 23:return h.next=25,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:h.t0}));case 25:case"end":return h.stop()}}),Ce,null,[[6,17]])}function Re(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeLatest)(Be,ke);case 2:case"end":return e.stop()}}),xe)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=re().mark(ot),je=re().mark(it),Fe=re().mark(ct),Le=re().mark(lt),qe="source-",Ge="source",Ue=w.MessageFillStatus.FILLED,He=w.MessageFillStatus.FAILED,Ye=w.MessageFillStatus.FILLING,Ve=w.MessageTypes.MSG_TYPE_PRODUCT,ze=w.MessageTypes.MSG_TYPE_ORDER,We=w.MessageTypes.MSG_TYPE_OFFER,Ze=w.MessageTypes.MSG_TYPE_VOUCHER,Qe=w.MessageTypes.MSG_TYPE_FEED_STORY,Xe=w.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,Ke=w.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,Je=w.MessageTypes.MSG_TYPE_SHOPPING_CART,$e=w.MessageTypes.MSG_TYPE_RATE_CARD,et=w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,tt=[Ve,ze,We,Ze,$e,Qe,Xe,Ke,Je,et],nt=(0,te.createActions)((o(Te={},le.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e){return{status:e.status,messageIds:e.messageIds}})),o(Te,le.FILL_MESSAGE_REQUESTED,(function(e){return{message:e.message,isSource:e.isSource}})),Te)),rt=nt.updateMessageFillStatusMap,st=nt.fillMessageRequested,at=function(e,t,n){var r,s=t["".concat(e,"_id")];return e===Xe&&(s=t.order_id),e===$e?t.card_id:e===et?null==t||null===(r=t.bot_order_info)||void 0===r?void 0:r.order_id:s||n};function ot(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S=arguments;return re().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=S.length>1&&void 0!==S[1]?S[1]:{},n=t.sync,r=void 0!==n&&n,s=t.reFillType,a=e[0].conversation_id,_.next=5,(0,se.select)(T.isSubAccountSelector);case 5:return o=_.sent,_.next=8,(0,se.select)(T.curConvsMessageSelector);case 8:return i=_.sent,_.next=11,(0,se.select)(T.currentUserIdSelector);case 11:return c=_.sent,_.next=14,(0,se.select)((0,T.getConversationShopId)(a));case 14:return l=_.sent,_.next=17,(0,se.select)(T.messageFillStatusMapSelector);case 17:return u=_.sent,d={},p=[],f=[],s?(g=e[0],A="".concat(s===Ge?qe:"").concat(g.id),d={messageId:[A]},p=[A]):e.forEach((function(e){var t=e.type,n=e.content,r=e.id,s=e.source_type,a=e.source_content,g=void 0===a?{}:a,A=i.find((function(e){var t=e.id;return r===t})),h=!1,m=!1;if(null!=A&&A.textContent){h=!0;var E=A.textContent,v=void 0===E?{}:E;switch(t){case $e:m=v.status===w.EvaluationStatus.UNRATED;break;case We:m=v.status===w.OfferStatus.PENDING;break;case Ke:m=!1;break;default:tt.includes(t)&&(m=!0)}}else h=u[r]===Ye;if(null!=A&&A.sourceContent&&(m=!0),!h||m){var S;if(s&&g){var _=g["".concat(s,"_id")];if(_&&![-1,0].includes(_)){var b="".concat(qe).concat(r);m?f.push(b):p.push(b),S=at(s,g,b),(d[S]||(d[S]=[]))&&d[S].push(b)}}if(tt.includes(t)&&n){var y=!1;switch(t){case ze:y=o&&l!==n.shop_id;break;case $e:y=c!==e.to_id}y||(m?f.push(r):p.push(r),S=at(t,n,r),(d[S]||(d[S]=[]))&&d[S].push(r))}}})),_.next=24,(0,se.put)(rt({status:Ye,messageIds:p}));case 24:if(h=Object.keys(d),!r){_.next=32;break}return m=[],h.forEach((function(t){var n=d[t];m.push((0,se.call)(it,e,n,f))})),_.next=30,(0,se.all)(m);case 30:_.next=39;break;case 32:if(!h.length){_.next=39;break}return E=h.shift(),v=d[E],_.next=37,(0,se.spawn)(it,e,v,f);case 37:_.next=32;break;case 39:case"end":return _.stop()}}),Ne)}function it(e,t,n){var r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O;return re().wrap((function(B){for(;;)switch(B.prev=B.next){case 0:a=t[0],o=a,(i=a.includes(qe))&&(o=a.split(qe)[1]),c=e.find((function(e){return e.id===o})),u=(l=c).content,d=l.type,p=l.source_type,f=l.source_content,h=(A=i?f:u)["".concat(g=i?p:d,"_id")],(m=d===et?null==u||null===(r=u.bot_order_info)||void 0===r?void 0:r.shop_id:A.shop_id)||(m=c.to_shop_id),B.prev=11,B.t0=g,B.next=B.t0===Ve?15:B.t0===ze||B.t0===Xe||B.t0===et?19:B.t0===We?23:B.t0===Ze?27:B.t0===Qe?31:B.t0===Je?35:B.t0===$e?39:B.t0===Ke?44:48;break;case 15:return B.next=17,(0,se.call)(T.showProduct,{payload:{id:h,shopId:m}});case 17:return E=B.sent,B.abrupt("break",48);case 19:return B.next=21,(0,se.call)(T.showOrder,{payload:{id:h||u.order_id||(null==u||null===(s=u.bot_order_info)||void 0===s?void 0:s.order_id),shopId:m,isChatbotOrder:g===et}});case 21:return E=B.sent,B.abrupt("break",48);case 23:return B.next=25,(0,se.call)(T.showOffer,{payload:{id:h,shopId:m}});case 25:return E=B.sent,B.abrupt("break",48);case 27:return B.next=29,(0,se.call)(T.showVoucher,{shopId:m,id:h});case 29:return E=B.sent,B.abrupt("break",48);case 31:return B.next=33,(0,se.call)(T.showFeedStory,{payload:{id:h,creatorId:u.creator_id}});case 33:return E=B.sent,B.abrupt("break",48);case 35:return B.next=37,(0,se.call)(T.showCartReminder,{cartItems:u.cart_items,shopId:m});case 37:return E=B.sent,B.abrupt("break",48);case 39:return B.next=41,(0,se.call)(we,{shopId:m,ids:u.card_id,type:d});case 41:return v=B.sent,E=v[0],B.abrupt("break",48);case 44:return B.next=46,(0,se.call)(T.showFaqHistory,{payload:{id:o,ids:u.messages.slice(0,3)}});case 46:return E=B.sent,B.abrupt("break",48);case 48:if(E){B.next=52;break}return B.next=51,(0,se.put)(rt({status:He,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 51:return B.abrupt("return");case 52:S={},_=ee(t);case 54:if(!_.length){B.next=64;break}return b=_.shift(),B.next=58,(0,se.select)((0,T.getMessageSelector)(b));case 58:y=B.sent,C={},x={type:g,content:E},b.includes(qe)&&!(0,w.simpleEqualCheck)(x,null==y?void 0:y.sourceContent)?(C=S[b.split(qe)[1]]||{},S[b.split(qe)[1]]=De(De({},C),{},{sourceContent:x})):(0,w.simpleEqualCheck)(E,null==y?void 0:y.textContent)||(C=S[b]||{},S[b]=De(De({},C),{},{textContent:E})),B.next=54;break;case 64:return B.next=66,(0,se.put)((0,T.batchUpdateRecord)({name:"messages",records:S}));case 66:M=e.filter((function(e){var n;return t.includes(null===(n=e.quoted_msg)||void 0===n?void 0:n.id)}));case 67:if(!M.length){B.next=76;break}return I=M.shift(),B.next=71,(0,se.select)((0,T.getMessageSelector)(I.quoted_msg.id));case 71:return O=B.sent,B.next=74,(0,se.put)((0,T.updateRecord)({name:"messages",id:I.id,record:{quoted_msg:De({},O)}}));case 74:B.next=67;break;case 76:return B.next=78,(0,se.put)(rt({status:Ue,messageIds:t}));case 78:B.next=84;break;case 80:return B.prev=80,B.t1=B.catch(11),B.next=84,(0,se.put)(rt({status:He,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 84:case"end":return B.stop()}}),je,null,[[11,80]])}function ct(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.message,r=t.isSource,s.next=3,(0,se.call)(ot,[n],{reFillType:r?Ge:"content"});case 3:case"end":return s.stop()}}),Fe)}function lt(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(st,ct);case 2:case"end":return e.stop()}}),Le)}const ut=o({},le.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e,t){var n=t.payload,r=n.status,s=n.messageIds,a=Object.assign({},e.messageFillStatusMap);return s.forEach((function(e){r===Ue?delete a[e]:a[e]=r})),De(De({},e),{},{messageFillStatusMap:De({},a)})}));function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=(0,te.createActions)(o({},le.UPDATE_MESSAGES_RELATED,(function(e){return{conversationId:e.conversationId,updateKey:e.updateKey,updateValue:e.updateValue}}))),gt=ft.updateMessagesRelated;const At=o({},le.UPDATE_MESSAGES_RELATED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.updateKey,a=n.updateValue,i=e.messagesRelatedMap,c=i[r]||{},l=c[s];return pt(pt({},e),{},{messagesRelatedMap:pt(pt({},i),{},o({},r,pt(pt({},c),{},o({},s,"object"===f(l)&&a&&"object"===f(a)?pt(pt({},l),a):a))))})}));var ht,mt=["offset"];function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St=re().mark(Pt),_t=re().mark(Dt),bt=re().mark(Nt),yt=re().mark(jt),Ct=re().mark(Ft),xt=re().mark(Lt),Mt=re().mark(qt),It=re().mark(Gt),Ot=(0,te.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList,needNaviateToUnRead:e.needNaviateToUnRead}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId,shouldAutoFetch:e.shouldAutoFetch}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},SET_SECURITY_TIPS_MESSAGE:function(e){return{messageId:e.messageId,conversationId:e.conversationId}}}),wt=Ot.fetchMessagesRequested,Tt=Ot.fetchMessagesSucceeded,Bt=Ot.updateFetchMessagesRequestedStatus,kt=Ot.setSecurityTipsMessage,Rt=function(e){var t=e.conversationId,n=e.shopId,r=e.offset,s=e.limit,a=void 0===s?20:s,o=e.direction,i=void 0===o?"older":o,c=(e.source,{shop_id:n,offset:r,limit:"around"===i?Math.ceil(a/2):a,direction:i});return new Promise((function(e,n){(0,T.fetch)({parent:"conversations",parentId:t,resource:"messages",params:c}).then((function(t){var n=t.messages,r=void 0===n?[]:n;_e(r),e({messages:r,limit:a})})).catch((function(e){n(e)}))}))};function Pt(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.msgId,n=e.shopId,s.next=3,(0,se.call)(T.fetch,{parent:"conversation",resource:"get_messages",params:{message_id:t,shop_id:n,limit:10,direction:"around"}});case 3:return r=s.sent,_e((null==r?void 0:r.get_messages)||[]),s.abrupt("return",r);case 6:case"end":return s.stop()}}),St)}function Dt(e,t){var n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,se.select)((0,T.getConvsMessagesRelatedSelector)(e));case 2:return r=s.sent,s.abrupt("return",null===(n=r.preloaded)||void 0===n?void 0:n[t]);case 4:case"end":return s.stop()}}),_t)}function Nt(e){var n,r,s,a,i;return re().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,c.next=3,(0,se.call)(Lt,{payload:vt(vt({},n),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(r=c.sent)){c.next=21;break}return s=r.offset,a=t(r,mt),i=n.conversationId,c.next=9,(0,se.call)(Dt,i,s);case 9:if(c.sent!==w.FetchMessageStatus.FETCHING){c.next=19;break}return c.next=13,(0,se.put)(Tt(vt({},a)));case 13:return c.next=15,(0,se.put)(gt({conversationId:i,updateKey:w.MessagesRelatedKey.PRELOADED,updateValue:o({},s,null)}));case 15:return c.next=17,(0,se.fork)(Nt,{payload:n});case 17:c.next=21;break;case 19:return c.next=21,(0,se.put)(gt({conversationId:i,updateKey:w.MessagesRelatedKey.PRELOADED,updateValue:o({},s,a)}));case 21:case"end":return c.stop()}}),bt)}function jt(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.reset||"around"===e.direction){a.next=8;break}return a.next=3,(0,se.select)((function(e){return e.messageReducer}));case 3:return t=a.sent,n=t.messagesRelatedMap,r=e.conversationId,s=n[r]||{},a.abrupt("return",0===(s.all||[]).length);case 8:return a.abrupt("return","older"===e.direction);case 9:case"end":return a.stop()}}),yt)}function Ft(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,jt(t);case 3:if(!n.sent){n.next=13;break}return n.next=7,(0,se.call)(Lt,{payload:t});case 7:if(!n.sent){n.next=11;break}return n.next=11,(0,se.fork)(Nt,{payload:t});case 11:n.next=15;break;case 13:return n.next=15,(0,se.call)(Lt,{payload:t});case 15:case"end":return n.stop()}}),Ct)}function Lt(e){var t,n,r,s,a,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O,B,k,R,P,D,N,j;return re().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:return t=e.payload,n=t.conversationId,r=t.reset,s=t.direction,a=t.messageId,i=t.source,c=t.isPreload,l=t.shouldFillSync,u=t.messageList,d=t.needNaviateToUnRead,F.prev=1,F.next=4,(0,se.select)((function(e){return e.conversationReducer}));case 4:return p=F.sent,f=p.persist,F.next=8,(0,se.select)((0,T.getConversationShopId)(n));case 8:return g=F.sent,F.next=11,(0,se.select)((function(e){return e.messageReducer}));case 11:if(A=F.sent,h=A.messagesRelatedMap,m=h[n]||{},!r||"around"===s){F.next=20;break}E=0,s="older",v=!0,F.next=33;break;case 20:F.t0=s,F.next="older"===F.t0?23:"latest"===F.t0?26:"around"===F.t0?29:32;break;case 23:return E=m.oldestMessageId,v=m.hasMoreOlderMessage,F.abrupt("break",33);case 26:return E=m.latestMessageId,v=m.hasMoreLatestMessage,F.abrupt("break",33);case 29:return E=a,v=!0,F.abrupt("break",33);case 32:return F.abrupt("break",33);case 33:if(void 0!==v){F.next=40;break}return F.next=36,(0,se.select)(T.messageHttpStatusSelector);case 36:F.sent.includes("failed")&&(s="older"),F.next=42;break;case 40:if(v){F.next=42;break}return F.abrupt("return");case 42:if(c){F.next=45;break}return F.next=45,(0,se.put)(Bt({status:r||"around"===s?w.DataFetchStatus.INIT_PENDING:w.DataFetchStatus.PENDING}));case 45:if(!c){F.next=50;break}return F.next=48,(0,se.put)(gt({conversationId:n,updateKey:w.MessagesRelatedKey.PRELOADED,updateValue:o({},E,w.FetchMessageStatus.PRELOADING)}));case 48:F.next=66;break;case 50:return F.next=52,(0,se.call)(Dt,n,E);case 52:if(!(b=F.sent)){F.next=66;break}if(b!==w.FetchMessageStatus.PRELOADING){F.next=60;break}return F.next=57,(0,se.put)(gt({conversationId:n,updateKey:w.MessagesRelatedKey.PRELOADED,updateValue:o({},E,w.FetchMessageStatus.FETCHING)}));case 57:return F.abrupt("return",!1);case 60:if(b===w.FetchMessageStatus.FETCHING){F.next=66;break}return F.next=63,(0,se.put)(Tt(vt({},b)));case 63:return F.next=65,(0,se.put)(gt({conversationId:n,updateKey:w.MessagesRelatedKey.PRELOADED,updateValue:o({},E,null)}));case 65:return F.abrupt("return",!0);case 66:if(!u||!u.length){F.next=71;break}S=u,_=20,F.next=76;break;case 71:return F.next=73,(0,se.call)(Rt,{conversationId:n,shopId:g,offset:E,direction:s,source:i});case 73:y=F.sent,S=y.messages,_=y.limit;case 76:if(S.sort((function(e,t){return t.id-e.id})),!d||!S.length){F.next=85;break}return C=S[0].id,F.next=81,(0,se.call)(Rt,{conversationId:n,shopId:g,offset:C,direction:"latest",source:i});case 81:x=F.sent,(M=x.messages).sort((function(e,t){return t.id-e.id})),S=M.concat(S);case 85:if(I=S.map((function(e){return e.id})),!S.length){F.next=96;break}return O=ee(S),S.forEach((function(e){var t=e.quoted_msg;if(t){if(O.some((function(e){return e.id===t.id}))||(0,w.isDeletedMessage)(t))return;O=[].concat(ee(O),[t])}})),F.next=91,(0,se.select)(T.messageEntitiesSelector);case 91:return B=F.sent,F.next=94,(0,se.call)(T.updateOrReplaceAction,B,O,"messages",["content"]);case 94:return F.next=96,(0,se.call)(ot,O,{isSync:l});case 96:if(k=new Map,R=S.reduce((function(e,t){var n=t.request_id,r=t.id;return e.has(n)||e.set(n,r),e}),k),P={reset:r,limit:_,offset:E,direction:s,messageIds:I,conversationId:n,persist:f,status:w.DataFetchStatus.SUCCEED,messageRequestIds:R},!c){F.next=101;break}return F.abrupt("return",P);case 101:return D=!1,(N=m.cachedLatestId)||(N=(m.all||[])[0],P.cachedLatestId=N),N&&r&&(j=I[I.length-1]||E,(0,w.greaterThan)(j,N)?D=!0:P.cachedLatestId=null),P.shouldAutoFetch=D,F.next=108,(0,se.put)(Tt(P));case 108:if(!D){F.next=111;break}return F.next=111,(0,se.fork)(Lt,{payload:{direction:"older",conversationId:n}});case 111:if(!("around"===s||u&&u.length)||!a){F.next=119;break}return T.EventBus.emit("scrollToMessage",a),F.next=115,(0,se.select)(T.isNavigateToUnreadMessageSelector);case 115:if(!F.sent){F.next=119;break}return F.next=119,(0,se.put)((0,T.setNavigateToUnreadMessageId)({navigateToUnreadMessageId:a}));case 119:return F.abrupt("return",P);case 122:if(F.prev=122,F.t1=F.catch(1),c){F.next=127;break}return F.next=127,(0,se.put)(Bt({status:r?w.DataFetchStatus.INIT_FAILED:w.DataFetchStatus.FAILED}));case 127:case"end":return F.stop()}}),xt,null,[[1,122]])}function qt(e){var t,n,r,s,a,o,i,c,l,u;return re().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,n=t.conversationId,"older"===t.direction){d.next=4;break}return d.abrupt("return");case 4:return d.next=6,(0,se.select)((0,T.getConversationShopId)(n));case 6:return r=d.sent,d.next=9,(0,se.select)((0,T.shopSelector)(r));case 9:if(s=d.sent,a=s?s.country:(0,w.getRuntimeRegion)(),!["br","tw","my"].includes(a.toLowerCase())){d.next=33;break}return d.next=14,(0,se.select)(T.messagesRelatedMapSelector);case 14:if(o=d.sent,!(i=o[n])){d.next=33;break}if(!i.securityTipsMessageId){d.next=19;break}return d.abrupt("return");case 19:if(i.hasMoreOlderMessage){d.next=33;break}return d.next=22,(0,se.select)(T.messageEntitiesSelector);case 22:if(c=d.sent,l=(0,w.makeSecurityTipsMessage)((0,ae.v4)(),n),!i.oldestMessageId){d.next=29;break}return d.next=27,(0,se.select)((0,T.getMessageSelector)(i.oldestMessageId));case 27:(u=d.sent)&&(l.created_timestamp=u.created_timestamp);case 29:return d.next=31,(0,se.call)(T.updateOrReplaceAction,c,[l],"messages");case 31:return d.next=33,(0,se.put)(kt({messageId:l.id,conversationId:n}));case 33:case"end":return d.stop()}}),Mt)}function Gt(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(wt,Ft);case 2:return e.next=4,(0,se.takeEvery)(Tt,qt);case 4:case"end":return e.stop()}}),It)}const Ut=(o(ht={},Tt,(function(e,t){var n=t.payload,r=n.limit,s=n.status,a=n.conversationId,i=n.messageIds,c=n.persist,l=n.messageRequestIds,u=n.direction,d=n.reset,p=n.cachedLatestId,f=n.shouldAutoFetch,g=e.messagesRelatedMap,A=g[a]||{},h={};switch(u){case"older":h.hasMoreOlderMessage=i.length>=r;break;case"latest":h.latestMessageId=i[0],h.hasMoreLatestMessage=i.length>=r;break;case"around":h.latestMessageId=i[0],h.hasMoreOlderMessage=!0,h.hasMoreLatestMessage=!0,A={}}d&&"around"!==u&&(h.hasMoreLatestMessage=!1);var m=(A.all||[]).map((function(e){return l.has(e)?l.get(e):e})),E=A.failed||[],v=function(e,t){for(var n,r=e.length,s=t.length,a=0,o=0,i=new Array(r+s).fill(0);a<r||o<s;)n=a===r?t[o++]:o===s?e[a++]:/^\d+$/.test(e[a])?(0,w.greaterThan)(e[a],t[o])?e[a++]:t[o++]:e[a++],i[a+o-1]=n;return ee(new Set(i))}(m,i);return h.oldestMessageId=f?i[i.length-1]:v[v.length-1],p&&(h.cachedLatestId=p),vt(vt({},e),{},{status:s,messagesRelatedMap:vt(vt({},g),{},o({},a,vt(vt({},A),{},{all:v,failed:E.filter((function(e){return!l.has(e)}))},h))),persist:c})})),o(ht,Bt,(function(e,t){var n=t.payload.status;return vt(vt({},e),{},{status:n})})),o(ht,kt,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageId,a="messagesRelatedMap",i=e[a],c=i[r]||{};return vt(vt({},e),{},o({},a,vt(vt({},i),{},o({},r,vt(vt({},c),{},{securityTipsMessageId:s})))))})),ht);var Ht,Yt=K(885),Vt=K(4672),zt=K(4323).t,Wt=re().mark(dn);function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xt=1500,Kt=(0,te.createActions)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),Jt=Kt.setReplyToMessage,$t=Kt.resetReplyToMessage,en=Kt.scrollToMessage,tn=Kt.setScrollToMessageId,nn=Kt.resetScrollToMessageId,rn=Kt.setInScrollToMessage,sn=Kt.setCurrentConversationReplyToMessage,an=Kt.resetCurrentConversationReplyToMessage,on=re().mark((function e(t){var n,r,s;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,se.select)(T.curMessagesRelatedSelector);case 3:if(e.sent.all.includes(n)){e.next=14;break}return e.next=7,(0,se.select)(T.currentConversationSelector);case 7:return r=e.sent,e.next=10,(0,se.call)(Lt,{payload:{conversationId:r.id,direction:"around",reset:!0,messageId:n,shouldFillSync:!0}});case 10:return e.next=12,(0,se.put)(rn({inScrollToMessage:!0}));case 12:e.next=22;break;case 14:return e.next=16,(0,se.select)((0,T.getMessageSelector)(n));case 16:if(s=e.sent,!(0,w.isDeletedMessage)(s)){e.next=21;break}return e.next=20,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"fail",message:zt("message.notfound")}}));case 20:return e.abrupt("return");case 21:T.EventBus.emit("scrollToMessage",n);case 22:return e.next=24,(0,se.put)(tn({messageId:n}));case 24:return e.next=26,(0,se.delay)(Xt);case 26:return e.next=28,(0,se.select)(T.scrollToMessageIdSelector);case 28:if(e.sent!==n){e.next=32;break}return e.next=32,(0,se.put)(nn());case 32:case"end":return e.stop()}}),e)})),cn=re().mark((function e(t){var n,r;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,se.select)(T.currentConversationIdSelector);case 3:return r=e.sent,e.next=6,(0,se.put)(sn({currentConversationId:r,messageId:n}));case 6:case"end":return e.stop()}}),e)})),ln=re().mark((function e(){var t;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.select)(T.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,(0,se.put)(an({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)}));const un=(o(Ht={},sn,(function(e,t){var n=t.payload,r=n.currentConversationId,s=void 0===r?"":r,a=n.messageId,i=void 0===a?"":a;return s&&i?Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{toMessageId:Qt(Qt({},e.reply.toMessageId),{},o({},s,i))})}):e})),o(Ht,an,(function(e,t){var n=t.payload.currentConversationId,r=void 0===n?"":n;return r?Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{toMessageId:Qt(Qt({},e.reply.toMessageId),{},o({},r,""))})}):e})),o(Ht,tn,(function(e,t){return Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),o(Ht,nn,(function(e){return Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{scrollToMessageId:""})})})),o(Ht,rn,(function(e,t){return Qt(Qt({},e),{},{reply:Qt(Qt({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),Ht);function dn(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(en,on);case 2:return e.next=4,(0,se.takeEvery)($t,ln);case 4:return e.next=6,(0,se.takeEvery)(Jt,cn);case 6:case"end":return e.stop()}}),Wt)}var pn,fn,gn=re().mark(En),An=re().mark(vn),hn=(0,te.createActions)(o({},le.RESEND_MESSAGE_REQUESTED,(function(e){return{conversationId:e.conversationId,message:e.message}}))),mn=hn.resendMessageRequested;function En(e){var t,n,r,s,a;return re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,o.next=3,(0,se.select)((0,T.getConversation)(n));case 3:if("closed"!==o.sent.status){o.next=9;break}return o.next=8,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({type:"conversation-closed-tip"}));case 8:case 13:return o.abrupt("return");case 9:if(s=r.type,a=r.content,s!==w.MessageTypes.MSG_TYPE_VIDEO||a.video_url){o.next=14;break}return o.next=13,(0,se.put)(_s({conversationId:n,message:r,isResend:!0}));case 14:return o.next=16,(0,se.put)(fs({conversationId:n,messages:[r],more:{isResend:!0}}));case 16:case"end":return o.stop()}}),gn)}function vn(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(mn,En);case 2:case"end":return e.stop()}}),An)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=re().mark(kn),yn=re().mark(Rn),Cn=re().mark(Pn);function xn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Mn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var In=(0,te.createActions)((o(pn={},le.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),o(pn,le.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),o(pn,le.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),o(pn,le.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),pn)),On=In.sendMessagesFailedByOffline,wn=In.resetMessagesFailedByOffline,Tn=In.resendOfflineMessagesOnce,Bn=In.resendOfflineMessagesOnceSucceed;function kn(){var e,t,n,r,s,a,o,i,c;return re().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,se.select)(T.offlineMessagesSelector);case 2:e=l.sent,t=Object.entries(e),n=[],r=re().mark((function e(){var t,r,o,i,c,l;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[s],r=(0,Yt.Z)(t,2),o=r[0],i=r[1],e.next=4,(0,se.select)((0,T.getMessagesSelector)(i));case 4:c=e.sent,l=i.map((function(e,t){return{conversationId:o,requestIds:[e],messages:[c[t]]}})).filter((function(e){return e.messages[0]})),n=n.concat(l);case 7:case"end":return e.stop()}}),e)})),s=0,a=t;case 7:if(!(s<a.length)){l.next=12;break}return l.delegateYield(r(),"t0",9);case 9:s++,l.next=7;break;case 12:o=xn(n),l.prev=13,o.s();case 15:if((i=o.n()).done){l.next=23;break}return c=i.value,l.next=19,Bs(c);case 19:return l.next=21,(0,se.delay)(400);case 21:l.next=15;break;case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(13),o.e(l.t1);case 28:return l.prev=28,o.f(),l.finish(28);case 31:return l.next=33,(0,se.put)(wn());case 33:case"end":return l.stop()}}),bn,null,[[13,25,28,31]])}function Rn(e){var t,n;return re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.conversationId,n=e.messageIds,r.next=3,(0,se.put)(Bn({conversationId:t,messageIds:n}));case 3:case"end":return r.stop()}}),yn)}function Pn(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(Tn,kn);case 2:case"end":return e.stop()}}),Cn)}window.addEventListener("judge-online",(function(){Vt.store.dispatch(Tn())}));const Dn=(o(fn={},le.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.offlineMessages,i=(a[r]||[]).concat(s);return _n(_n({},e),{},{offlineMessages:_n(_n({},a),{},o({},r,ee(new Set(i))))})})),o(fn,le.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return _n(_n({},e),{},{offlineMessages:{}})})),o(fn,le.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageIds,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).filter((function(e){return!s.includes(e)})),l=(i.failed||[]).filter((function(e){return!s.includes(e)})),u=(i.sending||[]).filter((function(e){return!s.includes(e)}));return _n(_n({},e),{},{messagesRelatedMap:_n(_n({},a),{},o({},r,_n(_n({},i),{},{all:c,failed:l,sending:u})))})})),fn);function Nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fn=(0,te.createActions)(o({},le.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))),Ln=Fn.deleteConversationMessageHash;const qn=o({},le.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var n=t.payload.conversationId,r=e.messagesRelatedMap;return delete r[n],jn(jn({},e),{},{messagesRelatedMap:jn({},r)})}));var Gn,Un,Hn=K(9977),Yn=K.n(Hn),Vn=re().mark(zn);function zn(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.file,n=e.onProgress,r=e.serviceList,s=new(Yn())(r),a.next=4,s.upload({mediaFile:t,mediaType:Hn.MediaType.video});case 4:return s.on(Hn.UploaderEvents.mediaProgress,(function(e){return n(.95*e.percent*100)})),a.abrupt("return",s);case 6:case"end":return a.stop()}}),Vn)}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=re().mark(cr),Xn=re().mark(lr),Kn=re().mark(ur),Jn=re().mark(dr),$n=re().mark(gr),er=function(e){return e?e/3*1e3:8e3},tr=function(e){var t="http:";return e.startsWith(t)?e.replace(t,"https:"):e},nr=(0,te.createActions)((o(Gn={},le.UPDATE_VIDEO_INFO,(function(e){var t=e.id,n=e.info;return{id:t,info:void 0===n?{}:n}})),o(Gn,le.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),Gn)),rr=nr.updateVideoInfo,sr=nr.deleteVideoInfo,ar="get_config_error",or="query_result_error";function ir(e,t){(0,T.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function cr(e){var t,n,r,s,a;return re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,se.select)((0,T.getConversationShopId)(e));case 3:return t=o.sent,o.next=6,(0,se.call)(T.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 6:if(n=o.sent,r=n.is_allowed,s=n.data,a=void 0===s?{}:s,r){o.next=14;break}return o.next=13,(0,se.call)(ir,ar,"Not Allowed");case 13:return o.abrupt("return",null);case 14:return o.abrupt("return",a);case 17:return o.prev=17,o.t0=o.catch(0),o.next=21,(0,se.call)(ir,ar);case 21:return o.abrupt("return",!1);case 22:case"end":return o.stop()}}),Qn,null,[[0,17]])}function lr(e){var t,n;return re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=performance.now(),r.next=3,zn(e);case 3:return n=r.sent,r.next=6,n.done().then((function(e){var n=performance.now();return(0,T.collectAsyncTask)(T.ReportPoint.VIDEO_UPLOAD,n-t),{error:!1,data:e}})).catch((function(){return ir("upload_error"),!1}));case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),Xn)}function ur(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,se.call)(T.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,(0,se.call)(ir,"report_upload_error");case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),Kn,null,[[0,6]])}function dr(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,se.call)(T.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,(0,se.call)(ir,or);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}}),Jn,null,[[0,7]])}var pr=function(e){var t=e.video,n=e.thumbnail,r=e.duration;return{video_url:t,thumb_url:n,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(r/1e3)}};function fr(e,t){var n=[];return e.forEach((function(e,r){var s=e.service_id,a=e.token,o=e.upload_domain,i=e.domain,c=e.bucket,l=e.slice_size;n.push({vid:t,bucket:c,sliceSize:l,biz:120,env:"live",country:"VN",serviceID:s,serviceIndex:r,authorization:a,domain:tr(i),uploadDomain:tr(o)})})),n}function gr(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C;return re().wrap((function(x){for(;;)switch(x.prev=x.next){case 0:return t=new Error("upload fail"),n=e.id,r=e.file,s=e.duration,a=e.onProgress,o=void 0===a?function(){return{}}:a,x.next=4,(0,se.select)((0,T.selectVideoInfoByKey)(n));case 4:return i=x.sent,l=(c=i||{}).vid,(u=c.services).forEach((function(e,t){"txcloud"===e.service_id&&u.unshift(u.splice(t,1)[0])})),x.next=9,(0,se.call)(lr,{file:r,serviceList:fr(u,l),onProgress:o});case 9:if(d=x.sent){x.next=12;break}throw t;case 12:if(p=u[0],f=p.service_id,g=p.domain,A="txcloud"===f,h=d.data.video,m=h.md5,E=h.extendId,v=h.url,!A||v){x.next=17;break}throw t;case 17:return x.next=19,(0,se.call)(ur,{vid:l,md5:m,service_id:f,extend_id:E,file_size:r.size,video_url:v||"".concat(g,"/").concat(l,".ori.mp4")});case 19:if(x.sent){x.next=22;break}throw t;case 22:return x.next=24,(0,se.delay)(er(s));case 24:S=180;case 25:if(!(S>0)){x.next=58;break}return x.next=28,(0,se.select)((0,T.selectVideoInfoByKey)(n));case 28:if("successful"!==(i=x.sent).status){x.next=31;break}return x.abrupt("return",pr(i.uploadResult));case 31:if("failed"!==i.status){x.next=35;break}return x.next=34,(0,se.call)(ir,or,"failed");case 34:throw t;case 35:return x.next=37,(0,se.call)(dr,l);case 37:if(_=x.sent,(b=_.status)&&"reported"!==b){x.next=45;break}return x.next=42,(0,se.delay)(3e3);case 42:S-=3,x.next=56;break;case 45:return x.next=47,(0,se.put)(rr({id:n,info:{status:b}}));case 47:if("successful"!==b){x.next=53;break}return(y=performance.getEntriesByName("REPORT_UPLOAD_".concat(l),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(l)),C=performance.getEntriesByName("SERVICE_DONE_".concat(l))[0].startTime-y.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(l)),performance.clearMarks("SERVICE_DONE_".concat(l)),(0,T.collectAsyncTask)(T.ReportPoint.SERVICE_DONE,C)),x.abrupt("return",pr(_));case 53:return x.next=55,(0,se.call)(ir,or,b);case 55:throw t;case 56:x.next=25;break;case 58:return x.next=60,(0,se.call)(ir,"push_timeout",status);case 60:throw t;case 61:case"end":return x.stop()}}),$n)}const Ar=(o(Un={},le.UPDATE_VIDEO_INFO,(function(e,t){var n=t.payload,r=n.id,s=n.info,a=e.videoMap[r]||{};return Zn(Zn({},e),{},{videoMap:Zn(Zn({},e.videoMap),{},o({},r,Zn(Zn({},a),s)))})})),o(Un,le.DELETE_VIDEO_INFO,(function(e,t){var n=t.payload.id,r=e.videoMap;return delete r[n],Zn(Zn({},e),{},{videoMap:Zn({},r)})})),Un);var hr=function(e,t,n){return e===t&&(new Date).getTime()<=n/1e6};function mr(e,t,n,r,s,a,o){try{var i=e[a](o),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,s)}function Er(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function o(e){mr(a,r,s,o,i,"next",e)}function i(e){mr(a,r,s,o,i,"throw",e)}o(void 0)}))}}var vr=!1,Sr=null,_r=((0,w.getRuntimeRegion)()||"").toUpperCase(),br="live"===(0,w.getRuntimeServer)();function yr(e,t){return Cr.apply(this,arguments)}function Cr(){return Cr=Er(re().mark((function e(t,n){var r,s,a,o,i,c,l,u;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vr){e.next=9;break}return vr=!0,e.next=4,Promise.resolve().then(K.t.bind(K,5423,23));case 4:r=e.sent,s=r.createFetchUtils,a=s({locale:_r,isLiveEnv:br,onSecuritySdkError:function(e){return console.log("[onSecuritySdkError]",e)}}),o=a.initSecuritySdk,i=a.post,Sr=i,o({});case 9:return c=n.headers,l=n.body,e.next=12,Sr(t,JSON.parse(l),{headers:c,antiFraudConfig:{deviceFingerPrint:{dataFormatter:function(e){return{re_policy:{dfp_access_f:e}}}},apiProtection:{signatureLevel:1}}});case 12:return u=e.sent,e.abrupt("return",u.__raw);case 14:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}var xr,Mr=K(4323).t,Ir=re().mark(ys),Or=re().mark(Cs),wr=re().mark(xs),Tr=re().mark(Is),Br=re().mark(ws),kr=re().mark(Ts),Rr=re().mark(Bs),Pr=re().mark(Rs),Dr=re().mark(Ps),Nr=re().mark(Ds),jr=re().mark(Ns),Fr=re().mark(js);function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gr,Ur=w.MessageTypes.MSG_TYPE_IMAGE,Hr=w.MessageTypes.MSG_TYPE_TEXT,Yr=w.MessageTypes.MSG_TYPE_VIDEO,Vr=(w.MessageTypes.MSG_TYPE_ITEM_LIST,w.MessageTypes.MSG_TYPE_RATE_CARD),zr=w.MessageTypes.MSG_TYPE_FAQ_QUESTION,Wr=w.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,Zr=w.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,Qr=w.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,Xr=w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,Kr=w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,Jr=w.MessageErrorCode.DEFAULT,$r=w.MessageErrorCode.FORBIDDEN,es=w.MessageErrorCode.LIMITING,ts=w.MessageErrorCode.CUSTOM_ERROR,ns=w.MessageErrorCode.BLACKLIST,rs=w.MessageErrorCode.CANCEL_ORDER,ss=w.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,as=w.MessageErrorCode.EXCEED_DAILY_LIMIT,os=w.MessageErrorCode.UNTRUSTED_NETWORK,is=w.MessageErrorCode.NEED_CAPTCHA,cs=w.MessageErrorCode.DFP_ERROR,ls=w.MessageErrorCode.SPAMMER,us=w.MessageErrorCode.FAQ_EXPIRED,ds=w.MessageErrorCode.FAQ_SESSION_OLD;Gr="mini-sc_redirect";var ps=(0,te.createActions)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,n=e.conversationId,r=e.messages,s=e.more;return{id:t,conversationId:n,messages:r,more:void 0===s?{}:s}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,n=e.requestIds,r=e.isCancelable;return{conversationId:t,requestIds:n,isCancelable:void 0!==r&&r}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,n=e.message,r=e.isResend;return{conversationId:t,message:n,isResend:void 0!==r&&r}}}),fs=ps.sendMessagesRequested,gs=ps.sendMessagesSucceeded,As=ps.sendingMessages,hs=ps.sendMessagesToPending,ms=ps.sendMessagesFailed,Es=ps.abortAllSendingMessages,vs=ps.cancelSendingMessageRequested,Ss=ps.cancelSendingMessageSucceeded,_s=ps.sendVideoMessageRequested;function bs(e,t){return delete e.errorCode,delete e.error,qr(qr({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}function ys(e){var t,n,r,s,a,o,i;return re().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,s=t.isResend,c.next=3,(0,se.call)(cr,n);case 3:if(null!==(a=c.sent)){c.next=8;break}return c.next=7,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"fail",message:Mr("toast.chat_bot_limit")}}));case 7:case 11:return c.abrupt("return");case 8:if(!1!==a){c.next=12;break}return c.next=11,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:null}));case 12:return o=s?r.id:(0,ae.v4)(),i=qr({},a),s&&(i.precent=0),c.next=17,(0,se.put)(rr({id:o,info:i}));case 17:return c.next=19,(0,se.put)(fs({id:o,conversationId:n,messages:[qr(qr({},r),{},{type:Yr})],more:{isResend:s}}));case 19:case"end":return c.stop()}}),Ir)}function Cs(e,t){return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,se.delay)(1e3);case 2:return n.next=4,(0,se.put)(hs({conversationId:e,requestIds:t}));case 4:case"end":return n.stop()}}),Or)}function xs(e,t){var n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m;return re().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(n=e.type,r=e.request_id,s=e.content,a=s.url,o=s.file,i=s.duration_seconds,c=s.video_url,l=n===Yr,E.prev=2,n!==Ur||a){E.next=24;break}return(u=new window.FormData).append("file",o),u.append("conversation_id",t),E.next=9,(0,se.call)(T.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:u});case 9:d=E.sent,p=d.url,f=d.thumbnail,g=d.thumb_width,A=d.thumb_height,h=d.file_server_id,e.content.url_hash=p.split("/").pop(),e.content.url=p,e.content.thumb_url=f,e.content.thumb_width=g,e.content.thumb_height=A,e.content.file_server_id=h,delete e.content.file,E.next=30;break;case 24:if(!l||c){E.next=30;break}return E.next=27,(0,se.call)(gr,{id:r,file:o,duration:i,onProgress:function(e){Vt.store.dispatch(rr({id:r,info:{percent:e}}))}});case 27:m=E.sent,e.content=qr(qr({},e.content),m),delete e.content.file;case 30:return E.abrupt("return",!0);case 33:if(E.prev=33,E.t0=E.catch(2),E.t1=l,!E.t1){E.next=39;break}return E.next=39,(0,se.put)(rr({id:r,info:{percent:void 0}}));case 39:return E.abrupt("return",!1);case 40:case"end":return E.stop()}}),wr,null,[[2,33]])}var Ms=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function Is(e,t,n){var r,s,a,o,i,c,l,u;return re().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return r="",s={},Ms.forEach((function(t){e[t]&&(s[t]=e[t]),s[t]&&s[t].localUrl&&(r=s[t].localUrl,delete s[t].localUrl)})),e.retryRequestId&&(s.request_id=e.retryRequestId),a=JSON.stringify(qr(qr({},s),{},{device_id:n,source:(0,w.checkIsScChat)()?"minichat":"pc_mall"})),o=Math.floor(Date.now()/1e3),d.prev=6,i={},d.next=10,(0,se.select)(T.captchaSignatureSelector);case 10:if(!(c=d.sent)){d.next=15;break}return i["X-Dfp-Access-S"]=c,d.next=15,(0,se.call)(T.updateCaptchaSignatureSaga,(0,T.updateCaptchaSignature)({signature:""}));case 15:return d.next=17,(0,se.call)(T.fetch,{method:"POST",resource:"messages",payload:a,headers:i,fetcher:yr});case 17:return l=d.sent,r&&(l.content.localUrl=r),t&&(0,w.removeItem)(Gr),d.abrupt("return",qr(qr({},l),{},{created_at:new Date,created_timestamp:o}));case 23:d.prev=23,d.t0=d.catch(6),d.t1=!0,d.next=d.t1===d.t0 instanceof T.Forbidden?28:d.t1===d.t0 instanceof T.Limiting?30:d.t1===d.t0 instanceof T.CustomError?32:d.t1===d.t0 instanceof T.Blacklist?34:d.t1===d.t0 instanceof T.CancelOrderWarning?37:d.t1===d.t0 instanceof T.UnverifiedPhoneNumber?39:d.t1===("message_exceed_daily_limit"===d.t0.message)?41:d.t1===("request_block_errorrequest block error."===d.t0.message)?43:d.t1===("need_captcha"===d.t0.message)?45:d.t1===("dfp_block_error"===d.t0.message)||d.t1===("captcha_error"===d.t0.message)?47:d.t1===("soft_spammer_error"===d.t0.message)?49:d.t1===("faq_session_expire"===d.t0.message)?51:d.t1===ds?53:56;break;case 28:return u=$r,d.abrupt("break",57);case 30:return u=es,d.abrupt("break",57);case 32:return u=ts,d.abrupt("break",57);case 34:return u=ns,e.message_option=w.MessageOption.MSG_OPT_CENSORED_BLACKLIST,d.abrupt("break",57);case 37:return u=rs,d.abrupt("break",57);case 39:return u=ss,d.abrupt("break",57);case 41:return u=as,d.abrupt("break",57);case 43:return u=os,d.abrupt("break",57);case 45:return u=is,d.abrupt("break",57);case 47:return u=cs,d.abrupt("break",57);case 49:return u=ls,d.abrupt("break",57);case 51:return u=us,d.abrupt("break",57);case 53:return d.next=55,(0,se.spawn)(Ts,!1);case 55:return d.abrupt("break",57);case 56:u=Jr;case 57:return r&&(e.content.localUrl=r),d.abrupt("return",qr(qr({},e),{},{requestId:e.request_id,created_timestamp:o,errorCode:u,error:d.t0}));case 59:case"end":return d.stop()}}),Tr,null,[[6,23]])}var Os=function(e){return e.content&&e.content.translation&&e.content.translation.text};function ws(e,t){var n,r,s,a,i,c,l,u,d,p,f,g,A,h,m,E;return re().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return n=[],r=[],v.next=4,(0,se.select)(T.currentConversationIdSelector);case 4:if((s=v.sent)===t){v.next=12;break}return v.next=8,(0,se.select)((0,T.getConvsMessagesRelatedSelector)(t));case 8:return n=v.sent,v.next=11,(0,se.select)((0,T.getMessagesSelector)(n.all));case 11:r=v.sent;case 12:return v.next=14,(0,se.put)(rt({conversationId:t,status:w.MessageFillStatus.FILLED,messageIds:e.map((function(e){return e.id}))}));case 14:return v.next=16,(0,se.select)(T.curConvsMessageSelector);case 16:if(a=v.sent,i=(0,T.normalize)("messages",a).entities.messages||{},c=[],l=e.map((function(e){var n,o=e.request_id,l=e.id,u=(e.content,e.type);if(i[o]){u===Yr&&c.push((0,se.put)(sr({id:o}))),c.push((0,se.put)((0,T.deleteRecord)({name:"messages",id:o})));var d=qr(qr({},i[o]),{},{translateStatus:Os(e)?w.TranslationStatus.SHOW:w.TranslationStatus.FAILED});return i[l]?null:(0,w.deepMerge)(d,e)}if((n=s!==t?r.filter((function(e){return e&&e.retryRequestId===o})):a.filter((function(e){return e.retryRequestId===o}))).length){var p=n[0].request_id;c.push((0,se.put)((0,T.deleteRecord)({name:"messages",id:p})));var f=qr(qr({},i[p]),{},{translateStatus:Os(e)?w.TranslationStatus.SHOW:w.TranslationStatus.FAILED}),g=i[l]?null:(0,w.deepMerge)(f,e);return g&&g.retryRequestId&&(g.original_request_id=p),g}return null})).filter(Boolean),l.length){v.next=22;break}return v.abrupt("return");case 22:return v.next=24,(0,se.call)(T.updateOrReplaceAction,i,l,"messages");case 24:return v.next=26,(0,se.put)(gs({conversationId:t,requestIdToMessageId:l.reduce((function(e,t){return t.original_request_id?qr(qr({},e),{},o({},t.original_request_id,t.id)):qr(qr({},e),{},o({},t.request_id,t.id))}),{})}));case 26:return l.sort((function(e,t){return t.id-e.id})),v.next=29,(0,se.all)(c);case 29:return u=l[0],d=u.id,p=u.created_at,f=u.created_timestamp,g=u.type,A=u.message_option,h=u.to_shop_id,m=(0,w.fillMessagePreview)(l[0]),E=m.content,v.next=33,(0,se.put)((0,T.updateRecord)({name:"conversations",id:t,record:{latest_message_id:d,latest_message_type:g,latest_message_content:E,latest_message_to_shop_id:h,last_message_time:p,last_message_option:A,last_message_time_nano:(0,w.getTimestampNano)(f),max_general_option_hide_time:f,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 33:case"end":return v.stop()}}),Br)}function Ts(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",actions:{confirm:{label:{key:"common.ok"},handler:function(){Vt.store.dispatch((0,T.closeModal)())}}},additions:{content:{key:"faq.expired".concat(e?".chat_with_seller":"")},modalStyle:{width:"348px",minWidth:"348px"},contentStyle:{paddingBottom:0,lineHeight:"20px"},confirmStyle:{width:"auto",padding:"0 16px",height:"32px",lineHeight:"32px"}}}));case 2:case"end":return t.stop()}}),kr)}function Bs(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O,B,k,R,P,D;return re().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:if(t=e.conversationId,n=e.requestIds,r=e.messages,s=e.more,o=(a=void 0===s?{}:s).isRedirect,i=a.isCancelable,c=a.isFakingSource,r[0].type===Vr){N.next=5;break}return N.next=5,(0,se.put)(As({conversationId:t,requestIds:n,isCancelable:i}));case 5:if(!c){N.next=7;break}return N.abrupt("return");case 7:if(l=r.length,N.t0=!i,!N.t0){N.next=12;break}return N.next=12,(0,se.spawn)(Cs,t,n);case 12:return u=0,d=[],p=[],f=[],N.next=18,(0,se.select)(T.networkStatusSelector);case 18:return g=N.sent,N.next=21,(0,se.call)(w.getItem,"device_id");case 21:if(A=N.sent,"offline"!==g){N.next=28;break}h=r.map((function(e){return qr(qr({},e),{},{requestId:e.request_id})})),f.push.apply(f,ee(h)),p.push.apply(p,ee(h)),N.next=57;break;case 28:if(!(u<l)){N.next=57;break}return m=r[u],N.next=32,(0,se.call)(xs,m,t);case 32:if(E=N.sent,v=void 0,E){N.next=39;break}v=qr(qr({},m),{},{requestId:m.request_id}),p.push(v),N.next=54;break;case 39:return N.next=41,(0,se.call)(Is,m,o,A);case 41:if(!(v=N.sent).errorCode){N.next=52;break}if(m.type!==Vr){N.next=49;break}return N.next=47,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:v.error}));case 47:N.next=50;break;case 49:p.push(v);case 50:N.next=53;break;case 52:d.push(v);case 53:v.error&&v.error.offlineError&&f.push(v);case 54:u++,N.next=28;break;case 57:if(!d.length){N.next=61;break}return d.forEach((function(e){e.send_status=w.MessageSendStatus.SUCCEED})),N.next=61,(0,se.call)(ws,d,t);case 61:if(!p.length){N.next=118;break}return N.next=64,(0,se.select)(T.currentConversationIdSelector);case 64:if(N.sent!==t){N.next=78;break}if(S=p.find((function(e){return e.errorCode===is})),!S){N.next=72;break}return N.next=70,(0,se.put)((0,T.updateCaptchaVisible)({visible:!0,resendMessagePayload:{conversationId:t,messageId:S.id}}));case 70:N.next=78;break;case 72:if(_=[Jr,ts],b=p.find((function(e){return _.includes(e.errorCode)})),N.t1=b,!N.t1){N.next=78;break}return N.next=78,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:b.error}));case 78:return y=[],p.forEach((function(e){var t=e.errorCode,n=e.error,r=e.request_id,s=e.type,a=e.content,o=e.to_id,i=e.from_id,c=e.shop_id,l=e.conversation_id,u=e.message_option;t===es&&y.push((0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:n})));var d={errorCode:t,translateStatus:w.TranslationStatus.FAILED,retryRequestId:(0,ae.v4)()};s===Yr&&(0,T.$tracker)({operation:w.TrackerOperation.IMPRESSION,trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:l,is_sender:!0,from_user_id:i,to_user_id:o,video_original_duration:a.duration_seconds},shopId:c}),(s===Hr&&t===ns||[Yr,Ur].includes(s))&&(d.content=a),(0,w.hasTargetMessageOption)(u,w.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(d.message_option=u),y.push((0,se.put)((0,T.updateRecord)({name:"messages",id:r,record:d})))})),N.next=82,(0,se.all)(y);case 82:return C=p.map((function(e){return e.requestId})),N.next=85,(0,se.put)(ms({conversationId:t,requestIds:C}));case 85:if(x=[rs,os,cs,as,ls,us,ds],M=p.find((function(e){return x.includes(e.errorCode)})),!M){N.next=118;break}return N.next=90,(0,se.select)(T.currentConversationShopSelectors);case 90:I=N.sent,O=(I||{}).country,B=O&&O.toLowerCase(),N.t2=M.errorCode,N.next=N.t2===rs?96:N.t2===as?102:N.t2===ls?105:N.t2===us?108:N.t2===ds?111:114;break;case 96:return N.next=98,(0,se.select)((0,T.getMessageSelector)(M.request_id));case 98:return k=N.sent,N.next=101,(0,se.put)((0,T.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:B||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){Vt.store.dispatch((0,T.closeModal)());var e=bs(k,!0);Vt.store.dispatch(mn({conversationId:t,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){Vt.store.dispatch((0,T.closeModal)());var e=bs(k,!1);Vt.store.dispatch(mn({conversationId:t,message:e}))}}}}));case 101:return N.abrupt("break",118);case 102:return N.next=104,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){return Vt.store.dispatch((0,T.closeModal)())}}}}));case 104:return N.abrupt("break",118);case 105:return N.next=107,(0,se.put)((0,T.showModal)({type:"SPAMMER_MODAL",title:{key:"modal.translation_spammer.title"},additions:{content:{key:"modal.translation_spammer.content"},region:B||"sg"},actions:{confirm:{label:{key:"common.ok"},handler:function(){return Vt.store.dispatch((0,T.closeModal)())}}}}));case 107:return N.abrupt("break",118);case 108:return N.next=110,(0,se.spawn)(Ts,!0);case 110:return N.abrupt("break",118);case 111:return N.next=113,(0,se.spawn)(Ts,!1);case 113:return N.abrupt("break",118);case 114:return R=M.errorCode===cs,P='<a style="color: #395692" target="blank" href="'.concat((0,w.getShopeeCustomerService)(B),'">').concat(Mr("text.shopee_cs"),"</a>"),N.next=118,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.".concat(R?"common_error":"untrusted_network")},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:Mr("modal.content.".concat(R?"common_error_hint":"untrusted_network"),{someone:P})},actions:{confirm:{label:{key:"common.ok"}}}}));case 118:if(!f.length){N.next=123;break}return D=f.map((function(e){return e.requestId})),N.next=122,(0,se.put)(On({conversationId:t,requestIds:D}));case 122:(0,T.networkJudge)();case 123:case"end":return N.stop()}}),Rr)}var ks=[zr,Wr,Zr,Qr,Xr,Kr];function Rs(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O,B,k,R,P,D,N,j,F,L,q,G,U,H,Y,V;return re().wrap((function(z){for(;;)switch(z.prev=z.next){case 0:if(n=e.payload,r=n.id,s=n.conversationId,a=n.messages,o=n.more,i=null===(t=a[0])||void 0===t?void 0:t.type,!ks.includes(i)){z.next=18;break}return z.next=5,(0,se.select)(T.currentFaqSessionInfoSelector);case 5:if(l=z.sent,u=l.faqSessionId,d=l.sessionExpiryTime,void 0!==u){z.next=12;break}return z.next=11,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:null}));case 11:case 17:case 29:return z.abrupt("return");case 12:if(p=(null===(c=a[0])||void 0===c?void 0:c.content)||{},f=p.faq_session_id,hr(u,f,d)){z.next=18;break}return g="0"===d||u===f&&(new Date).getTime()>d/1e6,z.next=17,(0,se.spawn)(Ts,g);case 18:if(!(0,w.checkIsScChat)()){z.next=21;break}return z.next=21,(0,se.put)((0,T.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 21:return z.next=23,(0,se.select)((0,T.getConversation)(s));case 23:if(A=z.sent,h=A.to_id,m=o.isResend,E=o.isFakingSource,!m){z.next=30;break}return z.next=29,Bs({conversationId:s,messages:a,requestIds:[a[0].request_id],more:{isCancelable:!!r}});case 30:return z.next=32,(0,se.select)(T.inlocationSelector);case 32:return v=z.sent,z.next=35,(0,se.select)(T.inScrollToMessageSelector);case 35:return S=z.sent,z.next=38,(0,se.select)(T.isNavigateToUnreadMessageSelector);case 38:if(_=z.sent,!(v||S||_)){z.next=57;break}if(z.t0=_,!z.t0){z.next=45;break}return z.next=45,(0,se.put)((0,T.setNavigateToUnreadMessage)({isNavigateToUnreadMessage:!1}));case 45:if(z.t1=S,!z.t1){z.next=49;break}return z.next=49,(0,se.put)(rn({inScrollToMessage:!1}));case 49:if(z.t2=v,!z.t2){z.next=53;break}return z.next=53,(0,se.put)((0,T.updateLocationMode)({inlocation:!1}));case 53:return z.next=55,(0,se.put)(Ln({conversationId:s}));case 55:return z.next=57,(0,se.call)(Lt,{payload:{conversationId:s,reset:!0,source:w.MessageSource.SEND}});case 57:return z.next=59,(0,se.select)(T.entryPointSelector);case 59:return b=z.sent,z.next=62,(0,se.call)(w.getItem,Gr);case 62:return y=z.sent,C=A.shop_id,x=a.map((function(e){var t;return pe({id:r,recipientID:h,message:e,redirectInfo:y,conversationId:s,replyToMessageId:null==e||null===(t=e.replyToMessage)||void 0===t?void 0:t.id,shopId:C,entryPoint:b})})),z.next=67,(0,se.select)(T.currentUserIdSelector);case 67:return M=z.sent,z.next=70,(0,se.select)(T.currentUserSelector);case 70:return I=z.sent,O=x.map((function(e,t){var n,r=qr({},e);r.from_id=M;var s,o=r.type,i=r.content;if(["product","order","voucher"].includes(o)){var c="".concat(o,"_id"),l=i[c],u=a.find((function(e){return e.content[c]===l}));u&&(r.textContent=u.textContent)}else o===Hr&&(r.translateStatus=w.TranslationStatus.PENDING);return null!==(n=a[t])&&void 0!==n&&n.replyToMessage&&(r.quoted_msg=null===(s=a[t])||void 0===s?void 0:s.replyToMessage),r.from_user_name=I.username||I.name,r})),z.next=74,(0,se.select)(T.curConvsMessageSelector);case 74:if(B=z.sent,k=B.filter((function(e){return e.hasMessageSource&&!e.isFaking})),R=B.filter((function(e){return e.hasMessageSource&&e.isFaking})),P=k.length,!(D=R.length)){z.next=86;break}return N=[],j=R[D-1],E||(O[0].sourceContent=j.sourceContent),R.forEach((function(e){N.push((0,se.put)((0,T.deleteRecord)({name:"messages",id:e.id})))})),z.next=86,(0,se.all)(N);case 86:return F=(0,T.normalize)("messages",O),z.next=89,(0,se.put)((0,T.updateEntities)({entities:F.entities}));case 89:if(!E){z.next=98;break}if(L=O[0]||{},q=L.source_content||{},G=k[P-1],U=(null==G?void 0:G.source_content)||{},H=U.shop_id,Y=U.product_id,V=U.order_id,q.shop_id!==H||q.product_id!==Y||q.order_id!==V){z.next=96;break}return z.abrupt("return");case 96:return z.next=98,(0,se.call)(ot,O);case 98:return z.next=100,Bs({conversationId:s,messages:x,requestIds:F.result,more:{isRedirect:!!y,isCancelable:!!r,isFakingSource:E}});case 100:case"end":return z.stop()}}),Pr)}function Ps(){var e,t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,se.select)(T.messagesRelatedMapSelector);case 2:return e=n.sent,t=[],Object.entries(e).forEach((function(e){var n=(0,Yt.Z)(e,2),r=n[0],s=n[1].sending||[];s.length&&t.push((0,se.put)(ms({conversationId:r,requestIds:s})))})),n.next=7,(0,se.all)(t);case 7:case"end":return n.stop()}}),Dr)}function Ds(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.conversationId,s.next=3,(0,se.put)(Ss({id:n,conversationId:r}));case 3:return s.next=5,(0,se.put)((0,T.deleteRecord)({name:"messages",id:n}));case 5:case"end":return s.stop()}}),Nr)}function Ns(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.takeEveryWithCancel)(fs,Rs,Ss);case 2:case"end":return e.stop()}}),jr)}function js(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(vs,Ds);case 2:return e.next=4,(0,se.takeEvery)(_s,ys);case 4:return e.next=6,(0,se.takeLatest)(Es,Ps);case 6:case"end":return e.stop()}}),Fr)}const Fs=(o(xr={},As,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=n.isCancelable,i=e.messagesRelatedMap,c=i[r]||{},l=c.sending||[];l=a?l.concat(s):l;var u=c.all||[],d=c.failed||[];return qr(qr({},e),{},{messagesRelatedMap:qr(qr({},i),{},o({},r,qr(qr({},c),{},{all:s.reverse().filter((function(e){return!u.includes(e)})).concat(u),failed:d.filter((function(e){return!s.includes(e)})),sending:l})))})})),o(xr,hs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.sending||[],l=i.all||[],u=i.failed||[],d=s.filter((function(e){return l.includes(e)&&!u.includes(e)}));return qr(qr({},e),{},{messagesRelatedMap:qr(qr({},a),{},o({},r,qr(qr({},i),{},{sending:c.concat(d)})))})})),o(xr,gs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIdToMessageId,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).map((function(e){return s[e]?s[e]:e})),l=i.sending||[];return qr(qr({},e),{},{messagesRelatedMap:qr(qr({},a),{},o({},r,qr(qr({},i),{},{all:c,offset:c[c.length-1],sending:l.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),o(xr,ms,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.failed||[],l=i.sending||[];return qr(qr({},e),{},{messagesRelatedMap:qr(qr({},a),{},o({},r,qr(qr({},i),{},{sending:l.filter((function(e){return!s.includes(e)})),failed:c.concat(s)})))})})),o(xr,Ss,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],l=i.sending||[];return qr(qr({},e),{},{messagesRelatedMap:qr(qr({},a),{},o({},s,qr(qr({},i),{},{all:c.filter((function(e){return e!==r})),sending:l.filter((function(e){return e!==r}))})))})})),xr);var Ls,qs=K(4323).t,Gs=re().mark(na),Us=re().mark(ra),Hs=re().mark(aa),Ys=re().mark(oa),Vs=re().mark(ia);function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ws(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zs=(0,te.createActions)((o(Ls={},le.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,toggle:e.toggle,isIDAndPcmall:e.isIDAndPcmall}})),o(Ls,le.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status,changeMidStatus:e.changeMidStatus}})),o(Ls,le.SHOW_TRANSLATE_FEEDBACK,(function(e){return{messageId:e.messageId,translationSource:e.translationSource}})),o(Ls,le.SEND_TRANSLATE_FEEDBACK,(function(e){return{quality:e.quality,messageId:e.messageId,translationModel:e.translationModel,feedbacks:e.feedbacks,otherSuggestion:e.otherSuggestion}})),Ls)),Qs=Zs.translateMessagesRequested,Xs=Zs.changeTranslateStatus,Ks=Zs.showTranslateFeedback,Js=Zs.sendTranslateFeedback,$s=function(e,t){return(0,se.put)((0,T.updateRecord)({name:"messages",id:e,record:t}))};function ea(e,t,n,r,s,a,o,i,c,l){var u={step2_target_language:i,step2_translation_status:!!c},d=e||!s?Ws(Ws({},{step1_target_language:a,step1_translation_status:!!o}),u):u;(0,T.$tracker)({trackerName:"translationTryAgain",data:Ws({message_id:t,conversation_id:n,message_type:0,is_sender:r,original_language:l},d)})}function ta(e,t,n,r,s){var a=e||!s?{step1_translation_status:!1,step2_translation_status:!1}:{step2_translation_status:!1};(0,T.$tracker)({trackerName:"translationTryAgain",data:Ws({message_id:t,conversation_id:n,message_type:0,is_sender:r},a)})}function na(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O,B,k,R,P,D;return re().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,n=t.messageId,r=t.toggle,s=t.isIDAndPcmall,N.next=3,(0,se.select)((0,T.getMessageSelector)(n));case 3:if(N.t0=N.sent,N.t0){N.next=6;break}N.t0={};case 6:return a=N.t0,o=a.conversation_id,N.next=10,(0,se.select)((0,T.getConversation)(o));case 10:return i=N.sent,c=i.shop_id,l=(0,w.getMessageIsSend)(a,i),u=a.content||{},d=u.text,p=u.translation,f=u.mid,g=(f||{}).text,N.prev=15,A={},r?A.toggleTranslateStatus=w.TranslationStatus.PENDING:A.translateStatus=w.TranslationStatus.PENDING,N.next=20,$s(n,A);case 20:return N.next=22,(0,se.call)(T.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:c,message_id:n,conversation_id:o})});case 22:if(h=N.sent,E=(m=h||{}).translated,v=m.middle_translated,_=(S=E||{}).translated_text,b=S.target_language,y=S.source_language,x=(C=v||{}).translated_text,M=C.target_language,I=C.source_language,B=(O=r?!!x:!!_)?w.TranslationStatus.SUCCEED:w.TranslationStatus.FAILED,k=r?{toggleTranslateStatus:B}:{translateStatus:B},R=r?Ws(Ws({},v),{},{text:x}):Ws(Ws({},E),{},{text:_}),P=O?R:Ws(Ws({},R),{},{text:""}),ea(r,n,o,l,g,M,x,b,_,I||y),s){N.next=37;break}return N.next=36,$s(n,Ws(Ws({},k),{},{content:{text:d,translation:P,mid:Ws(Ws({},v),{},{text:x})}}));case 36:return N.abrupt("return");case 37:return N.next=39,$s(n,Ws(Ws({},k),{},{content:{text:d,translation:r?p:P,mid:r?P:f}}));case 39:N.next=47;break;case 41:return N.prev=41,N.t1=N.catch(15),ta(r,n,o,l,g),D=r?{toggleTranslateStatus:w.TranslationStatus.FAILED}:{translateStatus:w.TranslationStatus.FAILED},N.next=47,$s(n,Ws(Ws({},D),{},{content:{text:d,translation:r?p:Ws(Ws({},p),{},{text:""}),mid:r?Ws(Ws({},f),{},{text:""}):f}}));case 47:case"end":return N.stop()}}),Gs,null,[[15,41]])}function ra(e){var t,n,r,s,a;return re().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,r=t.status,s=t.changeMidStatus,a=s?{toggleTranslateStatus:r}:{translateStatus:r},o.next=4,$s(n,a);case 4:case"end":return o.stop()}}),Us)}var sa={shopee_en:"local_en",shopee_cn:"cn_en",shopee_kr:"kr_en"};function aa(e){var t,n,r,s,a,o,i,c;return re().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.messageId,r=t.translationSource,l.next=3,(0,se.select)((0,T.getMessageSelector)(n));case 3:if(l.t0=l.sent,l.t0){l.next=6;break}l.t0={};case 6:return s=l.t0,a=s.conversation_id,l.next=10,(0,se.select)((0,T.getConversation)(a));case 10:return o=l.sent,i=o.shop_id,c=(0,w.getMessageIsSend)(s,o),l.next=15,(0,se.put)((0,T.showModal)({type:"EVALUTE_MODAL",title:{key:"modal.translation_feedback.title"},actions:{cancel:{label:{key:"common.cancel"},shape:"default",handler:function(){Vt.store.dispatch((0,T.closeModal)())}},confirm:{label:{key:"common.submit"},handler:function(e){Vt.store.dispatch((0,T.closeModal)()),Vt.store.dispatch(Js(Ws({messageId:n,translationModel:sa[r]},e)))}}},additions:{trackerData:{data:{message_id:n,conversation_id:a,message_type:w.ApiMessageTypes[w.MessageTypes.MSG_TYPE_TEXT],is_sender:c},shopId:Number(i)}}}));case 15:case"end":return l.stop()}}),Hs)}function oa(e){var t,n,r,s,a,o,i,c,l,u,d,p;return re().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,n=t.quality,r=t.messageId,s=t.translationModel,a=t.feedbacks,o=t.otherSuggestion,f.prev=1,f.next=4,(0,se.select)((0,T.getMessageSelector)(r));case 4:if(f.t0=f.sent,f.t0){f.next=7;break}f.t0={};case 7:return i=f.t0,f.next=10,(0,se.select)(T.isSubAccountSelector);case 10:return c=f.sent,l=i.conversation_id,f.next=14,(0,se.select)((0,T.getConversation)(l));case 14:return u=f.sent,d=u.shop_id,p={quality:n,message_id:r,conversation_id:l,translation_model:s,feedbacks:a,other_suggestion:o,to_shop_id:String(i.from_shop_id)},c&&(p.shop_id=d.toString()),f.next=20,(0,se.call)(T.fetch,{method:"POST",resource:"translation",suffix:"feedback",payload:JSON.stringify(p)});case 20:return f.next=22,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({toast:{show:!0,type:"success",message:qs("common.toast.translation_feedback")}}));case 22:f.next=26;break;case 24:f.prev=24,f.t1=f.catch(1);case 26:case"end":return f.stop()}}),Ys,null,[[1,24]])}function ia(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(Qs,na);case 2:return e.next=4,(0,se.takeEvery)(Xs,ra);case 4:return e.next=6,(0,se.takeEvery)(Ks,aa);case 6:return e.next=8,(0,se.takeEvery)(Js,oa);case 8:case"end":return e.stop()}}),Vs)}var ca,la,ua=re().mark(ga),da=re().mark(Aa),pa=(0,te.createActions)(o({},le.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))),fa=pa.handleSensitiveUrl;function ga(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.href,n.next=3,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){Vt.store.dispatch((0,T.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){Vt.store.dispatch((0,T.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return n.stop()}}),ua)}function Aa(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(fa,ga);case 2:case"end":return e.stop()}}),da)}function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ea=re().mark(Ia),va=re().mark(Oa),Sa=(0,te.createActions)((o(ca={},le.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,n=e.shopId,r=e.reset;return{sourceId:t,shopId:n,reset:void 0!==r&&r}})),o(ca,le.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,n=e.sourceId,r=e.faqHistoryStatus,s=e.offset,a=e.hasMore;return{messageIds:t,sourceId:n,faqHistoryStatus:r,offset:s,hasMore:void 0===a||a}})),o(ca,le.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),o(ca,le.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),o(ca,le.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),ca)),_a=Sa.fetchFaqMessagesRequested,ba=Sa.fetchFaqMessagesSucceeded,ya=Sa.updateFetchFaqMessagesRequestedStatus,Ca=Sa.updateCurrentFaqId,xa=Sa.showFaqHistoryModal,Ma=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(s,a){(0,T.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:n,limit:r,source_id:e}}).then((function(e){var t=e.bundle_message,n=e.total;_e(t),s({messages:t,total:n})})).catch((function(e){a(e)}))}))};function Ia(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A;return re().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.sourceId,r=t.shopId,s=t.reset,h.prev=1,h.next=4,(0,se.put)(Ca({id:n}));case 4:return h.next=6,(0,se.select)(T.currentFaqHistorySeletor);case 6:if(a=h.sent,o=a.offset,i=void 0===o?0:o,!(void 0!==(c=a.hasMore)&&!c||s&&i)){h.next=13;break}return h.abrupt("return",null);case 13:return h.next=15,(0,se.put)(ya({status:s?w.DataFetchStatus.INIT_PENDING:w.DataFetchStatus.PENDING}));case 15:return h.next=17,Ma(n,r,i);case 17:return l=h.sent,u=l.messages,d=l.total,p=i+u.length,u.sort((function(e,t){return fe(e.id,t.id)})),f=(0,T.normalize)("messages",u),g=f.result,A=f.entities,h.next=25,(0,se.put)((0,T.updateEntities)({entities:A}));case 25:return h.next=27,(0,se.call)(ot,u);case 27:return h.next=29,(0,se.put)(ba({sourceId:n,offset:p,hasMore:p<d,faqHistoryStatus:w.DataFetchStatus.SUCCEED,messageIds:g}));case 29:h.next=35;break;case 31:return h.prev=31,h.t0=h.catch(1),h.next=35,(0,se.put)(ya({status:s?w.DataFetchStatus.INIT_FAILED:w.DataFetchStatus.FAILED}));case 35:case"end":return h.stop()}}),Ea,null,[[1,31]])}function Oa(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(_a,Ia);case 2:case"end":return e.stop()}}),va)}const wa=(o(la={},le.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var n=t.payload,r=n.messageIds,s=n.sourceId,a=n.faqHistoryStatus,i=n.offset,c=n.hasMore,l=e.faqHistoryHash,u=(l[s]||{all:[]}).all,d=Array.from(new Set(u.concat(r)));return ma(ma({},e),{},{faqHistoryHash:ma(ma({},l),{},o({},s,{all:d,offset:i,hasMore:c})),faqHistoryStatus:a})})),o(la,le.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var n=t.payload.status;return ma(ma({},e),{},{faqHistoryStatus:n})})),o(la,le.UPDATE_CURRENT_FAQ_ID,(function(e,t){var n=t.payload.id;return ma(ma({},e),{},{faqId:n})})),la);function Ta(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ba(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ka=re().mark(no),Ra=re().mark(ro),Pa=re().mark(so),Da=re().mark(ao),Na=re().mark(oo),ja=re().mark(co),Fa=re().mark(lo);function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ga,Ua=w.MessageTypes.MSG_TYPE_OFFER,Ha=w.MessageTypes.MSG_TYPE_VIDEO,Ya=w.MessageTypes.MSG_TYPE_NOTIFICATION,Va=(0,te.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),za=Va.receiveMessageRequested,Wa=Va.receiveMessageSucceeded,Za=Va.resetNewConversationQueue,Qa=Va.resetOldConversationQueue,Xa=Va.resetConversationQueue,Ka=2e3,Ja=Ka,$a=Ka,eo=[],to=[];function no(e){var t,n,r,s,a,o,i,c,l,u,d;return re().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.content,n=e.from_id,r=e.send_by_yourself,s=e.conversation_id,o=(a=t||{}).offer_id,i=a.model_id,c=a.shop_id,l=a.product_id,r){p.next=5;break}return p.next=5,(0,se.put)((0,T.getPendingOffersCountRequested)({buyerId:n,shopId:c,productId:l}));case 5:return u=[],d={},p.next=9,(0,se.select)((0,T.relatedOfferIdsSelector)(s,i,o,l));case 9:return p.sent.forEach((function(e){var t=e.id;d[t]=qa(qa({},e),{},{status:w.OfferStatus.CANCELLED})})),u.push((0,se.put)((0,T.batchUpdateRecord)({name:"offers",records:d}))),p.next=14,(0,se.all)(u);case 14:case"end":return p.stop()}}),ka)}function ro(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v,S,_,b,y,C,x,M,I,O,B,k,R,P,D,N,j;return re().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:return t=e.payload.message,n=t.id,r=t.type,s=t.request_id,a=t.conversation_id,o=t.send_by_yourself,t.content,i=t.created_timestamp,c=t.to_shop_id,ve.includes(r)&&_e(t),F.next=5,(0,se.select)((function(e){return e.conversationReducer}));case 5:return l=F.sent,u=l.conversationIdsMap,d=l.currentConversationId,p=l.currentConversationCanRead,F.next=11,(0,se.select)((0,T.getConversation)(a));case 11:if(f=F.sent,g=f.id&&void 0!==f.faking,u&&u[a.toString()]||g){F.next=18;break}eo.push(t),F.next=106;break;case 18:if(r!==Ua){F.next=22;break}return F.next=22,(0,se.call)(no,t);case 22:if(A=d===a,h=(0,w.getChatBotParams)(t,{updateMaxGeneralOptionHideTime:o}),m=(0,w.getCrmPreviewParams)(t),!A){F.next=105;break}return F.next=28,(0,se.select)(T.curConvsMessageSelector);case 28:if(E=F.sent,!o){F.next=74;break}v=!1,S=!1,_=!1,b=Ta(E),F.prev=34,b.s();case 36:if((y=b.n()).done){F.next=46;break}if(C=y.value,x=C.id,M=C.retryRequestId,S=x===s,_=M===s,!((v=x===n)||S||_)){F.next=44;break}return F.abrupt("break",46);case 44:F.next=36;break;case 46:F.next=51;break;case 48:F.prev=48,F.t0=F.catch(34),b.e(F.t0);case 51:return F.prev=51,b.f(),F.finish(51);case 54:if(v){F.next=72;break}if(!S&&!_){F.next=60;break}return F.next=58,(0,se.call)(ws,[t],a);case 58:F.next=72;break;case 60:return F.next=62,(0,se.call)(T.updateOrReplaceAction,E,[t],"messages",["content"]);case 62:return F.next=64,(0,se.call)(ot,[t],{sync:!0});case 64:return F.next=66,(0,se.select)((0,T.getMessageSelector)(t.id));case 66:return I=F.sent,O=(0,w.fillMessagePreview)(I),B=O.content,F.next=70,(0,se.put)((0,T.updateRecord)({name:"conversations",id:a,record:qa(qa({latest_message_id:n,latest_message_type:r,latest_message_content:B,latest_message_to_shop_id:c,last_message_time_nano:(0,w.getTimestampNano)(i)},h),m)}));case 70:return F.next=72,(0,se.put)(Wa({conversationId:a,message:t}));case 72:F.next=97;break;case 74:if(r!==Ha){F.next=77;break}return F.next=77,(0,se.put)(rr({id:s,info:{shouldPreload:!0}}));case 77:return F.next=79,(0,se.call)(T.updateOrReplaceAction,E,[t],"messages",["content"]);case 79:return F.next=81,(0,se.call)(ot,[t],{sync:!0});case 81:return F.next=83,(0,se.select)((0,T.getMessageSelector)(t.id));case 83:return k=F.sent,R=(0,w.fillMessagePreview)(k),P=R.content,F.next=87,(0,se.select)(T.currentConversationSelector);case 87:if(D=F.sent,N=D.unread_count,j=p?N:N+1,0!==N||p||r===Ya){F.next=93;break}return F.next=93,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:D}));case 93:return F.next=95,(0,se.put)((0,T.updateRecord)({name:"conversations",id:a,record:qa(qa({unread_count:j,latest_message_id:n,latest_message_type:r,latest_message_content:P,latest_message_to_shop_id:c,last_message_time_nano:(0,w.getTimestampNano)(i)},h),m)}));case 95:return F.next=97,(0,se.put)(Wa({conversationId:a,message:t}));case 97:if(!g){F.next=100;break}return F.next=100,(0,se.call)(T.fetchConversationsRequestedSaga,(0,T.fetchConversationsRequested)({direction:"latest"}));case 100:if(o||!p){F.next=103;break}return F.next=103,(0,se.call)(T.markMessagesRequestedSaga,(0,T.markMessagesRequested)({conversationId:a,isRead:!0,latestMessageId:n}));case 103:F.next=106;break;case 105:to.push(t);case 106:case"end":return F.stop()}}),Ra,null,[[34,48,51,54]])}function so(){var e,t,n,r,s,a,o,i=arguments;return re().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],!(t=eo.length)){c.next=19;break}return c.next=5,(0,se.select)(T.isSubAccountSelector);case 5:return n=c.sent,r=eo.splice(0,t).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),c.next=9,(0,se.select)((function(e){return e.conversationReducer}));case 9:if(s=c.sent,a=s.maxLatestTimestampNano,o=s.maxLatestReceivedMessageId,!(n?(0,w.greaterThan)(r[0].id,o):a<=r[0].created_timestamp*Math.pow(10,9))){c.next=19;break}return c.next=16,(0,se.call)(T.fetchConversationsRequestedSaga,(0,T.fetchConversationsRequested)({direction:"latest"}));case 16:if(!e){c.next=19;break}return c.next=19,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 19:case"end":return c.stop()}}),Pa)}function ao(){var e,t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,(0,se.delay)(Ja);case 3:if(e=eo.length){n.next=8;break}Ja=8e3===Ja?Ja:2*Ja,n.next=20;break;case 8:if(Ja=Ka,t=eo[e-1].id,Ga===t){n.next=14;break}return Ga=t,n.next=14,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 14:return n.next=16,(0,se.select)(T.showChatWindowSelector);case 16:if(!n.sent){n.next=20;break}return n.next=20,(0,se.call)(so,!0);case 20:n.next=0;break;case 22:case"end":return n.stop()}}),Da)}function oo(){var e;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,se.delay)($a);case 3:if(e=to.length){t.next=8;break}$a=8e3===$a?$a:2*$a,t.next=9;break;case 8:return t.delegateYield(re().mark((function t(){var n,r,s,a,o,i;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,se.put)((0,T.updateFetchConversationsDirection)({direction:"latest"}));case 2:return n=to.splice(0,e),$a=Ka,r=Array.from(new Set(n.map((function(e){return e.conversation_id})))),t.next=7,(0,se.select)((0,T.getConversations)(r));case 7:return s=t.sent,a={},o=0,n.forEach((function(e){var t=e.id,n=e.type,r=e.content,i=e.created_timestamp,c=e.conversation_id,l=e.send_by_yourself,u=e.to_shop_id,d=(0,w.getChatBotParams)(e,{updateMaxGeneralOptionHideTime:l}),p=(0,w.getCrmPreviewParams)(e),f=qa(qa({latest_message_id:t,latest_message_type:n,latest_message_content:r,latest_message_to_shop_id:u,last_message_time_nano:(0,w.getTimestampNano)(i)},d),p),g=a[c],A=!l&&n!==Ya;if(g)t>g.latest_message_id?a[c]=qa(qa(qa({},g),f),{},{unread_count:A?g.unread_count+1:g.unread_count}):a[c]=qa(qa({},g),{},{unread_count:A?g.unread_count+1:g.unread_count});else{var h=s.find((function(e){return e.id===c}))||{},m=h.unread_count,E=void 0===m?0:m;h.shop_id,a[c]=qa(qa({},f),{},{unread_count:A?E+1:E}),A&&0===E&&(o+=1)}})),i=Object.keys(a).map((function(e){return qa(qa({},a[e]),{},{id:e})})),t.next=14,(0,se.call)(T.fetchMessagePreview,{list:i,conversationId:1===i.length&&i[0].id,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var n=a[e];n&&(a[e]=qa(qa({},n),{},{latest_message_content:t[e]}))}))}});case 14:return t.next=16,(0,se.put)((0,T.batchUpdateRecord)({name:"conversations",records:a,checkProp:"latest_message_id"}));case 16:return t.next=18,(0,se.spawn)(T.handleUnreadCountChangeAction,(0,T.updateUnreadCount)({type:T.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:o}}));case 18:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),Na)}function io(){var e=eo.length,t=to.length;e&&eo.splice(0,e),t&&to.splice(0,t)}function co(e){var t,n,r,s,a,o,i,c,l,u,d,p;return re().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(!(t=to.filter((function(t){return t.conversation_id===e}))).length){f.next=15;break}return t.forEach((function(e){var t=to.findIndex((function(t){return t.id===e.id}));to.splice(t,1)})),n=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),r=n[0],s=r.id,a=r.type,o=r.content,i=r.created_timestamp,c=r.send_by_yourself,l=(0,w.getChatBotParams)(r,{updateMaxGeneralOptionHideTime:c}),u=(0,w.getCrmPreviewParams)(r),d=o,f.next=11,(0,se.call)(T.fetchMessagePreview,{list:[r],conversationId:e,handleSave:function(e){var t=e.records,n=Object.keys(t)[0];n===s&&(d=qa(qa({},o),t[n]))}});case 11:return p=qa(qa({latest_message_id:s,latest_message_type:a,latest_message_content:d,last_message_time_nano:(0,w.getTimestampNano)(i)},l),u),f.next=14,(0,se.put)((0,T.updateRecord)({name:"conversations",id:e,record:p}));case 14:return f.abrupt("return",s);case 15:return f.abrupt("return",null);case 16:case"end":return f.stop()}}),ja)}function lo(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(za,ro);case 2:return e.next=4,(0,se.takeEvery)(Xa,io);case 4:case"end":return e.stop()}}),Fa)}const uo=o({},Wa,(function(e,t){var n,r=t.payload,s=r.conversationId,a=r.message,i=a.id,c=a.request_id,l=e.messagesRelatedMap,u=l[s]||{},d=u.all,p=void 0===d?[]:d,f=u.sending,g=void 0===f?[]:f;return n=p.includes(i)?p:[i].concat(p).filter((function(e){return e!==c})),qa(qa({},e),{},{messagesRelatedMap:qa(qa({},l),{},o({},s,qa(qa({},u),{},{all:n,sending:g.filter((function(e){return!g.includes(c)}))})))})}));var po=K(4323).t;function fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ao,ho=re().mark(xo),mo=re().mark(Mo),Eo=re().mark(Io),vo=re().mark(Oo),So=re().mark(wo);Ao="mini-sc_redirect";var _o=(0,te.createActions)({DELETE_MESSAGE_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_POST_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_ID_IN_HASH:function(e){return{id:e.id,conversationId:e.conversationId}}}),bo=_o.deleteMessageRequested,yo=_o.deleteMessagePostRequested,Co=_o.deleteMessageIdInHash;function xo(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.conversationId,a.next=3,(0,se.select)((0,T.getConversationFakingMessages)(t));case 3:if(!(n=a.sent).length){a.next=13;break}return r=[],n.forEach((function(e){r.push((0,se.call)(Mo,{id:e.id,conversationId:t}))})),a.next=9,(0,se.all)(r);case 9:return a.next=11,(0,se.call)(w.getItem,Ao);case 11:(null==(s=a.sent)?void 0:s.conversationId)===t&&(0,w.removeItem)(Ao);case 13:case"end":return a.stop()}}),ho)}function Mo(e){var t,n;return re().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,n=e.conversationId,r.next=3,(0,se.put)(Co({id:t,conversationId:n}));case 3:return r.next=5,(0,se.put)((0,T.deleteRecord)({name:"messages",id:t}));case 5:case"end":return r.stop()}}),mo)}function Io(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.messageId,a.next=3,(0,se.select)((0,T.getMessageSelector)(t));case 3:return n=a.sent,r=n.type,s=n.conversation_id,a.next=7,(0,se.put)((0,T.showModal)({type:"CONFIRM_MODAL",title:{key:"message.delete.title"},actions:{cancel:{label:po("common.cancel"),handler:function(){Vt.store.dispatch((0,T.closeModal)()),(0,T.$tracker)({trackerName:"cancelConfirm",data:{message_id:t,message_type:(0,w.getReplyTrackerMessageType)(r),conversation_id:s}})}},confirm:{label:po("common.confirm"),handler:function(){Vt.store.dispatch((0,T.closeModal)()),Vt.store.dispatch(yo({messageId:t})),(0,T.$tracker)({trackerName:"deleteConfirm",data:{message_id:t,message_type:(0,w.getReplyTrackerMessageType)(r),conversation_id:s}})}}}}));case 7:case"end":return a.stop()}}),Eo)}function Oo(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E;return re().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload.messageId,v.prev=1,v.next=4,(0,se.select)(T.deleteConfigSelector);case 4:return n=v.sent,v.next=7,(0,se.select)((0,T.getMessageSelector)(t));case 7:return r=v.sent,v.next=10,(0,se.call)(T.fetch,{method:"POST",parent:"messages",resource:"delete",payload:JSON.stringify({msg_id:t,type:r.type,delete_config_version:n.deleteConfigVersion})});case 10:return s=v.sent,a=r.message_option|w.MessageOption.MSG_OPT_DELETE,o=(0,T.normalize)("messages",go(go({},r),{},{message_option:a})),i=o.entities,v.next=15,(0,se.put)((0,T.updateEntities)({entities:i}));case 15:return v.next=17,(0,se.select)((0,T.getConversation)(r.conversation_id));case 17:if((c=v.sent).latest_message_id!==r.id){v.next=22;break}return l=(0,T.normalize)("conversations",go(go({},c),{},{last_message_option:a,latest_message_content:{text:""},latest_message_from_id:r.from_id})),u=l.entities,v.next=22,(0,se.put)((0,T.updateEntities)({entities:u}));case 22:if(d=s.config_version,n.deleteConfigVersion!==d){v.next=25;break}return v.abrupt("return");case 25:return v.next=27,(0,se.select)(T.currentUserSelector);case 27:return p=v.sent,f=(s.region_config||[]).find((function(e){return e.region===p.country})),g=!1,A=0,f&&f.duration&&(g=!0,A=f.duration),v.next=34,(0,se.put)((0,T.updateDelPermission)({hasDeletePermission:g,deleteConfigVersion:d,deleteConfigDuration:A}));case 34:v.next=45;break;case 36:return v.prev=36,v.t0=v.catch(1),v.next=40,(0,se.select)((0,T.getMessageSelector)(t));case 40:return h=v.sent,m=h.type,E=h.conversation_id,v.next=44,(0,se.call)(T.setToastInformationSaga,(0,T.setToastInformation)({error:v.t0}));case 44:(0,T.$tracker)({operation:w.TrackerOperation.IMPRESSION,trackerName:"error",data:{message_id:t,message_type:(0,w.getReplyTrackerMessageType)(m),conversation_id:E,error_reason:v.t0.message}});case 45:case"end":return v.stop()}}),vo,null,[[1,36]])}function wo(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(bo,Io);case 2:return e.next=4,(0,se.takeEvery)(yo,Oo);case 4:case"end":return e.stop()}}),So)}const To=o({},Co,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],l=i.sending||[],u=i.failed||[];return go(go({},e),{},{messagesRelatedMap:go(go({},a),{},o({},s,go(go({},i),{},{all:c.filter((function(e){return e!==r})),sending:l.filter((function(e){return e!==r})),failed:u.filter((function(e){return e!==r}))})))})}));var Bo,ko,Ro=re().mark(jo),Po=re().mark(Fo),Do=(0,te.createActions)(o({},le.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}}))),No=Do.messageSyncUpdate;function jo(e){var t,n,r,s,a,o,i,c,l,u,d,p,f,g,A,h,m,E,v;return re().wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.payload.conversation,n=t.id,r=t.shop_id,S.prev=2,S.next=5,(0,se.select)((0,T.getConvsMessagesRelatedSelector)(n));case 5:if(a=S.sent,o=a.all,i=void 0===o?[]:o,c=a.timeNow,l=a.oldestMessageId,0!==i.length){S.next=9;break}return S.abrupt("return");case 9:return S.next=11,(0,se.call)(T.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{shop_id:r,conversation_id:n,last_update_time:c||"0"}});case 11:if(u=S.sent,d=u.messages,p=void 0===d?[]:d,f=u.page_result,p.sort((function(e,t){return t.id-e.id})),!(p.length>0)){S.next=18;break}return g=(0,T.normalize)("messages",p),A=g.entities,S.next=18,(0,se.put)((0,T.updateEntities)({entities:A}));case 18:if(h=null===(s=p[0])||void 0===s?void 0:s.id,E=(m=f||{}).has_more,!(v=m.next_last_update_time)){S.next=23;break}return S.next=23,(0,se.put)(gt({conversationId:n,updateKey:w.MessagesRelatedKey.TIME_NOW,updateValue:v}));case 23:if(!(E&&l<h&&p.length>0)){S.next=26;break}return S.next=26,(0,se.call)(jo,{payload:{conversation:t}});case 26:S.next=35;break;case 28:if(S.prev=28,S.t0=S.catch(2),!(S.t0 instanceof T.CustomError)){S.next=35;break}return S.next=33,(0,se.put)(gt({conversationId:n,updateKey:w.MessagesRelatedKey.TIME_NOW,updateValue:"0"}));case 33:return S.next=35,(0,se.put)(wt({conversationId:n,reset:!0}));case 35:case"end":return S.stop()}}),Ro,null,[[2,28]])}function Fo(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(No,jo);case 2:case"end":return e.stop()}}),Po)}function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.SHOW_CHATBOT_IMAGE="SHOW_CHATBOT_IMAGE",e.CLOSE_CHATBOT_MEDIA_PREVIEW="CLOSE_CHATBOT_MEDIA_PREVIEW",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.FETCH_FAQ_SESSION_SUCCEED="FETCH_FAQ_SESSION_SUCCEED"}(Bo||(Bo={}));const Go=(o(ko={},Bo.SHOW_CHATBOT_IMAGE,(function(e,t){var n=t.payload;return qo(qo({},e),{},{imageUrl:n.url})})),o(ko,Bo.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(e){return qo(qo({},e),{},{imageUrl:""})})),ko);var Uo=K(1655),Ho=K(4209),Yo=K.n(Ho),Vo=K(411),zo=K(914),Wo=K(7770),Zo=K(3123),Qo=re().mark(ti),Xo=Yo()(),Ko=null,Jo=function(){var e=Er(re().mark((function e(t,n){var r,s,a;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.shopId,s=n.conversationId,e.next=3,(0,T.fetch)({parent:"faqs",subServer:"workbenchapi",resource:"bot/orders",method:"POST",payload:JSON.stringify({data:JSON.stringify(t),shop_id:r,conversation_id:s})});case 3:return(a=e.sent).data=JSON.parse(a.data),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$o={cid:(0,w.getRuntimeRegion)(),env:(0,w.getRuntimeServer)(),from:w.ChatbotFromType.LandingPage,initialization:1,auth:{accountType:1},getOrderList:Jo},ei=function(){return Ko||((Ko=new Xo.ChatbotSDK({root:"messageSection",config:$o})).use(Vo.Message),Ko.use(zo.RelatedIntent),Ko.use(Wo.OrderList),Ko.use(Zo.OptionSelector)),Ko};function ti(e){return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("updateChatbotFrom",e),ei().updateConfig({from:e});case 3:case"end":return t.stop()}}),Qo)}var ni,ri=Xo.Provider,si=(0,te.createActions)((o(ni={},Bo.SHOW_CHATBOT_IMAGE,(function(e){return{url:e.url}})),o(ni,Bo.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(){return{}})),o(ni,Bo.CHATBOT_INTENTS_REPORT_REQUEST,(function(e){return{reportTask:e.reportTask}})),o(ni,Bo.FETCH_FAQ_SESSION_SUCCEED,(function(e){return{conversationId:e.conversationId,faqSessionId:e.faqSessionId,sessionExpiryTime:e.sessionExpiryTime}})),ni)),ai=si.showChatbotImage,oi=si.closeChatbotMediaPreview,ii=si.chatbotIntentsReportRequest,ci=si.fetchFaqSessionSucceed,li=function(e){return e.startsWith("https://")||e.startsWith("http://")?e:"https://".concat(e)},ui=function(e){return"https://".concat((0,w.getMallUrl)((0,w.getRuntimeRegion)())).concat(e)},di=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.order_id,r=t.return_id;switch(e){case"order_detail_page":case"shipping_info_page":case"spl_landing_page":return ui("/user/purchase/order/".concat(n));case"my_voucher_page":return ui("/user/voucher-wallet");case"topay_order_detail_page":return ui("/user/purchase?type=9");case"drc_discuss_page":return"https://".concat((0,w.getSellerCenterUrl)((0,w.getRuntimeRegion)()),"/portal/sale/return/").concat(r);case"change_mobile_number_page":return ui("/user/account/profile");case"request_order_return_page":case"buyer_order_return_page":case"upload_evidence_page":return ui("/user/purchase?type=8");case"return_refund_detail_page":return ui("/return/detail/orderid/".concat(n,"?__mobile__=1"))}},pi=function(e,t,n){return(0,T.chatbotOrderCleaner)(e,t,n,!0)},fi=re().mark(Ci),gi=re().mark(xi),Ai=re().mark(Mi),hi=re().mark(Ii),mi=re().mark(Oi);function Ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si,_i=function(){return(0,Uo.eventChannel)((function(e){var t=ei();return t.init().then((function(){t.on("userAction",(function(t){e(t)}))})),function(){}}))};!function(e){e[e.MESSAGE=1001]="MESSAGE",e[e.SOLUTION=1002]="SOLUTION",e[e.NOT_CHATBOT=0]="NOT_CHATBOT"}(Si||(Si={}));var bi={message:Si.MESSAGE,solution:Si.SOLUTION},yi=function(e){if(!e)return Si.NOT_CHATBOT;var t=e.type;return bi[t]};function Ci(e){var t,n,r,s,a,o,i,c,l,u,d;return re().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.api,n=e.chatbotUserMessage,r=e.passThroughData.faqSessionId,s=yi(t),!n){p.next=18;break}return p.next=5,(0,se.select)(T.currentConversationSelector);case 5:return a=p.sent,o=n.type,i={interaction_type:s,bot_data:JSON.stringify(t?t.params:""),faq_session_id:r},"text"===o&&(l=n.text,i=vi(vi({},i),{},{text:l}),c=w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE),"order"===o&&(i=vi(vi({},i),{},{bot_order_info:(f=n,g=void 0,{checkout_id:f.checkout_id,order_sn:f.order_sn,total_price:f.default_price,currency:f.currency,order_status:String(f.order_status),item_image:(null===(g=f.items)||void 0===g?void 0:g.map((function(e){return null==e?void 0:e.image[0]})))||[f.image],list_type:f.list_type,has_request_refund:f.has_request_refund,buyer_pay_amount:f.buyer_pay_amount,seller_estimated_escrow:f.seller_estimated_escrow,shop_id:f.shop_id,order_id:f.order_id})}),c=w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE),p.next=12,(0,se.select)(T.currentConversationShopIdSelectors);case 12:return u=p.sent,p.next=15,(0,se.select)(T.currentConversationShopRegionSelectors);case 15:return d=p.sent,p.next=18,(0,se.put)(fs({conversationId:a.id,conversationUserId:a.to_id,messages:[{type:c,content:i,textContent:pi(n,u,d)}]}));case 18:case"end":return p.stop()}var f,g}),fi)}function xi(e){var t,n,r,s;return re().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.urlInfo)&&(n=t.url,r=t.uri_key,s=t.uri_extra,r?window.open(di(r,s)):n&&window.open(li(n))),a.next=4,(0,se.call)(Ci,e);case 4:case"end":return a.stop()}}),gi)}function Mi(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t=e.image)){n.next=4;break}return n.next=4,(0,se.put)(ai({url:t.url}));case 4:case"end":return n.stop()}}),Ai)}function Ii(e){var t;return re().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.actionType,n.t0=t,n.next="sendChatbotUserMessage"===n.t0?4:"redirect"===n.t0?7:"showImage"===n.t0?10:13;break;case 4:return n.next=6,(0,se.call)(Ci,e.data);case 6:case 9:case 12:return n.abrupt("break",13);case 7:return n.next=9,(0,se.call)(xi,e.data);case 10:return n.next=12,(0,se.call)(Mi,e.data);case 13:case"end":return n.stop()}}),hi)}function Oi(){var e;return re().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,se.call)(_i);case 2:return e=t.sent,t.next=5,(0,se.takeEvery)(e,Ii);case 5:case"end":return t.stop()}}),mi)}var wi=re().mark(Bi),Ti=re().mark(ki);function Bi(e){var t,n,r;return re().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.reportTask,s.next=3,(0,se.select)(T.currentConversationIdSelector);case 3:return n=s.sent,s.next=6,(0,se.select)(T.currentBuyerShopIdSelector);case 6:return r=s.sent,s.prev=7,s.next=10,(0,se.call)(T.fetch,{method:"POST",subServer:"workbenchapi",parent:"faqs",resource:"bot/report",payload:JSON.stringify({messages:t,conversation_id:n,shop_id:r})});case 10:s.next=14;break;case 12:s.prev=12,s.t0=s.catch(7);case 14:case"end":return s.stop()}}),wi,null,[[7,12]])}function ki(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,se.takeEvery)(ii,Bi);case 2:case"end":return e.stop()}}),Ti)}var Ri=[];function Pi(e){if((e.timeRemaining()>5||e.didTimeout)&&Ri.length){var t=ee(Ri);Ri=[],Vt.store.dispatch(ii({reportTask:t}))}Ri.length&&(0,T.requestIdleCallback)(Pi,{timeout:200})}var Di=function(e){var t;(t=Ri).push.apply(t,ee(e)),(0,T.requestIdleCallback)(Pi,{timeout:200})};function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fi=o({},Bo.FETCH_FAQ_SESSION_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.faqSessionId,a=n.sessionExpiryTime,i=e.faqSessions;return ji(ji({},e),{},{faqSessions:ji(ji({},i),{},o({},r,{faqSessionId:s,sessionExpiryTime:a}))})}));function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Gi={actions:qi(qi({},Go),Fi),watcher:[Oi,ki]};function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yi=(0,te.createActions)(o({},le.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))),Vi=Yi.setEntryPoint;const zi=o({},le.SET_ENTRY_POINT,(function(e,t){var n=t.payload;return Hi(Hi({},e),{},{entryPoint:n})}));function Wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wi(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qi=(0,te.createActions)(o({},le.UPDATE_HAS_CONFLICT,(function(e){return{hasConflict:e.hasConflict}}))),Xi=Qi.updateHasConflict;const Ki=o({},le.UPDATE_HAS_CONFLICT,(function(e,t){var n=t.payload.hasConflict;return Zi(Zi({},e),{},{toBottomHasConflict:n})}));function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ec=[Gt,js,vn,lo,Aa,ia,lt,Pn,Re,Ns,Oa,oo,ao,dn,wo,Fo].concat(ee(Gi.watcher)),tc={messageReducer:(0,te.handleActions)($i($i($i($i($i($i($i($i($i($i($i($i($i($i({},zi),Ki),Ut),Fs),uo),qn),Dn),Ar),wa),ut),un),At),To),Gi.actions),{entryPoint:{},toBottomHasConflict:!1,status:"pendingInit",messagesRelatedMap:{},messageFillStatusMap:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{},faqHistoryHash:{},faqId:null,faqHistoryStatus:"",reply:{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""},imageUrl:"",faqSessions:{}})},nc=(K(5401),function(){}),rc={closeMediaPreview:oi};const sc=(0,h.connect)((function(e){return{imageUrl:(0,T.chatbotImageSelector)(e)}}),rc)((function(e){var t=e.children,n=e.imageUrl,s=e.closeMediaPreview,a={id:"0",type:"image",url:n};return r().createElement(r().Fragment,null,!!n&&r().createElement(Q.MediaPreviewModal,{clickTracker:nc,impressionTracker:nc,actionFinishVideoTracker:nc,medias:[a],onVisibleChange:s,currentPreviewMediaId:a.id,modalZIndex:999999}),r().createElement(ri,null,t))}));var ac=K(1361),oc=K.n(ac),ic=K(6496),cc={};cc.styleTagTransform=Y(),cc.setAttributes=q(),cc.insert=F().bind(null,"head"),cc.domAPI=N(),cc.insertStyleElement=U(),P()(ic.Z,cc);const lc=ic.Z&&ic.Z.locals?ic.Z.locals:void 0;var uc=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return l(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.shopId,r=t.id,s=t.conversation_id;(0,T.$tracker)({operation:w.TrackerOperation.IMPRESSION,trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:r,conversation_id:s},shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.message,s=e.onClick,a=e.shopId,o=e.enableTranslation,i=e.locale,c=n.id,l=n.conversation_id,u=(0,w.previewMessage)({message:(0,w.fillMessagePreview)(n),enableTranslation:o,locale:i,conversationShopId:a}).text;return r().createElement("div",{className:lc.root,onClick:function(){(0,T.$tracker)({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:c,conversation_id:l},shopId:a}),s&&s()}},r().createElement("div",{className:lc.newMessage},t,": ",u),r().createElement(S(),{svg:oc(),className:lc.newMessageArrow}))}}]),n}(r().PureComponent);const dc=uc;var pc=K(8509),fc=K(8304),gc={};gc.styleTagTransform=Y(),gc.setAttributes=q(),gc.insert=F().bind(null,"head"),gc.domAPI=N(),gc.insertStyleElement=U(),P()(fc.Z,gc);const Ac=fc.Z&&fc.Z.locals?fc.Z.locals:void 0;var hc={setReplyToMessage:Jt,deleteMessageRequested:bo,updateHasConflict:Xi};const mc=(0,h.connect)((function(e){return{scrollToMessageId:(0,T.scrollToMessageIdSelector)(e),hasReplyPermission:(0,T.hasReplyPermissionSelector)(e),hasDeletePermission:(0,T.hasDeletePermissionSelector)(e),currentConversationId:(0,T.currentConversationIdSelector)(e),deleteConfigDuration:(0,T.deleteConfigDurationSelector)(e)}}),hc)((function(e){return r().createElement(pc.MessageToolbar,e)}));var Ec=K(3682),vc=K.n(Ec),Sc=K(5668),_c={};_c.styleTagTransform=Y(),_c.setAttributes=q(),_c.insert=F().bind(null,"head"),_c.domAPI=N(),_c.insertStyleElement=U(),P()(Sc.Z,_c);const bc=Sc.Z&&Sc.Z.locals?Sc.Z.locals:void 0;var yc=K(4323).t;const Cc=function(e){var t=e.code,s=(0,n.useRef)(null),a=function(){var t=e.region;window.open("".concat(w.cancelOrderPolicy[t]||w.cancelOrderPolicy.sg))};(0,n.useEffect)((function(){if(s&&s.current){var e=s.current.firstElementChild;if(e)return e.className=bc.policy,e.addEventListener("click",a),function(){e.removeEventListener("click",a)}}}),[s]);var o=(0,w.hasTargetMessageOption)(t,w.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),i=(0,w.hasTargetMessageOption)(t,w.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT);if(!o&&!i)return null;var c=o?yc("cancel_order.meta.not_send"):i?yc("cancel_order.meta.send_it"):"";return r().createElement("span",{ref:s,className:bc.root,dangerouslySetInnerHTML:{__html:c}})};var xc=K(6572),Mc=K.n(xc),Ic=K(6512),Oc=K.n(Ic),wc=K(5522),Tc={};Tc.styleTagTransform=Y(),Tc.setAttributes=q(),Tc.insert=F().bind(null,"head"),Tc.domAPI=N(),Tc.insertStyleElement=U(),P()(wc.Z,Tc);const Bc=wc.Z&&wc.Z.locals?wc.Z.locals:void 0;var kc=K(4323).t,Rc=w.MessageTypes.MSG_TYPE_OFFER;const Pc=(0,h.connect)((function(e){return{currentConversationToName:(0,T.currentConversationToNameSelector)(e)}}),{})((function(e){var t=e.message;if(!t)return r().createElement(r().Fragment,null);var n,s=e.currentConversationToName,o=e.buyerId,i=e.shop,c=t.type,l=t.textContent,u=t.to_id,d=t.errorCode,p=t.message_option,f=u===o;if(c===Rc&&l){var g=l.buyer_id===o,A=l.status,h=function(e,t){if([w.OfferStatus.ACCEPTED,w.OfferStatus.REJECTED].includes(e)){var n=e.slice(0,e.length-2);return t?f?null:kc("conversation_detail.message_list.".concat(n,"_offer")):f?kc("conversation_detail.message_list.".concat(n,"_offer_user"),{username:s}):null}if(w.OfferStatus.CANCELLED)return t?kc("conversation_detail.message_list.cancel_offer",{username:s}):kc("conversation_detail.message_list.cancel_offer_self")}(A,g);switch(A){case w.OfferStatus.ACCEPTED:h&&(n=r().createElement(vc(),{content:h,type:w.AlertType.normal,showIcon:!0,icon:r().createElement(S(),{className:Bc.successIcon,svg:Oc()})}));break;case w.OfferStatus.REJECTED:case w.OfferStatus.CANCELLED:h&&(n=r().createElement(vc(),{content:h,type:w.AlertType.normal}))}}var m={showIcon:!0,icon:r().createElement(S(),{className:Bc.warnIcon,svg:Mc()}),type:w.AlertType.normal};if(d===w.MessageErrorCode.FORBIDDEN)n=r().createElement(vc(),a({content:kc("conversation_detail.message_list.error_message_blocked",{username:s})},m));else if(d===w.MessageErrorCode.BLACKLIST)n=r().createElement(vc(),a({content:r().createElement(pc.BlacklistHint,null)},m));else if(d===w.MessageErrorCode.UNVERIFIED_PHONE_NUMBER)n=r().createElement(vc(),a({content:kc("conversation_detail.message_list.unverified_phone_number")},m));else if(f&&((0,w.hasTargetMessageOption)(p,w.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)||(0,w.hasTargetMessageOption)(p,w.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT))){var E=i&&i.country?i.country.toLowerCase():"sg";n=r().createElement(vc(),a({content:r().createElement(Cc,{code:p,region:E})},m))}return n?r().createElement("span",{className:Bc.metaContent},n):r().createElement(r().Fragment,null)}));var Dc=K(8733),Nc={};Nc.styleTagTransform=Y(),Nc.setAttributes=q(),Nc.insert=F().bind(null,"head"),Nc.domAPI=N(),Nc.insertStyleElement=U(),P()(Dc.Z,Nc);const jc=Dc.Z&&Dc.Z.locals?Dc.Z.locals:void 0;var Fc=K(4323).t;const Lc=r().memo((function(){return r().createElement("div",{className:jc.newMessageTip},r().createElement("span",{className:jc.newMessageContent},Fc("conversation_detail.message_list.unread_messages")))}));K(4148);var qc=K(2839),Gc=K.n(qc),Uc=K(1696),Hc={};Hc.styleTagTransform=Y(),Hc.setAttributes=q(),Hc.insert=F().bind(null,"head"),Hc.domAPI=N(),Hc.insertStyleElement=U(),P()(Uc.Z,Hc);const Yc=Uc.Z&&Uc.Z.locals?Uc.Z.locals:void 0;var Vc=K(2066),zc=K.n(Vc),Wc=K(4323).t,Zc=r().memo((function(e){var t=e.message,n=e.resendMessage,s=t.send_status,a=t.errorCode,o=t.message_option,i=s===w.MessageSendStatus.FAILED,c=a===w.MessageErrorCode.BLACKLIST,l=(0,w.hasTargetMessageOption)(o,w.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),u=r().createElement("div",{className:Yc.iconWrap},r().createElement(S(),{svg:zc(),className:Yc.iconBase}));return i?c?u:r().createElement("div",{className:Yc.iconWrap},r().createElement(Gc(),{content:Wc("conversation_detail.message_list.resend"),zIndex:w.MAX_Z_INDEX},r().createElement("div",null,r().createElement(S(),{svg:zc(),className:Yc.icon,onClick:n})))):l?u:r().createElement(r().Fragment,null)}));Zc.displayName="ErrorContent";const Qc=Zc;var Xc=K(3710),Kc=K.n(Xc),Jc=K(6322),$c={};$c.styleTagTransform=Y(),$c.setAttributes=q(),$c.insert=F().bind(null,"head"),$c.domAPI=N(),$c.insertStyleElement=U(),P()(Jc.Z,$c);const el=Jc.Z&&Jc.Z.locals?Jc.Z.locals:void 0;var tl=K(4323).t,nl=w.MessageTypes.MSG_TYPE_VIDEO,rl=w.MessageTypes.MSG_TYPE_IMAGE,sl=w.MessageTypes.MSG_TYPE_STICKER,al=r().memo((function(e){var t=e.type,n=e.status,s=e.videoUploaded,a=e.handleCancelMessage;return n===w.MessageSendStatus.SENDING?r().createElement("div",{className:el.sendingWrap},t!==nl||s?[rl,sl].includes(t)?null:r().createElement(pc.LoadingSpin,{theme:"dark"}):r().createElement(Gc(),{content:tl("common.cancel"),zIndex:w.MAX_Z_INDEX},r().createElement("div",null,r().createElement(S(),{svg:Kc(),className:el.icon,onClick:a})))):null}));const ol=(0,h.connect)((function(e,t){var n=!1;return t.type===nl&&(n="successful"===((0,T.selectVideoInfoByKey)(t.requestId)(e)||{}).status),{videoUploaded:n}}),{})(al);var il=K(4321),cl=K.n(il),ll=K(8310),ul=K.n(ll),dl=K(1177),pl={};pl.styleTagTransform=Y(),pl.setAttributes=q(),pl.insert=F().bind(null,"head"),pl.domAPI=N(),pl.insertStyleElement=U(),P()(dl.Z,pl);const fl=dl.Z&&dl.Z.locals?dl.Z.locals:void 0;var gl=K(7370),Al={};Al.styleTagTransform=Y(),Al.setAttributes=q(),Al.insert=F().bind(null,"head"),Al.domAPI=N(),Al.insertStyleElement=U(),P()(gl.Z,Al);const hl=gl.Z&&gl.Z.locals?gl.Z.locals:void 0;var ml=K(4323).t,El=r().memo((function(e){var t=e.isSend,n=e.isScChat,s=e.content,a=e.sourceDesc,o=e.isSubAccount,i=e.shopId,c=e.hasAccess,l=e.messageId,u=e.buyerShopId,d=e.conversationId,p=e.visitShopSellerCenterRequested,f="";o||(f="https://".concat((0,w.getSellerCenterUrl)(),"/portal/sale/").concat(s.id));var g=(0,w.getMallOrderUrl)(s,t?u:i),A=s.id,h=s.image,m=s.status,E=s.image_hash,v=s.refund_serial_number,S=s.serial_number,_=s.receivables,b=ul()(fl.shortRoot,c?fl.hover:""),y="".concat(ml("common.order.order_id"),": ").concat("refund"===m?v:S),C="".concat(ml("conversation_detail.message_list.order_total"),": ").concat(_);return r().createElement("div",{className:b,onClick:function(){(0,T.$tracker)({shopId:i,trackerName:"clickVisitOrderInSellerCenter",data:{order_id:A,conversation_id:d,message_id:l}}),n?(0,w.redirectionWithAccess)({access:c,isSubAccount:o,action:function(){return p({shopId:i,orderId:A})},url:f}):window.open(g)}},r().createElement("div",{className:fl.header},a),r().createElement("div",{className:fl.divider}),r().createElement("div",{className:fl.body},r().createElement("div",{className:fl.detail},r().createElement("div",{className:fl.imgWrapper},r().createElement(cl(),{src:h,hash:E,className:fl.img})),r().createElement("div",{className:fl.content},r().createElement("div",{className:hl.line},y),r().createElement("div",{className:hl.line},C),r().createElement("div",{className:hl.status},ml((0,w.getOrderStatusTransifyKey)(m)))))))}));El.displayName="OrderMessageSource";const vl=El;var Sl=K(7625),_l={};_l.styleTagTransform=Y(),_l.setAttributes=q(),_l.insert=F().bind(null,"head"),_l.domAPI=N(),_l.insertStyleElement=U(),P()(Sl.Z,_l);const bl=Sl.Z&&Sl.Z.locals?Sl.Z.locals:void 0;var yl=K(4323).t,Cl=w.ProductStatusUsingNumber.DELETED,xl=r().memo((function(e){var t=e.isScChat,n=e.content,s=e.sourceDesc,a=e.isSubAccount,i=void 0!==a&&a,c=e.hasAccess,l=void 0!==c&&c,u=e.messageId,d=e.conversationId,p=e.visitShopSellerCenterRequested,f=n.id,g=n.status,A=n.shop_id,h=n.region,m=n.name,E=n.image,v=n.image_hash,S=n.original_price,_=n.actual_price,b=g===Cl,y=i?"":"https://".concat((0,w.getSellerCenterUrl)(),"/portal/product/").concat(f),C="https://".concat((0,w.getMallUrl)(h),"/product/").concat(A,"/").concat(f),x=function(e){(0,T.$tracker)({shopId:A,trackerName:e,data:{itemid:f,message_id:u,conversation_id:d}})},M=function(){b||(x("clickViewProductInMall"),window.open(C))},I=ul()(fl.link,o({},fl.deleted,b)),O=r().createElement(r().Fragment,null,r().createElement("div",{className:fl.header},s),r().createElement("div",{className:fl.divider}),b?r().createElement(pc.UnavailableProduct,{size:"large"}):r().createElement("div",{className:fl.body},r().createElement("div",{className:fl.imgWrapper},r().createElement(cl(),{src:E,hash:v,className:fl.img})),r().createElement("div",{className:fl.content},r().createElement("div",{className:fl.name,title:m},m),r().createElement("div",{className:fl.productDetail},S&&r().createElement("div",{className:bl.originalPrice},S),r().createElement("div",{className:ul()(bl.currentPrice,o({},bl.noOrigin,!S))},_)))));return t?r().createElement("div",{className:fl.root},O,r().createElement("div",{className:fl.footer},r().createElement("div",{className:I,onClick:M},yl("conversation_detail.workstation.conversation_origin.view_in_mall")),l&&r().createElement("div",{className:I,onClick:function(){b||(x("clickViewProductInSellerCenter"),(0,w.redirectionWithAccess)({access:l,isSubAccount:i,action:function(){return p({shopId:A,itemId:f})},url:y}))}},yl("conversation_detail.workstation.conversation_origin.view_in_seller_center")))):r().createElement("div",{className:ul()(fl.shortRoot,fl.hover),onClick:M},O)}));xl.displayName="ProductMessageSource";const Ml=xl;var Il=K(4323).t,Ol=r().memo((function(e){var t=e.isSend,s=e.message,a=e.shopId,i=e.isScChat,c=e.isSubAccount,l=void 0!==c&&c,u=e.shopAccess,d=(u=void 0===u?{}:u).hasViewOrderAccess,p=void 0!==d&&d,f=u.hasViewProductAccess,g=void 0!==f&&f,A=e.visitShopSellerCenterRequested,h=s.sourceContent,m=s.id,E=s.source_type,v=s.conversation_id,S="order"===E,_="product"===E;if((0,n.useEffect)((function(){var e,t=o({message_id:m,conversation_id:v},"".concat(E,"_id"),null==h||null===(e=h.content)||void 0===e?void 0:e.id);S&&(0,T.$tracker)({operation:w.TrackerOperation.IMPRESSION,shopId:a,trackerName:"impressionOrderFromSourceInSpecialMessage",data:t}),_&&(0,T.$tracker)({operation:w.TrackerOperation.IMPRESSION,shopId:a,trackerName:"impressionProductFromSourceInSpecialMessage",data:t})}),[]),!h)return null;var b=h.content.shop_id===a,y=Il("source.".concat(t?"buyer_view_enquiring":"seller_view_enquiring"),{object:Il("object.product")}),C=Il("source.".concat(t?b?"seller_view_chatting":"buyer_view_enquiring":b?"seller_view_enquiring":"buyer_view_chatting"),{object:Il("object.order")});return"product"===E?r().createElement(Ml,{isScChat:i,messageId:m,conversationId:v,content:h.content,isSubAccount:l,sourceDesc:y,hasAccess:!!g,visitShopSellerCenterRequested:A}):"order"===E?r().createElement(vl,{shopId:a,isSend:t,isScChat:i,messageId:m,sourceDesc:C,isSubAccount:l,buyerShopId:t?s.to_shop_id:s.from_shop_id,conversationId:v,content:h.content,hasAccess:!!p,visitShopSellerCenterRequested:A}):null}));Ol.displayName="MessageSource";var wl={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const Tl=(0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),wl)(Ol);var Bl,kl;function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dl=w.MessageTypes.MSG_TYPE_ORDER,Nl=w.MessageTypes.MSG_TYPE_PRODUCT,jl=w.MessageTypes.MSG_TYPE_OFFER,Fl=w.MessageTypes.MSG_TYPE_VOUCHER,Ll=w.MessageTypes.MSG_TYPE_VIDEO,ql=w.MessageTypes.MSG_TYPE_TEXT,Gl=w.MessageTypes.MSG_TYPE_BUNDLE_DEAL,Ul=w.MessageTypes.MSG_TYPE_FLASH_SALE,Hl=w.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,Yl=w.MessageTypes.MSG_TYPE_ITEM_LIST,Vl=w.MessageTypes.MSG_TYPE_SHOPPING_CART,zl=w.MessageTypes.MSG_TYPE_RATE_CARD,Wl=(o(Bl={},jl,"impressionOfferMessage"),o(Bl,Dl,"impressionOrderMessage"),o(Bl,Nl,"impressionProductMessage"),o(Bl,Fl,"impressionVoucherMessage"),o(Bl,Ll,"impressionVideoMessage"),o(kl={},Gl,"impressionBundleDealCard"),o(kl,Ul,"impressionFlashSaleCard"),o(kl,Fl,"impressionVoucherCard"),o(kl,Yl,"impressionProductListCard"),o(kl,Nl,"impressionProductMessage"),o(kl,Hl,"impressionRateCard"),o(kl,Vl,"impressionCartCard"),o(kl,Ll,"impressionVideoMessage"),o(kl,Dl,"impressionOrderMessage"),kl),Zl=function(e){var t=e.message,n=e.conversationShopId,r=e.isSend,s=e.extraParams,a=void 0===s?{}:s,o=t.id,i=t.type,c=t.content,l=t.source,u=t.to_id,d=t.from_id,p=t.request_id,f=t.crm_activity_id,g=t.textContent,A=void 0===g?{}:g,h=t.conversation_id,m={crm_activity_id:f||"",from_source:f?"CRM":""},E=c["".concat(i,"_id")];switch(i){case ql:m={message_type:w.ApiMessageTypes[ql],is_sender:r};break;case Gl:m.bundle_deal_id=c.bundle_deal_id;break;case Ul:m.flash_sale_id=c.flash_sale_id;break;case Hl:m.order_id=c.order_id;break;case Nl:m={product_id:E,product_shopid:n};break;case Dl:m={order_id:E,order_shopid:n};break;case jl:m={offer_id:E,product_id:c.product_id,offer_shopid:n};break;case Fl:var v=A,S=v.status,_=void 0===S?"":S,b=v.claimed;m.voucher_id=c.voucher_id,r||(m=Pl(Pl({},m),{},{source:l,voucher_status:_===w.VoucherStatus.FINISHED?"expired":b?"claimed":"unclaimed",is_sender:r,promotion_id:c.voucher_id,promotion_shopid:n}));break;case Ll:m={message_id:o===p?0:o,is_sender:r,to_user_id:u,from_user_id:d,video_original_duration:c.duration_seconds};break;case zl:m={is_sender:r}}return{data:Pl(Pl({conversation_id:h,message_id:o},a),m),shopId:n}};function Ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Xl=w.MessageTypes.MSG_TYPE_NOTIFICATION,Kl=w.MessageTypes.MSG_TYPE_OFFER,Jl=w.MessageTypes.MSG_TYPE_VIDEO,$l=w.MessageTypes.MSG_TYPE_TEXT,eu=w.MessageTypes.MSG_TYPE_NEW_FAQ,tu=w.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,nu=w.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,ru=["index","timeFlag","lastMessageFlag","messageFillStatus","messageSourceFillStatus","newMessageFlag"],su=[eu,tu,nu];const au=function(e){var t=function(t){p(s,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(s);function s(e,t){var r;i(this,s),r=n.call(this,e,t);var a=e.index,c=e.message,l=e.newMessageFlag,d=e.exposedMessageIds,p=void 0===d?[]:d,f=e.addExposedMessageId,g=e.locale,A=e.currentFaqSessionInfo,h=A.faqSessionId,m=A.sessionExpiryTime,E=e.conversationShopId,v=c.id,S=c.type,_=c.content,b=c.faq_session_id;(0===a||S===Kl||l)&&(r.needRemeasure=!0),r.handleReload=r.handleReload.bind(u(r)),r.handleResendMessage=r.handleResendMessage.bind(u(r)),r.handleCancelMessage=r.handleCancelMessage.bind(u(r)),r.handleMessageIsSend=r.handleMessageIsSend.bind(u(r)),r.timer=null,r.messageNode=null,r.shouldExpose=!0,r.clearTimer=r.clearTimer.bind(u(r)),r.handleMouseEnter=r.handleMouseEnter.bind(u(r)),r.handleMouseLeave=r.handleMouseLeave.bind(u(r)),r.state={isHover:!1};var y=su.includes(S);if(r.needExpose="function"==typeof IntersectionObserver&&(Wl[S]&&!p.includes(v)||y),r.needExpose){var C={root:document.querySelector("#messagesContainer"),threshold:.5};r.observer=new IntersectionObserver((function(e){var t=e[0];if(t&&t.isIntersecting&&t.intersectionRatio>=.5){if(r.timer||!r.shouldExpose||y||(r.shouldExpose=!1,r.timer=setTimeout((function(){(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:w.TrackerOperation.IMPRESSION,trackerName:Wl[S]},Zl({message:c,conversationShopId:E,isSend:r.handleMessageIsSend(c)}))),r.clearTimer(),f&&f(v)}),1e3)),y&&r.shouldExpose){r.shouldExpose=!1;var n=_.intents,s=void 0===n?[]:n,a=_.categories,i=void 0===a?[]:a,l=_.other_faq_types,u=void 0===l?[]:l,d=_.questions,p=void 0===d?[]:d;(s.length||i.length||u.length||p.length)&&hr(h,b,m)&&Di((0,w.handleReportItems)(_,S===eu,g))}}else t&&t.intersectionRatio<=0&&(r.shouldExpose=!0)}),C)}return r}return l(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.hasSourceMessageMap,r=e.message,s=e.showWarningMessageIds,a=this.props,o=a.message,i=a.showWarningMessageIds,c=!1;r.type===Kl?c=(r.textContent&&r.textContent.status)!==(o.textContent&&o.textContent.status):(c=["hasMessageSource","newMessageFlag","errorCode","status","send_status","content"].some((function(e){return r[e]!==o[e]})))||(c=ru.some((function(n){return t.props[n]!==e[n]}))),n[o.id]!==o.hasMessageSource&&(c=!0,n[o.id]=o.hasMessageSource),r.type===$l&&s.indexOf(r.id)!==i.indexOf(o.id)&&(c=!0),!(0,w.isDeletedMessage)(r)&&(0,w.isDeletedMessage)(o)&&(c=!0),c&&(this.needRemeasure=c),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.message,r=t.fillMessageRequested;r({message:n,isSource:e})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"handleResendMessage",value:function(){var e=this.props,t=e.message,n=e.resendMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;t.type===Jl&&(0,T.$tracker)({shopId:s,trackerName:"clickResendVideo",data:{message_id:a,conversation_id:r}}),n({conversationId:r,message:t})}},{key:"handleCancelMessage",value:function(){var e=this.props,t=e.message,n=e.cancelSendingMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;(0,T.$tracker)({shopId:s,trackerName:"clickCancelVideo",data:{message_id:a,conversation_id:r}}),n({id:a,conversationId:r})}},{key:"handleMessageIsSend",value:function(e){var t=this.props.conversationBuyerId;return e.to_id===t}},{key:"getMessageClass",value:function(e){var t=e.isSend,n=e.isSystem,r=e.isChatbot,s=e.isSecurityTips;return n?Ac.message:r||s?"":t?Ac.messageSend:Ac.messageReceive}},{key:"renderMessage",value:function(t){var n=this,s=this.props,a=s.message,o=s.measure,i=s.timeFlag,c=s.isScChat,l=s.isSubAccount,u=s.newMessageFlag,d=s.isLastSystemMessage,p=s.showWarningMessageIds,f=s.shop,g=s.conversationId,A=s.conversationShopId,h=s.conversationBuyerId,m=s.conversationStatus,E=s.isInFaqHistoryModal,v=void 0!==E&&E,S=s.messageFillStatus,_=s.messageSourceFillStatus,b=a.isFaking,y=a.type,C=a.hasMessageSource,x=a.send_status,M=a.content,I=void 0===M?{}:M,O=a.from_shop_id,T=a.request_id,B=a.sourceContent,k=y===w.MessageTypes.MSG_TYPE_TEXT&&!t&&-1!==p.indexOf(a.id),R=y===w.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,P=y===Xl||(0,w.getMessageIsRatecard)(y,I)&&(t||l),D=y===w.MessageTypes.MSG_TYPE_SECURITY_TIPS,N=this.getMessageClass({isSend:t,isSystem:P,isChatbot:R,isSecurityTips:D}),j=R?"":Ac.bubble,F=!(C||i||d||P)||i&&P?"4px":"8px",L=(f&&f.country?f.country:"SG").toLowerCase(),q="closed"===m,G=(0,w.isDeletedMessage)(a);return r().createElement(r().Fragment,null,u&&r().createElement(Lc,null),i&&r().createElement("div",{className:Ac.messageTime},i),C&&r().createElement("div",{className:Ac.center,style:{marginTop:i?"1.5em":"0.75em"}},_?r().createElement(pc.Processor,{status:_,messageType:"source",content:B,reloadRequest:function(){return n.handleReload(!0)},isScChat:c}):r().createElement(Tl,{message:a,isSubAccount:l,isScChat:c,shopId:A,isSend:t,region:L})),!b&&r().createElement("div",{style:{marginTop:F},className:N},t&&r().createElement(Qc,{isClosed:q,message:a,resendMessage:this.handleResendMessage}),t&&!P&&r().createElement(ol,{type:y,status:x,requestId:T,handleCancelMessage:this.handleCancelMessage}),G?r().createElement(pc.DeletedMessage,{isSend:t}):r().createElement(mc,{isSend:t,message:a,isInFaqHistoryModal:v,isClosed:q,isHoverBaseMsg:this.state.isHover},r().createElement("div",{className:j},S?r().createElement(pc.Processor,{status:S,messageType:y,content:I,reloadRequest:function(){return n.handleReload()},isScChat:c}):r().createElement(e,{message:a,isScChat:c,isSend:t,measure:o,isSubAccount:l,shop:f,region:L,conversationId:g,conversationShopId:A,conversationBuyerId:h,conversationStatus:m,isInFaqHistoryModal:v,handleMessageIsSend:this.handleMessageIsSend})))),r().createElement(Pc,{message:a,buyerId:h,shop:f}),k&&r().createElement(pc.TextWarning,{shopId:O,region:L}))}},{key:"handleMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,s=t.message,a=t.isLastMessage,o=t.className,i=this.renderMessage(this.handleMessageIsSend(s)),c="".concat(Ac.root," ").concat(a?Ac.lastMessage:""," ").concat(o);return r().createElement("div",{style:n,className:c,ref:function(t){return e.messageNode=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i)}}]),s}(r().PureComponent);return t.defaultProps={showWarningMessageIds:[]},t};var ou={handleSensitiveUrl:fa,changeTranslateStatus:Xs,translateMessagesRequested:Qs,scrollToMessage:en,showTranslateFeedback:Ks};const iu=au((0,h.connect)((function(e){return{shopTranslationSettings:(0,T.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,T.currentConversationTranslationAccessSelector)(e),locale:(0,T.localeSelector)(e)}}),ou)((function(e){var t=e.isScChat,n=e.isSend,s=e.shopTranslationSettings,a=e.measure,o=e.handleSensitiveUrl,i=e.changeTranslateStatus,c=e.translateMessagesRequested,l=e.message,u=e.conversationShopId,d=e.currentConversationTranslationAccess,p=e.scrollToMessage,f=e.conversationId,g=e.conversationBuyerId,A=e.showTranslateFeedback,h=e.handleMessageIsSend,m=e.locale,E=l.send_status,v=l.message_option,S=l.content,_=l.id,b=l.country,y=l.translateStatus,C=l.toggleTranslateStatus,x=l.type,M=l.quoted_msg,I=l.source,O=(S||{}).translation,T=(O=void 0===O?{}:O).text,B=s[u]||{},k=B.translationPreference,R=B.autoTranslationStatus,P=B.source,D=B.inTranslationFeedbackWhitelist,N=R===w.SwitchStatus.ENABLED,j=(0,w.handleDisplayTranslation)(N,n,T,t,d);return r().createElement(pc.TextMessage,{buyerId:g,shopId:u,sendStatus:E,messageOption:v,enableTranslation:j,translationPreference:k,translationSource:P,id:_,measure:a,translateStatus:y,toggleTranslateStatus:C,handleSensitiveUrl:o,changeTranslateStatus:i,translateMessagesRequested:c,content:S,isScChat:t,enableAutoTranslation:N,isSend:n,country:b,type:x,replyToMessage:M,scrollToMessage:p,conversationId:f,messageSource:I,showTranslateFeedback:A,inTranslationFeedbackWhitelist:D,handleMessageIsSend:h,locale:m})})));function cu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uu={showMediaPreviewModalRequested:T.showMediaPreviewModalRequested,scrollToMessage:en};const du=au((0,h.connect)((function(){return{}}),uu)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.scrollToMessage,c=e.handleMessageIsSend,l=e.conversationShopId,u=o.id,d=o.request_id,p=o.content,f=o.quoted_msg,g=o.conversation_id,A=(0,n.useContext)(Z),h={data:{conversation_id:g,message_id:u===d?0:u},shopId:l};(0,n.useEffect)((function(){p.unknown_qr_code&&!t&&(0,T.$tracker)(lu({operation:w.TrackerOperation.IMPRESSION,trackerName:"impressionImageMessage"},h))}),[]);var m=function(){return a({messageId:u})};return r().createElement(pc.ImageMessage,{isSend:t,imgCache:A,id:u,request_id:d,content:p,measure:s,replyToMessage:f,scrollToMessage:i,handleMessageIsSend:c,openPreviewModal:m,handleOpenQrCode:function(){m(),(0,T.$tracker)(lu({trackerName:"clickPreviewQrcode"},h))}})})));var pu=K(8550),fu=K.n(pu),gu=K(5945),Au=function(e,t){var n=e.id,r=e.status,s=e.shop_id,a=e.region;(0,w.checkProductDeleted)(n,r)||(window.open("https://".concat((0,w.getMallUrl)(a),"/product/").concat(s,"/").concat(n,"/")),t&&t(e))};const hu=au((function(e){var t=e.isSend,n=e.message,s=e.measure,a=e.conversationShopId,o=e.conversationStatus,i=n.id,c=n.textContent,l=void 0===c?{}:c,u=n.conversation_id;return r().createElement(pc.OfferMessage,{id:i,isSend:t,measure:s,onReply:function(e){(0,T.$tracker)({trackerName:e.isAccept?"clickAcceptOffer":"clickRejectOffer",data:{itemid:l.id,conversation_id:u,message_id:i},shopId:a}),function(e){fu().put(gu.default.replyOfferRequested({payload:e}))}(e)},textContent:l,handleClickItem:Au,conversationClosed:"closed"===o})}));function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Eu={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const vu=au((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),Eu)((function(e){var t=e.isScChat,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.isSend,i=e.message,c=e.shopAccess,l=void 0===c?{}:c,u=e.conversationShopId,d=l.hasViewProductAccess,p=i.textContent,f=p||{},g=f.id,A=f.status,h=f.shop_id,m=f.region,E=(0,w.checkProductDeleted)(g,A),v=h===u,S=t||!v||!n||d;return r().createElement(pc.ProductMessage,{item:p,isSend:a,deleted:E,hasAccess:S,handleClickMessage:function(){S&&!E&&((0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"impressionProductMessage"},Zl({message:i,isSend:a,conversationShopId:u,extraParams:{itemid:g}}))),v?n?(0,w.redirectionWithAccess)({access:!0,isSubAccount:!0,action:function(){return s({shopId:h,itemId:g})}}):t?window.open("https://".concat((0,w.getSellerCenterUrl)((0,w.isVisitingCNSC)()?"cn":m),"/portal/product/").concat(g)):window.open("https://".concat((0,w.getMallUrl)(m),"/product/").concat(h,"/").concat(g,"/")):window.open("https://".concat((0,w.getMallUrl)(m),"/product/").concat(h,"/").concat(g,"/")))}})})));var Su=K(5965),_u={};_u.styleTagTransform=Y(),_u.setAttributes=q(),_u.insert=F().bind(null,"head"),_u.domAPI=N(),_u.insertStyleElement=U(),P()(Su.Z,_u);const bu=Su.Z&&Su.Z.locals?Su.Z.locals:void 0;var yu=K(4323).t;function Cu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mu={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested,copySucceedFeedback:T.copySucceedFeedback};const Iu=au((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),Mu)((function(e){var t=e.isSubAccount,n=e.isSend,s=e.visitShopSellerCenterRequested,a=e.message,i=e.shopAccess,c=void 0===i?{}:i,l=e.conversationShopId,u=e.region,d=e.copySucceedFeedback,p=e.isScChat,f=a.content,g=a.textContent,A=(a.type,f||{}),h=A.shop_id,m=A.order_id,E=A.bot_order_info,v=(E=void 0===E?{}:E).shop_id,S=E.order_id,_=c.hasViewOrderAccess,b=void 0!==_&&_,y=h||v,C=m||S,x=y===l;return!x&&t?r().createElement("div",{className:ul()(bu.order,o({},bu.send,n))},r().createElement("span",{className:bu.link,onClick:function(){window.open((0,w.getMallOrderUrl)({id:m},y,u))}},yu("conversation_detail.message_list.order_not_in_your_shop"))):r().createElement(pc.OrderMessage,{region:u,hasViewOrderAccess:b,isSend:n,isScChat:p,textContent:g,handleClickMessage:function(){if(!x)return window.open((0,w.getMallOrderUrl)(g,y,u)),null;(0,T.$tracker)(xu({trackerName:"clickOrderMessage"},Zl({message:a,isSend:n,conversationShopId:l}))),(0,w.redirectionWithAccess)({access:b,isSubAccount:t,action:function(){return s({shopId:y,orderId:C})},url:"https://".concat((0,w.getSellerCenterUrl)(u),"/portal/sale/").concat(C)})},copySucceedFeedback:function(){d(),(0,T.$tracker)(xu({trackerName:"clickCopyOrderSN"},Zl({message:a,isSend:n,conversationShopId:l})))}})})));var Ou={scrollToMessage:en};const wu=au((0,h.connect)((function(){return{}}),Ou)((function(e){var t=e.region,s=e.message,a=e.isSend,o=e.scrollToMessage,i=e.conversationBuyerId,c=e.handleMessageIsSend,l=s.send_status,u=s.request_id,d=s.id,p=s.content,f=s.quoted_msg,g=a&&l===w.MessageSendStatus.SENDING,A=(0,n.useContext)(Z);return r().createElement(pc.StickerMessage,{imgCache:A,isSending:g,id:d,content:p,country:t,request_id:u,isSend:a,replyToMessage:f,scrollToMessage:o,conversationBuyerId:i,handleMessageIsSend:c})}))),Tu=au((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),null)((function(e){var t=e.isSend,s=e.message,a=e.locale,o=e.conversationId,i=e.conversationBuyerId,c=s.type,l=s.content,u=s.textContent,d=s.id;return(0,n.useEffect)((function(){w.needWarnNotificationType.includes(l.notification_type)&&(0,T.$tracker)({operation:w.TrackerOperation.IMPRESSION,trackerName:"game_quota_reach"===l.notification_type?"impressionMsgGamesFailQuota":"impressionMsgGamesFailBlock",data:{conversation_id:o,convo_userid:i,message_id:d,is_sender:t}})}),[]),r().createElement(pc.SystemMessage,{type:c,locale:a,isSend:t,content:l,textContent:u||{}})})));function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ru={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const Pu=au((0,h.connect)((function(e){return{isSubAccount:(0,T.isSubAccountSelector)(e),shopAccess:(0,T.shopAccessSelector)(e),shop:(0,T.currentConversationShopSelectors)(e)}}),Ru)((function(e){var t=e.isSend,s=e.visitShopSellerCenterRequested,a=e.isSubAccount,o=e.message,i=e.shopAccess,c=e.shop.country,l=void 0===c?"":c,u=e.conversationShopId,d=Zl({message:o,isSend:t,conversationShopId:u});(0,n.useEffect)((function(){!t&&(0,T.$tracker)(ku({operation:w.TrackerOperation.IMPRESSION,trackerName:"impressionVoucherForReceiverInMinichat"},d))}),[]);var p=i.hasViewVoucherAccess,f=o.content,g=o.textContent,A=void 0===g?{}:g,h=o.id,m=A.country,E=A.id,v=A.url,S=f.shop_id,_=(f.source,function(){var e;v&&(S=(0,w.getUrlParam)("shop_id",v),(0,w.getUrlParam)("source",v)),e={messageId:h},fu().put(gu.default.claimVoucherRequested({payload:e})),(0,T.$tracker)(ku({trackerName:"clickClaimVoucher"},d))});return r().createElement(pc.VoucherMessage,{voucher:A,isSend:t,shopRegion:l,isSubAccount:a,hasViewVoucherAccess:p,onOperatorClick:function(e){switch(e){case w.VoucherOperateType.DETAILS:!function(){v&&(S=(0,w.getUrlParam)("shop_id",v));var e="https://".concat((0,w.getSellerCenterUrl)(m),"/portal/marketing/vouchers/").concat(E);a?s({url:e,shopId:S}):window.open(e)}();break;case w.VoucherOperateType.CLAIM:_();break;case w.VoucherOperateType.USE:v&&(S=(0,w.getUrlParam)("shop_id",v)),window.open("https://".concat((0,w.getMallUrl)(m),"/shop/").concat(S))}}})})));function Du(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Nu=au((function(e){var t=e.isSend,n=e.message,s=e.region,a=e.conversationShopId,i=n.type,c=n.content,l=function(e){var r=e.id;(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Du(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Du(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickProductListMessage"},Zl({message:n,isSend:t,conversationShopId:a,extraParams:{itemid:r}})))};return r().createElement(pc.ProductsMessage,{region:s,type:i,isSend:t,content:c,handleClickItem:function(e){Au(e,l)}})})),ju=au((0,h.connect)((function(e){return{currentUser:(0,T.currentUserSelector)(e)}}),{})((function(e){var t=e.measure,s=e.isSend,a=e.conversation,o=e.message,i=o.id,c=o.conversation_id,l=o.request_id,u=o.textContent,d=(0,n.useContext)(Z);return r().createElement(pc.FeedStoryMessage,{imgCache:d,id:i,requestId:l,measure:t,isSend:s,textContent:u,handleTrackStory:function(){(0,T.$tracker)({shopId:a.shop_id,trackerName:"clickHandleStoryMessage",data:{story_id:u.id,message_id:i,conversation_id:c}})}})})));function Fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const qu=au((function(e){var t=e.measure,n=e.isSend,s=e.message,a=e.region,o=e.conversationShopId,i=s.content,c=i.cart_items,l=void 0===c?[]:c,u=i.shop_id,d=s.textContent,p=void 0===d?[]:d,f=function(e){var t=e.id;(0,T.$tracker)(Lu({trackerName:"clickCartProduct"},Zl({message:s,isSend:n,conversationShopId:o,extraParams:{itemid:t}})))};return r().createElement(pc.CartReminderMessage,{isSend:n,measure:t,products:p,cartItemsCount:l.length,handleClickItem:function(e){Au(e,f)},handleClickMessage:function(){var e=function(e,t){var n=e.map((function(e){var n=e.model_id,r=e.item_id,s=e.group_id,a={shopId:t,itemId:r};return n&&(a.modelId=n),s&&"0"!==s&&(a.itemGroupId=s),a}));return(0,w.encode)(JSON.stringify(n))}(l,u);window.open("https://".concat((0,w.getMallUrl)(a),"/cart?referrerItems=").concat(e,"&source=seller_chat")),(0,T.$tracker)(Lu({trackerName:"clickCartButton"},Zl({message:s,isSend:n,conversationShopId:o})))}})}));K(4323).t;var Gu=function(e,t){return e>t},Uu=function(e){return e[e.length-1]},Hu=function(e,t){return e?function(){}:t},Yu=function(e,t){return e.length===t.length&&e.every((function(e,n){var r=t[n];return JSON.stringify(e)===JSON.stringify(r)}))},Vu={sendMessagesRequested:fs};const zu=au((0,h.connect)((function(){return{}}),Vu)((function(e){var t=e.isSend,n=e.measure,s=e.sendMessagesRequested,a=e.message,o=e.conversationShopId,i=e.conversationBuyerId,c=e.conversationId,l=e.isInFaqHistoryModal,u=a.content,d=a.faq_session_id,p=Hu(l,s);return r().createElement(pc.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:p,content:u,conversationId:c,shopId:o,conversationUserId:i,faqSessionId:d})})));var Wu=K(8674),Zu={};Zu.styleTagTransform=Y(),Zu.setAttributes=q(),Zu.insert=F().bind(null,"head"),Zu.domAPI=N(),Zu.insertStyleElement=U(),P()(Wu.Z,Zu);const Qu=Wu.Z&&Wu.Z.locals?Wu.Z.locals:void 0;var Xu=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.conversationShopId,s=e.conversationBuyerId,a=e.sendMessagesRequested,o=e.isSend,i=e.isInFaqHistoryModal,c=e.message,l=void 0===c?{}:c,u=l.type,d=Hu(i,a),p=u===w.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED;return r().createElement("div",null,r().createElement("div",{className:ul()(Qu.message,o?Qu.send:"",p?Qu.unsupportFaq:"")},(0,w.getCustomMessageText)(l.type)),p&&r().createElement(pc.FaqButton,{isSend:o,conversationId:t,shopId:n,conversationUserId:s,sendMessagesRequested:d}))}}]),n}(r().PureComponent),Ku={sendMessagesRequested:fs};const Ju=au((0,h.connect)(null,Ku)(Xu));var $u={sendMessagesRequested:fs};const ed=au((0,h.connect)((function(){return{}}),$u)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.message,a=e.conversationShopId,o=e.conversationBuyerId,i=e.conversationId,c=e.isInFaqHistoryModal,l=s.id,u=s.content,d=s.faq_session_id,p=Hu(c,t);return r().createElement(pc.FaqFeedbackPromptMessage,{id:l,content:u,sendMessagesRequested:p,conversationId:i,conversationUserId:o,isSend:n,shopId:a,faqSessionId:d})})));var td={sendMessagesRequested:fs};const nd=au((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),td)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.conversationShopId,a=e.conversationBuyerId,o=e.conversationId,i=e.isInFaqHistoryModal,c=e.message,l=e.locale,u=c.content,d=c.faq_session_id,p=Hu(i,t);return r().createElement(pc.FaqLiveAgentPromptMessage,{sendMessagesRequested:p,isSend:n,conversationId:o,shopId:s,conversationUserId:a,content:u,locale:l,faqSessionId:d})})));function rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const sd=au((function(e){var t=e.region,n=e.measure,s=e.isSend,a=void 0!==s&&s,i=e.message,c=e.conversationShopId,l=i.content,u=function(e){var t=e.id;(0,T.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rd(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickBundleDealDetail"},Zl({message:i,isSend:a,conversationShopId:c,extraParams:{itemid:t}})))};return r().createElement(pc.BundleDealMessage,{region:t,measure:n,isSend:a,content:l,handleClickItem:function(e){Au(e,u)}})})),ad=au((function(e){var t=e.measure,n=e.isSend,s=void 0!==n&&n,a=e.message.content;return r().createElement(pc.FlashSaleMessage,{measure:t,isSend:s,content:a,handleClickItem:Au})}));function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function id(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?od(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):od(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cd={visitShopSellerCenterRequested:T.visitShopSellerCenterRequested};const ld=au((0,h.connect)((function(e){return{shopAccess:(0,T.shopAccessSelector)(e)}}),cd)((function(e){var t=e.isSend,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.message,o=e.shopAccess,i=void 0===o?{}:o,c=e.region,l=e.conversationShopId,u=i.hasViewOrderAccess,d=a.content,p=d.order_id,f=d.shop_id,g=a.textContent,A=Zl({message:a,isSend:t,conversationShopId:l});return r().createElement(pc.RateReminderMessage,{isSend:t,textContent:g,hasViewOrderAccess:u,handleClickMessage:function(){t?(0,w.redirectionWithAccess)({access:u,isSubAccount:n,action:function(){return s({shopId:f,orderId:p})},url:"https://".concat((0,w.getSellerCenterUrl)((0,w.isVisitingCNSC)()?"cn":c),"/portal/sale/").concat(p)}):window.open("https://".concat((0,w.getMallUrl)(c),"/user/purchase/order/").concat(p,"/?shopid=").concat(f))},trackRateButton:function(){(0,T.$tracker)(id({trackerName:"clickRateButton"},A))},trackRateProduct:function(){(0,T.$tracker)(id({trackerName:"clickRateProduct"},A))}})})));var ud=K(9424),dd=K.n(ud),pd=K(2236),fd=K.n(pd),gd=K(1644),Ad={};Ad.styleTagTransform=Y(),Ad.setAttributes=q(),Ad.insert=F().bind(null,"head"),Ad.domAPI=N(),Ad.insertStyleElement=U(),P()(gd.Z,Ad);const hd=gd.Z&&gd.Z.locals?gd.Z.locals:void 0,md=function(e){var t=e.title,n=e.closeModal,s=e.noCancel,a="".concat(hd.root," ").concat(s?"":hd.hasCancel);return r().createElement("div",{className:a},r().createElement("div",{className:hd.title},t),!s&&r().createElement(S(),{svg:fd(),className:hd.cancel,onClick:n}))};var Ed=K(5792),vd={};vd.styleTagTransform=Y(),vd.setAttributes=q(),vd.insert=F().bind(null,"head"),vd.domAPI=N(),vd.insertStyleElement=U(),P()(Ed.Z,vd);const Sd=Ed.Z&&Ed.Z.locals?Ed.Z.locals:void 0;var _d=function(e){var t,s=e.label,a=e.title,o=e.children,i=e.closeable,c=e.onClick,l=e.className,u=e.getModalVisible,d=e.onClose,p=(0,n.useState)(!1),f=(0,Yt.Z)(p,2),g=f[0],A=f[1],h=function(){var e=g;A(!e),"function"==typeof u&&u(!e),"function"==typeof d&&e&&d()};return t="#".concat(window.miniChatContainerId),r().createElement("div",{className:Sd.root},r().createElement("div",{onClick:function(e){return function(e){var t=function(){e.stopPropagation(),h()};"function"==typeof c?c(t):t()}(e)}},s),r().createElement(dd(),{isOpen:g,className:Sd.content,overlayClassName:Sd.overlay,shouldReturnFocusAfterClose:!1,onRequestClose:i?h:null,parentSelector:function(){return document.querySelector(t)}},r().createElement("div",{className:l},r().createElement(md,{title:a,closeModal:h}),o)))};_d.defaultProps={closeable:!1};const bd=_d;var yd=K(2760),Cd=K.n(yd),xd=K(2147),Md={};Md.styleTagTransform=Y(),Md.setAttributes=q(),Md.insert=F().bind(null,"head"),Md.domAPI=N(),Md.insertStyleElement=U(),P()(xd.Z,Md);const Id=xd.Z&&xd.Z.locals?xd.Z.locals:void 0,Od="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABIFBMVEUAAADr7vnt8Prt8Pnt8fvt8fvt8PvEpaPs8Prt8fvt8Pvo7Pbo7fjr7/nn7Pfs7/rv8f3h5fDg5PDi5/Hn6/To6/Te4+7s7/np7fni5vHo7Pjm6vfk6fbf4/De4/Dc4O3d4u3i5/TZ3uvP1OHZ3ura3urvWz7y9f7/gmrW2ufvWz7Y3enxXUDW2uj4bVLyYET/g2vvWz7xXkL+eF70ZUn2Zkr+d13w8/zj5/Dm6vTj5vH3a0//gGf5blP4bVHN09/L0N3y9f7S1+Po7PbX2+fl6fPw8vvP1OHr7vfd4eza3+rs7/ng5e/u8Pre4u3U2eXv8/zj5/Hi5vH////Y3enl5/LwWz7yYUX09fn2Z0z/f2f5bVL8c1n4+fv/eV/u8Pak0IEiAAAAP3RSTlMABwwZEhYkBSAQHAQzLzcrJ0JKPi4pRx86Oj5CRlRQWE1PXe3Lp+rn6djDsJNrD6aLg/PHWSXwh4Ht37uejXhSf/O8AAAHjUlEQVR42uzWS2oDMRBF0TfTMkImctMI9z8T24FsokXbJvtfRqwWxJ+JZzao7tnBpSiqBAAAAAAAAAAAAAAAAABPuLaqWic72uNFKzuqFFzJjOk3+ZIZ4zkZZMbhlBxkxm5JRpnRx7jEOMmKKSa9zBjnpNat7b7gVySswd1d73C82KtM9Ro83vUWfZn7NXjSPzecV6UG+9Trb3p3p+xbZQoPK9wsWVChXOd95669MWtkQ5gzK73dnNWlHuFH3liv+ty7lRXhfb0fm58X2nxq5YL3zXvm+8eeHewmCwQBHB9YNEqXGq1iuPkqXwhkjUiKpIkX0vd/i8+NG6sG1llbBlb9zUUOHv4ZwmXIelUxdO0fMaCgD/6knD4Ea702/Nrwa8P933BKONTB7ohPw1U45SP3GV7pQbT6ETGQPokBHTeaXYrkllNiQIaFs2she+BgP6yzfNhgFtZjqZ6twe60SZpu6YYumGuCtSzd8OCj0ZYYtMzxGBu4/FmCWRDdstWzKtgN3m/b6tkUPOAYG2LQmnGAstGzJ9iZzFE2evYE+xOcjZ41wc4CSRCDlnhDJCHEhm7aC2YjJKFnzYb9JZLQsycYS+hZE8ywhJ41wd4AKSYGLXE9pFjPmmBnjBTrWRMMLlKsZ0+w82zB4ODECenE0B5ksJ5FGwZ4cxASYtCqt9uSJCYd6FqiZ9mGexwsL9Wz1Uxdqps9SPD1pbrZQwTXXarJJElxx5wY/7HxUk3l6y5pVUqp+DLVfKkmUtzhuzyp4sJM46Xah1p9CE7Lc9+FEXfaxAUSO2Oy96J4VyO7tlN4YzCHOt0HJ+W1RBd7Hf3RjEGN7oP3p70m6meKqVV0wWrFLpMnbWhLZqg4RsaZVJVSlRmINMYAbz4//uZq350Hi1LaHx/U59o0+L3BCDz+8xSM4aDz4H0pCVV/HpyjcI25zy8MAKAnwcn5hiuVmyEmDwJ+GCQPoPPgC9Xp/Za5KHMpOAyKA38u/wX1lRa5gcn8MGjLNoKze0f1VrmJhRmnPxsuqvKoWJsYDhenQfD6E6x6q93ayOjM8Paw3gSr93mfr+8KVpa3+PDX/nNXvz9pA3Ecx48KgkxnFIZTBB1gFkP2eG5Prr1eKXeUNjCW7Nn+//9idz1+iPZKvx3Iyes0NkJi3n5aZflMVe+QQVVXrqqbGROs/gP/FVccdNgRkCnB6o6OeyHAwSWjgv9wuBKMtYNgnuPkDy7CFMxYmM+/5HACYqGt42/MAimYEuz+inE4aK9ZwTO4AoDsfT/BfOqOBo4wcqcsXzASzAqmWsHQeW404VQpxz5kgHZjlsuG4GDgvPJ7HqwBrM2P5pIazEdOkjGjAgIyJDhN6OhMqQgua46G+cFTZ27ghVzuHXpjZ847wIUDRxkyusLdZTEqwzY2PTicr8uidYvneoKADAmONIeqLJdGr3hOrAmc2JBgHbWjFyVRD/fXEwRiRHCkE6p9SbLfjvR9zxNTGsGPztgRxhEhUeIZxi8fIRiDF1YDc5GWjA4MmDjKgWi46obWm8RPMajLhGDdHUsH0ozoRQMJ9IfaiGDNxEzWDEkabyB8R/tEtmciawKShg2E3l4XJiQCHw1vLHBCfP2hY+ErAjF34eFIoCTVSLIAExsfTFIXVu+pouxMCNbGSMRP5Q6FyoEs7GYNPpSFvQzBQ8lCe5yYEB96dKauQP00xBV+IBADFtZgrsD8NDNX6KHyYSxMPWGC0wSe8IRAzF2YeFKE9dQ7rtE+J/a3B4eeEGI95gk/EYTRwZGaeMPAT6j8zhbGWuFECPzUl38UEYTZwdFUYjgZn0pP6N0tnFLMAonjJDSQflpov/AW2RiHgcTk9frBsyDWL8MWNjpYIGGMkZffZ+HcAyzJ8GBbFCuc4PnMMpeGwqr4YBa2BcIWKJFPu08oZ2tAG5sRbCcfVexzlozPlsXZJzYjWMeOYSriXh+KMTVgY6wF33iZ7FP+EiXxr4IrD4eysPhQ/Gg917elVXE/a5cpwfZmmBAqEaJqlR5V+vtb2M5zcvv2uCiulCz05gpFnJOdU2dZ3PvW6bQbtbNP1WIBIejC8NKr8+tGq9PJuXD+4GfFnaVW4/r8SnTvQqF0fHrRvlvAbzyx+JGdx0jpde7WtS9Oj0tbzC5W6rX71rrcC0OLu3asJayK71oJ7mv1ShH9J6tar7W/JLB3qbv8XGpLd49E6bcTfJHatXrVyjvs8cfbSx0bAFqb5DLW7pFY9zLV7cdj6NQnldPmbRr7jTWU+54KFpe36ZqnlROUTeGoftPcxN6Jru7mti/mLuPiB3HV3OymflTYWFs9u8mia++UCl3pXiw0+t2u7L3J6Kya0vyhdP45o3/t3U0OgkAMhuFSRkUGhUQN7llzB+9/KoOTKCFE4/9k+j5dddl8m26a9t3ph7p+N3F8Qr3w8+G21TZRVZvNPc1KWqGTdDfJG6fs6mjsH6tf5STwZROTw33NG0of5l2acZk4LwzJRbSMUzvUyNB/gIrLTXGyMEacMaJrU1RETRERr4aEzSMzw0uQGSFX3gRBJFa3+vtlOL6MbAEAAAAAAAAAAAAAAID0nAFUiEuaAG9VMQAAAABJRU5ErkJggg==";var wd=K(4323).t,Td=function(e){var t=(0,n.useRef)(null),s=(0,n.useRef)(0),a=(0,w.throttle)((function(n){var r=e.loadMoreOffset,a=e.onLoadMore,o=e.onScroll,i=e.status,c=t.current,l=c.scrollHeight,u=c.scrollTop,d=c.clientHeight;if(i===w.DataFetchStatus.PENDING)return!1;l-u-d<=r&&s.current<u&&a&&a(),s.current=u,o&&o()}),200),o=e.listData,i=e.customRootClass,c=e.makeItem,l=e.status,u=e.emptyImage,d=e.emptyText,p=e.emptyClassName;return r().createElement("div",{className:ul()(Id.root,i),onScroll:a,ref:t},l===w.DataFetchStatus.SUCCEED||l===w.DataFetchStatus.PENDING||l===w.DataFetchStatus.FAILED?o.length>0?o.map((function(e,t){return c(e,t)})):r().createElement(Cd(),{classname:p||Id.empty,image:u||Od,text:d||wd("common.scroll_list.no_data")}):"")};Td.defaultProps={loadMoreOffset:10,emptyImage:Od};const Bd=E()(Td);var kd=K(699),Rd={};Rd.styleTagTransform=Y(),Rd.setAttributes=q(),Rd.insert=F().bind(null,"head"),Rd.domAPI=N(),Rd.insertStyleElement=U(),P()(kd.Z,Rd);const Pd=kd.Z&&kd.Z.locals?kd.Z.locals:void 0;var Dd={},Nd=r().createContext({});const jd=function(e){var t=e.isScChat,s=e.currentUser,a=e.isSubAccount,o=e.messageList,i=e.fillMessageRequested,c=e.messageHttpStatus,l=e.fetchFaqMessagesRequested,u=e.sourceId,d=e.shop,p=e.conversationId,f=e.conversationShopId,g=e.conversationBuyerId,A=e.conversationStatus,h=e.handleMessageIsSend,m=e.messagesFillStatusMap,E=e.currentFaqSessionInfo,v=function(){},S=(0,n.useRef)({});return r().createElement("div",{className:Pd.list},r().createElement(Nd.Provider,{value:S.current},r().createElement(Bd,{makeItem:function(e,n){if(e&&e.content){var o=e.id,c=e.type,u=e.to_id,S=e.from_user_name,_=e.created_timestamp,b=u===g,y=(0,w.customizeTime)(1e3*_),C=Cp(c);return r().createElement("div",{key:o,className:Pd.baseMessage},function(e,t,n){var s=[r().createElement("span",{key:"name",className:Pd.username},e),r().createElement("span",{key:"split",className:Pd.split}),r().createElement("span",{key:"time",className:Pd.stamp},t)],a="".concat(Pd.header," ").concat(n?Pd.right:"");return r().createElement("div",{className:a},n?s.reverse():s)}(S,y,b),r().createElement(C,{className:Pd.message,index:n,shop:d,message:e,isScChat:t,newMessageFlag:!1,currentUser:s,isSubAccount:a,hasSourceMessageMap:Dd,fillMessageRequested:i,fetchFaqMessagesRequested:l,conversationId:p,conversationShopId:f,conversationBuyerId:g,conversationStatus:A,measure:v,replyOfferRequested:v,evaluationRequested:v,claimVoucherRequested:v,sendMessagesRequested:v,resendMessageRequested:v,translateMessagesRequested:v,messageFillStatus:m[o],handleMessageIsSend:h,isInFaqHistoryModal:!0,currentFaqSessionInfo:E}))}},listData:o,status:c,onLoadMore:function(){return l({sourceId:u,shopId:f})},onRefresh:function(){return l({sourceId:u,shopId:f,reset:!o.length})}})))};var Fd={changeTranslateStatus:Xs,fillMessageRequested:st};const Ld=(0,h.connect)((function(e){return{sourceId:(0,T.faqIdSelector)(e),isScChat:(0,T.isScChatSelector)(e),isSubAccount:(0,T.isSubAccountSelector)(e),messageList:(0,T.faqHistoryMessagesSelector)(e),currentUser:(0,T.currentUserSelector)(e),messageHttpStatus:(0,T.faqHistoryhttpStatusSelector)(e),currentConversation:(0,T.currentConversationSelector)(e),conversationId:(0,T.currentConversationIdSelector)(e),conversationShopId:(0,T.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,T.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,T.currentConversationStatusSelectors)(e),shop:(0,T.currentConversationShopSelectors)(e),messagesFillStatusMap:(0,T.messageFillStatusMapSelector)(e),currentFaqSessionInfo:(0,T.currentFaqSessionInfoSelector)(e)}}),Fd)((function(e){return r().createElement(jd,e)}));var qd=K(7539),Gd={};Gd.styleTagTransform=Y(),Gd.setAttributes=q(),Gd.insert=F().bind(null,"head"),Gd.domAPI=N(),Gd.insertStyleElement=U(),P()(qd.Z,Gd);const Ud=qd.Z&&qd.Z.locals?qd.Z.locals:void 0;var Hd=K(4323).t;const Yd=function(e){var t=e.isSend,n=e.message,s=e.updateCurrentFaqId,a=e.conversationShopId,o=e.fetchFaqMessagesRequested,i=e.handleMessageIsSend,c=e.locale,l=n.id,u=n.content.messages,d=void 0===u?[]:u,p=n.textContent,f=(void 0===p?{messages:[]}:p).messages,g=(void 0===f?[]:f).map((function(e){var t=function(e){var t=(0,w.previewMessage)({message:e,enableTranslation:!1,locale:c,conversationShopId:a}).text;return{username:e.from_user_name,content:t}}(e),n=t.username,s=t.content;return r().createElement("div",{key:"faq-".concat(e.id),className:Ud.preview},"".concat(n,": ").concat(s))}));return r().createElement(bd,{onClose:function(){return s({id:null})},title:Hd("conversation_list.conversation_cell.new_bundle_message_message"),className:Ud.container,label:r().createElement("div",{onClick:function(){return o({sourceId:l,shopId:a,reset:!0})},className:ul()(Ud.root,t?Ud.send:Ud.receive)},r().createElement("div",{className:Ud.header},Hd("conversation_list.conversation_cell.new_bundle_message_message")),r().createElement("div",{style:{height:"".concat(18*(d.length>3?3:d.length),"px")}},g),r().createElement("div",{className:Ud.footer},Hd("faq_history.see_all")))},r().createElement(Ld,{fetchFaqMessagesRequested:o,handleMessageIsSend:i}))};var Vd={fetchFaqMessagesRequested:_a,updateCurrentFaqId:Ca};const zd=au((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),Vd)((function(e){return r().createElement(Yd,e)})));var Wd=K(1500),Zd={};Zd.styleTagTransform=Y(),Zd.setAttributes=q(),Zd.insert=F().bind(null,"head"),Zd.domAPI=N(),Zd.insertStyleElement=U(),P()(Wd.Z,Zd);const Qd=Wd.Z&&Wd.Z.locals?Wd.Z.locals:void 0;var Xd=w.MessageTypes.MSG_TYPE_SELECTED_OPTION,Kd=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).renderOption=r.renderOption.bind(u(r)),r.sendMessage=r.sendMessage.bind(u(r)),r}return l(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,r=e.text,s=this.props;(0,s.sendMessagesRequested)({conversationId:s.conversationId,messages:[{type:Xd,content:{text:r,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,s=this,a=e.text,i=e.variant,c=this.props,l=c.message,u=c.currentConversationMaxOptionHideTime,d=l.created_timestamp<u,p=ul()(Qd.option,(o(n={},Qd.primary,1===i),o(n,Qd.invalid,d),n));return r().createElement("div",{key:t,className:p,title:a,onClick:function(){if(d)return null;s.sendMessage(e)}},a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSensitiveUrl,s=t.message,a=s.content,o=a.title,i=a.options,c=void 0===i?[]:i,l=s.message_option;return r().createElement("div",{className:Qd.root},r().createElement("div",{className:Qd.title},r().createElement(pc.Text,{text:o,messageOption:l,handleSensitiveUrl:n})),c.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(n.PureComponent),Jd={handleSensitiveUrl:fa,sendMessagesRequested:fs};const $d=au((0,h.connect)((function(e){return{conversation:(0,T.currentConversationSelector)(e),currentConversationMaxOptionHideTime:(0,T.currentConversationMaxOptionHideTimeSelectors)(e)}}),Jd)(Kd)),ep=au((function(e){var t=e.isSend,n=e.message.content;return r().createElement(pc.AddOnDealMessage,{content:n,isSend:t,handleClickItem:Au})}));var tp={showMediaPreviewModalRequested:T.showMediaPreviewModalRequested,scrollToMessage:en};const np=(0,h.connect)((function(e,t){return{videoInfo:(0,T.selectVideoInfoByKey)(t.message.request_id)(e)}}),tp)((function(e){var t=e.isSend,n=e.videoInfo,s=e.showMediaPreviewModalRequested,a=e.message,o=e.conversationShopId,i=e.scrollToMessage,c=e.conversationBuyerId,l=e.handleMessageIsSend,u=a.id,d=a.conversation_id,p=a.to_id,f=a.from_id,g=a.request_id,A=a.content,h=a.send_status,m=a.quoted_msg,E=t&&h===w.MessageSendStatus.SENDING;return r().createElement(pc.VideoMessage,{id:u,isSend:t,content:A,isSending:E,videoInfo:n,onPlayVideo:function(e){(0,T.$tracker)({trackerName:"clickPlayInVideoMessage",data:{message_id:u===g?0:u,conversation_id:d,is_sender:t,to_user_id:p,from_user_id:f,video_original_duration:A.duration_seconds},conversationShopId:o}),s({messageId:e})},replyToMessage:m,scrollToMessage:i,conversationBuyerId:c,handleMessageIsSend:l})})),rp=au((function(e){return r().createElement(np,e)}));var sp={handleSensitiveUrl:fa,showMediaPreviewModalRequested:T.showMediaPreviewModalRequested};const ap=au((0,h.connect)((function(){return{}}),sp)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.handleSensitiveUrl,c=e.conversationShopId,l=o.content,u=o.id,d=o.request_id,p=o.message_option,f=o.business_tag,g=(0,n.useContext)(Z),A={shopId:c,data:{message_id:u,business_tag:f}};return r().createElement(pc.ImageWithTextMessage,{content:l,measure:s,messageId:u,requestId:d,isSend:t,imgCache:g,messageOption:p,handleSensitiveUrl:i,showMediaPreviewModalRequested:a,trackerData:A})})));var op={evaluationRequested:Be};const ip=au((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e),currentUser:(0,T.currentUserSelector)(e)}}),op)((function(e){var t=e.measure,n=e.evaluationRequested,s=e.message,a=e.conversationId,o=e.isSend,i=e.locale,c=e.isInFaqHistoryModal,l=e.currentUser,u=e.conversationShopId,d=s.id,p=s.from_shop_id,f=s.textContent,g=s.to_id;return r().createElement(pc.RateCardMessage,{measure:t,rateShopId:p,onSubmit:n,conversationId:a,isSend:o,textContent:f,locale:i,isInFaqHistoryModal:c,isSelfReceived:g===l.id,conversationShopId:u,messageId:d})})));function cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var up={sendMessagesRequested:fs};const dp=au((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),up)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,l=e.isInFaqHistoryModal,u=e.locale,d=c.content,p=c.faq_session_id,f=Hu(l,i);return r().createElement(pc.NewFaqMessage,{isSend:n,sendMessagesRequested:f,content:d,conversationId:s,shopId:a,conversationUserId:o,locale:u,handleSendMessage:function(e){var t=e.type,n=e.content;f({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:t,content:lp(lp({},n),{},{faq_session_id:p})}]})},faqSessionId:p})})));function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gp=w.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Ap=w.MessageTypes.MSG_TYPE_FAQ_QUESTION,hp=w.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,mp={sendMessagesRequested:fs};const Ep=au((0,h.connect)((function(e){return{locale:(0,T.localeSelector)(e)}}),mp)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,l=e.isInFaqHistoryModal,u=e.locale,d=c.content,p=c.type,f=c.faq_session_id,g=Hu(l,i);return r().createElement(pc.FaqListMessage,{isSend:n,content:d,type:p,locale:u,handleSendMessage:function(e){g({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:p===gp?Ap:hp,content:fp(fp({},e),{},{faq_session_id:f})}]})}})}))),vp=function(e){var t=e.isSend,s=e.message,a=e.shopId,o=e.conversationId,i=e.measure,c=e.faqSessionId,l=ei(),u=(0,n.useRef)(null);return(0,n.useEffect)((function(){var e,t=null===(e=u.current)||void 0===e?void 0:e.querySelectorAll("img");return null==t||t.forEach((function(e){e.src.startsWith("http")&&e.addEventListener("load",i)})),function(){null==t||t.forEach((function(e){e.src.startsWith("http")&&e.removeEventListener("load",i)}))}}),[i]),r().createElement("div",{ref:u},l.render({from:t?"right":"left",disabled:t,message:s,passThroughData:{shopId:a,conversationId:o,faqSessionId:c}}))},Sp=au((0,h.connect)((function(e){return{currentBuyerShopId:(0,T.currentBuyerShopIdSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,s=e.currentBuyerShopId,a=e.conversationId,o=e.measure,i=n.content.bot_data,c=n.faq_session_id;return r().createElement(vp,{isSend:t,message:i,shopId:s,conversationId:a,measure:o,faqSessionId:c})}))),_p=au((0,h.connect)((function(e){return{isSeller:(0,T.currentUserIsSellerSelector)(e)}}),null)(pc.SecurityTipsMessage));var bp,yp=(o(bp={},w.MessageTypes.MSG_TYPE_TEXT,iu),o(bp,w.MessageTypes.MSG_TYPE_IMAGE,du),o(bp,w.MessageTypes.MSG_TYPE_OFFER,hu),o(bp,w.MessageTypes.MSG_TYPE_ORDER,Iu),o(bp,w.MessageTypes.MSG_TYPE_STICKER,wu),o(bp,w.MessageTypes.MSG_TYPE_PRODUCT,vu),o(bp,w.MessageTypes.MSG_TYPE_NOTIFICATION,Tu),o(bp,w.MessageTypes.MSG_TYPE_VOUCHER,Pu),o(bp,w.MessageTypes.MSG_TYPE_ITEM_LIST,Nu),o(bp,w.MessageTypes.MSG_TYPE_FEED_STORY,ju),o(bp,w.MessageTypes.MSG_TYPE_SHOPPING_CART,qu),o(bp,w.MessageTypes.MSG_TYPE_FAQ,zu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,iu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_QUESTION,iu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,iu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,ed),o(bp,w.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,nd),o(bp,w.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,ld),o(bp,w.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,zd),o(bp,w.MessageTypes.MSG_TYPE_BUNDLE_DEAL,sd),o(bp,w.MessageTypes.MSG_TYPE_FLASH_SALE,ad),o(bp,w.MessageTypes.MSG_TYPE_OPTION_PACK,$d),o(bp,w.MessageTypes.MSG_TYPE_SELECTED_OPTION,iu),o(bp,w.MessageTypes.MSG_TYPE_ADD_ON_DEAL,ep),o(bp,w.MessageTypes.MSG_TYPE_VIDEO,rp),o(bp,w.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,ap),o(bp,w.MessageTypes.MSG_TYPE_RATE_CARD,ip),o(bp,w.MessageTypes.MSG_TYPE_NEW_FAQ,dp),o(bp,w.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,iu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,iu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Ep),o(bp,w.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,Ep),o(bp,w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,iu),o(bp,w.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,(function(e){return r().createElement(Iu,e)})),o(bp,w.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Sp),o(bp,w.MessageTypes.MSG_TYPE_SECURITY_TIPS,_p),bp);const Cp=function(e){return yp[e]||Ju};var xp=K(1506),Mp=(K(5247),K(4323).t);const Ip=function(e){var t=e.shouldShow,n=e.onDismiss,s=e.onVerifySuccess,a=e.isLiveEnv;return r().createElement(xp.CaptchaPopupDesktop,{scene:"chat_user_send_message",appKey:"Chat.PC",loadCaptchaSdkAsync:function(){return Promise.resolve().then(K.t.bind(K,3195,23))},shouldShow:t,onDismiss:n,onVerifySuccess:s,text:{title:Mp("captcha.title"),errorScreen:{title:Mp("captcha.error.title"),description:Mp("captcha.error.desc"),retry:Mp("captcha.retry")},sliderCaptcha:{sliderDescription:Mp("captcha.slider.desc"),loading:Mp("captcha.slider.loading"),retry:Mp("captcha.retry"),refresh:Mp("captcha.slider.refresh")}},isLiveEnv:a})};var Op=function(e,t){var n=(0,Yt.Z)(e,2),r=n[0],s=n[1];return r<=t&&s>=t},wp=function(e,t){return e&&e.length&&t?e.findIndex((function(e){return e.id===t})):null},Tp=w.MessageTypes.MSG_TYPE_TEXT,Bp=w.MessageTypes.MSG_TYPE_NOTIFICATION,kp=w.MessageTypes.MSG_TYPE_SHOPPING_CART,Rp="#message-virtualized-list",Pp=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).keyMapper=r.keyMapper.bind(u(r)),r.getListRef=r.getListRef.bind(u(r)),r.scrollUpHandler=(0,w.memFn)(Gu,10),r.handleWheel=r.handleWheel.bind(u(r)),r.rowRenderer=r.rowRenderer.bind(u(r)),r.handleScroll=r.handleScroll.bind(u(r)),r.handleGoToBottom=r.handleGoToBottom.bind(u(r)),r.handleRowsRender=r.handleRowsRender.bind(u(r)),r.handleScrollToMessage=r.handleScrollToMessage.bind(u(r)),r.addExposedMessageId=r.addExposedMessageId.bind(u(r)),r.handleAutoSizerResized=r.handleAutoSizerResized.bind(u(r)),r.handleConversationChanged=r.handleConversationChanged.bind(u(r)),r.handleMsgListChanged=r.handleMsgListChanged.bind(u(r)),r.handleMsgListLengthUnchange=r.handleMsgListLengthUnchange.bind(u(r)),r.debounceMarkMessage=(0,w.debounce)(r.handleMarkMessage.bind(u(r)),300),r.debounceFetchMoreMessage=(0,w.debounce)(r.fetchMoreMessage.bind(u(r)),300),r.dobouceUpdateCurrentConversationCanRead=(0,w.debounce)(r.updateCurrentConversationCanRead.bind(u(r)),100),r.containerProps={onWheel:r.handleWheel},r._cache=new(O())({fixedWidth:!0,keyMapper:r.keyMapper}),r.imgCache={},r.listNode=null,r.startIndex=0,r.stopIndex=0,r.scrollTop=0,r.containerHeight=0,r.targetMsgRow=0,r.targetRowInfo=null,r.exposedMessageIds=[],r.hasSourceMessageMap={},r.stickyScrollPosition=null,r.messageScrollDirection=null,r.unreadMsgIdChanged=!1,r.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1},r}return l(n,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"onMeasure",value:function(e,t){var n,r;t(),this.targetRowInfo&&Op(this.targetRowInfo.range,e)&&(null===(n=this.listNode)||void 0===n||null===(r=n.scrollToRow)||void 0===r||r.call(n,this.targetRowInfo.index))}},{key:"cleanTargetRowInfo",value:function(){this.targetRowInfo=null}},{key:"componentDidMount",value:function(){this.onAppendMessage(),this.shouldScrollToBottom=!0,T.EventBus.on("scrollToMessage",this.handleScrollToMessage)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(e),s=Object.keys(this.props);return r.length!==s.length||t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||t.firstUnreadMsgId!==this.state.firstUnreadMsgId||r.some((function(t){var r,s,a=e[t],o=n.props[t],i=!1;switch(t){case"currentConversation":i=a.id!==o.id;break;case"unreadMessageIds":s=o,i=!((r=a).length===s.length&&r.every((function(e,t){return e===s[t]})));break;case"messageList":i=!Yu(a,o);break;default:i=a!==o}return i}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.conversationId,n=e.messageList,r=e.unreadMessageIds,s=e.navigateToUnreadMessageId,a=e.currentConversation,o=this.props,i=o.conversationId,c=o.messageList,l=o.unreadMessageIds,u=o.navigateToUnreadMessageId,d={};if(this.conversationChanged=t!==i,(this.conversationChanged||l.length&&!r.length)&&(d.shouldRenderNewMessageTip=!1),this.unreadMsgIdChanged=u!==s,this.unreadMsgIdChanged){var p=function(e,t,n){var r=null,s=[];return e&&n&&(s=t.filter((function(t){var r=(0,w.getMessageIsSend)(t,e);return t&&!r&&(0,w.greaterThan)(t.id,n)})).map((function(e){return e.id}))),s.length&&(r=s[0]),r}(a,n,s);d.firstUnreadMsgId=p}this.conversationChanged?this.handleConversationChanged():c.length!==n.length?this.handleMsgListChanged(e):this.handleMsgListLengthUnchange(e),(0,w.checkEmptyObject)(d)||this.setState(d)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.conversationChanged)this.conversationChanged=!1,this.onAppendMessage();else if(this.messageScrollDirection)1===this.messageScrollDirection?this.onAppendMessage():-1===this.messageScrollDirection&&this.onPrependMessage(),this.messageScrollDirection=null;else if(this.unreadMsgIdChanged){var t=this.props.messageList,n=this._cache._cellHeightCache,r=t.findIndex((function(t){return t.id===e.state.firstUnreadMsgId}));if(r>=0){var s=t.slice(r,t.length);if(s.length){var a=0;if(s.forEach((function(e){a+=n[e.id]})),a<this.containerHeight){var o,i,c=t.length-1;this.targetRowInfo={index:c,range:[this.startIndex,c]},null===(o=this.listNode)||void 0===o||null===(i=o.scrollToRow)||void 0===i||i.call(o,c)}}}}}},{key:"componentWillUnmount",value:function(){T.EventBus.removeListener("scrollToMessage",this.handleScrollToMessage)}},{key:"handleAutoSizerResized",value:function(e){var t=e.height;if(this.containerHeight){var n=t-this.containerHeight;if(n<0){var r=document.getElementById(Rp);r&&(r.scrollTop=r.scrollTop-n)}}this.containerHeight=t,this.shouldScrollToBottom&&t&&(this.shouldScrollToBottom=!1,this.onAppendMessage())}},{key:"handleScrollToMessage",value:function(e){var t=this.props.isNavigateToUnreadMessage,n=wp(this.props.messageList,e);if(n>=0){var r,s,a=t?n+1:n;this.targetMsgRow=a,null===(r=this.listNode)||void 0===r||null===(s=r.scrollToRow)||void 0===s||s.call(r,a)}}},{key:"handleConversationChanged",value:function(){var e,t,n=this.props,r=n.messageList;(0,n.setCurrentConversationCanRead)({canRead:!0}),this.scrollTop=0,this.startIndex=0,this.stopIndex=0,this.cleanTargetRowInfo(),this.scrollUpHandler.reset(),this.hasSourceMessageMap={},this.shouldScrollToBottom=!0,null===(e=this.listNode)||void 0===e||null===(t=e.forceUpdateGrid)||void 0===t||t.call(e);var s=wp(r,this.state.firstUnreadMsgId);s>-1&&this._cache.clear(s)}},{key:"handleMsgListLengthUnchange",value:function(e){var t,n,r=e.messageList,s=e.hasMoreOlderMessage,a=(e.unreadMessageIds,e.currentConversationCanRead,this.props),o=a.messageList,i=(a.unreadMessageIds,a.hasMoreOlderMessage),c=function(e,t,n,r){var s=e.slice(n,r+1),a=t.slice(n,r+1);return!Yu(s,a)}(o,r,this.startIndex,this.stopIndex);(c||i&&!s)&&(null===(t=this.listNode)||void 0===t||null===(n=t.forceUpdateGrid)||void 0===n||n.call(t));var l=Uu(r),u=Uu(o);if(l&&u){var d=l.type,p=l.request_id,f=l.errorCode,g=l.message_option,A=l.textContent,h=l.send_status,m=u.request_id,E=u.retryRequestId,v=u.errorCode,S=u.message_option,_=u.send_status,b=u.textContent;switch(d){case Tp:p!==m&&p!==E||!(h!==_||f!==v&&f===w.MessageErrorCode.BLACKLIST||g!==S&&0!==g)||(this.messageScrollDirection=1);break;case kp:!b&&A&&(this.messageScrollDirection=1)}}}},{key:"handleMsgListChanged",value:function(e){var t,n,r,s,a,o=this.props.messageList,i=e.currentConversation,c=e.messageList,l=e.unreadMessageIds,u=e.currentConversationCanRead,d=o.length,p=c.length,f=Uu(c),g=f&&(0,w.getMessageIsSend)(f,i),A=!0,h=function(e,t){for(var n=e.length-1;n>=0;){var r=e[n];if(!t.includes(r.id))return n;n--}}(c,l);(u||!l.length||g||this.stopIndex>=h)&&(A=!1),this.setState({shouldRenderNewMessageTip:A}),t=c,s=(n=o).length,a=t.length,!s&&a||null!==(r=n[0])&&void 0!==r&&r.isFaking||(s?n[0].id:null)===(a?t[0].id:null)?!g&&d&&d-1!==this.stopIndex||(this.cleanTargetRowInfo(),this.messageScrollDirection=1,this.onAppendMessage()):(this.cleanTargetRowInfo(),this.stickyScrollPosition={index:this.startIndex+p-d,stickyScrollTop:this.scrollTop},this.messageScrollDirection=-1)}},{key:"handleWheel",value:function(e){this.targetRowInfo&&e.deltaY<0&&this.cleanTargetRowInfo()}},{key:"handleMarkMessage",value:function(){var e=this.props.unreadMessageIds.length;if(e){var t=this.props,n=t.showChatWindow,r=t.showConversationDetail,s=t.messageList,a=t.unreadMessageIds,o=t.markMessagesRequested,i=t.currentConversation,c=i.status,l=i.id,u=a[e-1],d=wp(s,u);n&&r&&"closed"!==c&&this.stopIndex>=d&&o({isRead:!0,conversationId:l,latestMessageId:u})}}},{key:"onAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?"end":t,r=e.index,s=void 0===r?null:r,a=this.props,o=a.inScrollToMessage,i=a.messageList,c=a.isNavigateToUnreadMessage;if(!o&&i.length&&!c){var l,u,d,p,f,g,A=null,h=s||i.length-1,m="end"===n;m?this.targetRowInfo={index:h,range:[this.startIndex,h]}:A=null===(l=this.listNode)||void 0===l||null===(u=l.getOffsetForRow)||void 0===u?void 0:u.call(l,{index:h,alignment:n}),m?null===(d=this.listNode)||void 0===d||null===(p=d.scrollToRow)||void 0===p||p.call(d,h<0?0:h):null===(f=this.listNode)||void 0===f||null===(g=f.scrollToPosition)||void 0===g||g.call(f,A)}}},{key:"onPrependMessage",value:function(){var e,t,n,r,s=this.stickyScrollPosition||{},a=s.index,o=s.stickyScrollTop,i=(null===(e=this.listNode)||void 0===e||null===(t=e.getOffsetForRow)||void 0===t?void 0:t.call(e,{index:a,alignment:"start"}))||0;null===(n=this.listNode)||void 0===n||null===(r=n.scrollToPosition)||void 0===r||r.call(n,i+o)}},{key:"handleGoToBottom",value:function(){var e=this.props,t=e.conversationId,n=e.inScrollToMessage,r=e.fetchRequested,s=e.deleteConversationMessageHash,a=e.setInScrollToMessage,o=e.currentConversation,i=e.isNavigateToUnreadMessage,c=e.setNavigateToUnreadMessage;n||i?(n&&a({inScrollToMessage:!1}),i&&c({isNavigateToUnreadMessage:!1}),t&&s({conversationId:t}),r({conversation:o,needReset:!0}),this.shouldScrollToBottom=!0):this.onAppendMessage()}},{key:"fetchMoreMessage",value:function(e){var t=this.props,n=t.messageList,r=t.fetchRequested,s=t.conversationId;n.length&&r({direction:e,conversationId:s})}},{key:"updateCurrentConversationCanRead",value:function(e){var t=this.props,n=t.currentConversationCanRead,r=t.setCurrentConversationCanRead;e!==n&&r({canRead:e})}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,s=this.props,a=s.messageList,o=s.inScrollToMessage,i=s.hasMoreOlderMessage,c=s.hasMoreLatestMessage,l=s.handleComponentScroll,u=s.isNavigateToUnreadMessage;if(s.setNavigateToUnreadMessage,n>0&&(this.targetRowInfo&&this.scrollUpHandler.check(this.scrollTop,r)&&this.cleanTargetRowInfo(),this.scrollTop>r?(l("up"),!1!==i&&r<200&&0!==t&&this.debounceFetchMoreMessage("older")):(l("down"),(o||u)&&c&&r>n-t-30&&this.debounceFetchMoreMessage("latest"))),this.stopIndex>0){var d,p=a.length,f=r>0?n-r-t<=60||(null===(d=this.targetRowInfo)||void 0===d?void 0:d.index)===p-1:!(p>0)||this.stopIndex>=p-1;this.dobouceUpdateCurrentConversationCanRead(f)}this.scrollTop=r}},{key:"handleRowsRender",value:function(e){var t,n,r=e.startIndex,s=e.stopIndex;this.startIndex=r,this.stopIndex=s,this.debounceMarkMessage(),this.targetRowInfo&&Op(this.targetRowInfo.range,r)?this.targetRowInfo.range=[r,this.targetRowInfo.range[1]]:this.cleanTargetRowInfo(),this.targetMsgRow>0&&(null===(t=this.listNode)||void 0===t||null===(n=t.scrollToRow)||void 0===n||n.call(t,this.targetMsgRow),this.targetMsgRow=null)}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,s=(e.key,e.parent),a=e.style,o=this.props.messageList[n];if(!o)return null;var i=this.props,c=i.shop,l=i.isScChat,u=i.currentUser,d=i.isSubAccount,p=i.messageList,f=i.hasMoreOlderMessage,g=i.resendMessageRequested,A=i.fillMessageRequested,h=i.cancelSendingMessageRequested,m=i.showWarningMessageIds,E=i.conversationId,v=i.conversationShopId,S=i.conversationBuyerId,_=i.conversationStatus,b=i.messagesFillStatusMap,y=i.currentFaqSessionInfo,C=p[n-1]||{},x=C.type,I=C.to_id,O=C.content,T=void 0===O?{}:O,B=C.created_timestamp,k=o.type,R=o.id,P=o.created_timestamp,D=Cp(k),N=b[R],j=b["source-".concat(R)],F=x===Bp||(0,w.getMessageIsRatecard)(x,T)&&(u.id!==I||d),L=1e3*P,q=1e3*B,G=L&&!q||L-q>3e5||0===n&&!f?(0,w.customizeTime)(L):null,U=0===n;return r().createElement(M(),{key:R,parent:s,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var s=e.measure;return r().createElement(D,{index:n,style:a,shop:c,message:o,measure:function(){return t.onMeasure(n,s)},timeFlag:G,isScChat:l,isSubAccount:d,isLastMessage:n===p.length-1,newMessageFlag:R===t.state.firstUnreadMsgId&&!U,isLastSystemMessage:F,hasSourceMessageMap:t.hasSourceMessageMap,resendMessageRequested:g,fillMessageRequested:A,addExposedMessageId:t.addExposedMessageId,exposedMessageIds:t.exposedMessageIds,cancelSendingMessageRequested:h,showWarningMessageIds:m,conversationId:E,conversationShopId:v,conversationBuyerId:S,conversationStatus:_,messageFillStatus:N,messageSourceFillStatus:j,currentFaqSessionInfo:y})}))}},{key:"handleDismissCaptcha",value:function(){(0,this.props.updateCaptchaVisible)({visible:!1})}},{key:"handleVerifySuccess",value:function(e){(0,this.props.updateCaptchaSignature)({signature:e}),this.handleDismissCaptcha()}},{key:"render",value:function(){var e=this,t=this.props,n=t.locale,s=t.isScChat,a=t.messageList,o=void 0===a?[]:a,i=t.unreadMessageIds,c=void 0===i?[]:i,l=t.currentConversation,u=t.shopTranslationSettings,d=t.messagesFillStatusMap,p=t.currentConversationTranslationAccess,f=t.currentConversationCanRead,g=t.toBottomHasConflict,A=t.captchaVisible,h=(t.shop,l.status),m=l.shop_id,E=l.to_name,v=l.to_id,_=l.latest_message_from_id,y=o.filter((function(e){return c.includes(e.id)})),x=y.length?y[y.length-1]:null,M=o.length||1,I=v!==_,O=(x||{}).content,T=(void 0===O?{}:O).translation,B=(T=void 0===T?{}:T).text,R=(u[m]||{}).autoTranslationStatus===w.SwitchStatus.ENABLED,P=(0,w.handleDisplayTranslation)(R,I,B,s,p),D="closed"===h;return r().createElement("div",{className:W.messageSection,id:"messageSection"},r().createElement(C(),{onResize:this.handleAutoSizerResized},(function(t){var n=t.width,s=t.height;return r().createElement(sc,null,r().createElement(Z.Provider,{value:e.imgCache},r().createElement(b(),{width:n,height:s,ref:e.getListRef,rowCount:M,rowHeight:e._cache.rowHeight,className:W.grid,containerProps:e.containerProps,containerStyle:{},estimatedRowSize:37,overscanRowCount:10,deferredMeasurementCache:e._cache,onScroll:e.handleScroll,rowRenderer:e.rowRenderer,onRowsRendered:e.handleRowsRender,differProp:d,id:Rp})))})),r().createElement("div",{className:W.layers},!g&&!f&&r().createElement("div",{id:"toBottomButton",className:W.iconWrapper,onClick:this.handleGoToBottom},r().createElement(S(),{svg:k()})),this.state.shouldRenderNewMessageTip&&!D&&r().createElement(dc,{locale:n,shopId:m,username:E,message:x||{},onClick:this.handleGoToBottom,enableTranslation:P})),r().createElement(Ip,{isLiveEnv:!0,shouldShow:A,onDismiss:this.handleDismissCaptcha,onVerifySuccess:this.handleVerifySuccess}))}}]),n}(r().Component);const Dp=E()(Pp,{dataKey:"messageList",penddingController:function(e,t,n){return!t||n!==w.DataFetchStatus.INIT_PENDING},scrollController:function(e,t,n,r,s,a,o){var i=e!==t;i&&(o&&r===w.DataFetchStatus.FAILED&&o(),n(e));var c=a.current;c&&clearTimeout(c),a.current=setTimeout((function(){i&&!r.toLowerCase().includes("init")&&s(w.DataFetchStatus.SUCCEED)}),10)}});var Np=["fetchMessagesRequested","messageHttpStatus"];function jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jp(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lp=function(e){p(s,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return g(this,n)}}(s);function s(e){var t;return i(this,s),(t=n.call(this,e)).fetchRequested=t.fetchRequested.bind(u(t)),t}return l(s,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,r=e.direction,s=this.props,a=s.messageList,o=s.currentConversation,i=s.fetchMessagesRequested,c={conversationId:o.id,direction:"up"===r||"older"===r?"older":"latest"};if(n)c.read=!0,c.reset=!0;else if(!a.length)return;i(Fp({},c))}},{key:"render",value:function(){var e=this.props,n=(e.fetchMessagesRequested,e.messageHttpStatus),s=t(e,Np);return r().createElement(Dp,a({},s,{status:n,fetchRequested:this.fetchRequested}))}}]),s}(r().PureComponent),qp={markMessagesRequested:T.markMessagesRequested,fetchMessagesRequested:wt,resendMessageRequested:mn,fillMessageRequested:st,setCurrentConversationCanRead:T.setCurrentConversationCanRead,cancelSendingMessageRequested:vs,deleteConversationMessageHash:Ln,setInScrollToMessage:rn,setNavigateToUnreadMessage:T.setNavigateToUnreadMessage,updateCaptchaVisible:T.updateCaptchaVisible,updateCaptchaSignature:T.updateCaptchaSignature};const Gp=(0,h.connect)((function(e){return{isScChat:(0,T.isScChatSelector)(e),hasMoreOlderMessage:(0,T.hasMoreOlderMessageSelector)(e),hasMoreLatestMessage:(0,T.hasMoreLatestMessageSelector)(e),isSubAccount:(0,T.isSubAccountSelector)(e),messageList:(0,T.curConvsMessageSelector)(e),showChatWindow:(0,T.showChatWindowSelector)(e),unreadMessageIds:(0,T.unreadMessageIdsSelector)(e),messageHttpStatus:(0,T.messageHttpStatusSelector)(e),showConversationDetail:(0,T.showConversationDetailSelector)(e),currentConversationCanRead:(0,T.currentConversationCanReadSelector)(e),showWarningMessageIds:(0,T.showWarningMessageIdsSelector)(e),conversationId:(0,T.currentConversationIdSelector)(e),conversationShopId:(0,T.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,T.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,T.currentConversationStatusSelectors)(e),shop:(0,T.currentConversationShopSelectors)(e),inScrollToMessage:(0,T.inScrollToMessageSelector)(e)||(0,T.inlocationSelector)(e),shopTranslationSettings:(0,T.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,T.currentConversationTranslationAccessSelector)(e),messagesFillStatusMap:(0,T.messageFillStatusMapSelector)(e),locale:(0,T.localeSelector)(e),currentFaqSessionInfo:(0,T.currentFaqSessionInfoSelector)(e),toBottomHasConflict:(0,T.toBottomHasConflictSelector)(e),isNavigateToUnreadMessage:(0,T.isNavigateToUnreadMessageSelector)(e),navigateToUnreadMessageId:(0,T.navigateToUnreadMessageIdSelector)(e),captchaVisible:(0,T.captchaVisibleSelector)(e)}}),qp)(Lp);var Up=tc,Hp=ec,Yp=t(e,["reducerMap","sagas"]),Vp=function(){return{id:"message-section",reducerMap:Up,sagas:Hp,actionsMap:Yp,retained:!0}};function zp(e){return r().createElement(s.DynamicModuleLoader,{modules:[Vp()]},r().createElement(Gp,e))}})(),K.O(J)})(),e.exports=r(n(67294),n(99591),n(50558),n(34012),n(20590),n(31427),n(78330),n(54818),n(36032),n(26842),n(37764),n(74010),n(77996),n(53053),n(34857),n(67429),n(28366),n(58518),n(70249),n(46811),n(31479),n(67976),n(94633),n(79940),n(87766),n(3093),n(47865),n(13283),n(16599),n(90167),n(56462),n(90785),n(2091),n(33640),n(86134),n(41037),n(94184),n(847),n(83253),n(80862),n(82365),n(19920),n(92625),n(99995),n(80671))},56462:e=>{e.exports='<svg data-name=" 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><g data-name="Layer 1"><path d="M512 1024A512.2 512.2 0 01312.75 40.2a512.12 512.12 0 01398.6 943.5A507.07 507.07 0 01512 1024zm0-960a447.88 447.88 0 00-316.8 764.8A448 448 0 10686.45 99.2 444.4 444.4 0 00512 64z"></path><path d="M448 736a31.55 31.55 0 01-22.6-9.4l-192-192a32 32 0 1145.3-45.3L448 658.7l297.4-297.4a32 32 0 1145.3 45.3l-320 320A32 32 0 01448 736z"></path></g></svg>'},47865:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><path d="M480 160v626.7L246.6 553.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l288 288c.4.4.8.7 1.2 1.1.2.2.4.3.6.5.2.2.4.4.6.5.2.2.5.4.7.6.2.1.3.3.5.4.3.2.5.4.8.6.1.1.3.2.4.3l.9.6c.2.1.3.2.5.3.3.2.6.3.9.5.2.1.3.2.5.3.3.1.6.3.8.4l.6.3c.3.1.5.2.8.3.2.1.5.2.7.3.2.1.5.2.7.3.3.1.5.2.8.3.2.1.4.1.6.2l.9.3c.2.1.4.1.5.2.3.1.7.2 1 .3.2 0 .3.1.5.1.3.1.7.2 1 .2.2 0 .3.1.5.1.3.1.7.1 1 .2.2 0 .4 0 .6.1.3 0 .6.1 1 .1.3 0 .5 0 .8.1.3 0 .5 0 .8.1h3.2c.3 0 .5 0 .8-.1.3 0 .5 0 .8-.1.3 0 .6-.1 1-.1.2 0 .4 0 .6-.1.3-.1.7-.1 1-.2.2 0 .3-.1.5-.1.3-.1.7-.1 1-.2.2 0 .3-.1.5-.1.3-.1.7-.2 1-.3.2-.1.4-.1.5-.2l.9-.3c.2-.1.4-.1.6-.2.3-.1.5-.2.8-.3.2-.1.5-.2.7-.3.2-.1.5-.2.7-.3.3-.1.5-.2.8-.3l.6-.3c.3-.1.6-.3.8-.4.2-.1.3-.2.5-.3.3-.2.6-.3.9-.5.2-.1.3-.2.5-.3l.9-.6c.2-.1.3-.2.5-.3.3-.2.5-.4.8-.6.2-.1.3-.3.5-.4.2-.2.5-.4.7-.6.2-.2.4-.4.7-.6l.5-.5c.4-.4.8-.7 1.2-1.1l288-288c6.2-6.2 9.4-14.4 9.4-22.6s-3.1-16.4-9.4-22.6c-12.5-12.5-32.8-12.5-45.3 0L544 786.7V160c0-17.7-14.3-32-32-32s-32 14.3-32 32z"></path></svg>'},74010:e=>{e.exports='<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_92_10269)"><circle cx="18" cy="17" r="17" fill="#FAFAFA"></circle></g><path d="M18 17.1464L23.1464 12L23.8535 12.7071L18.7071 17.8536C18.3165 18.2441 17.6834 18.2441 17.2929 17.8536L12.1464 12.7071L12.8535 12L18 17.1464Z" fill="#EE4D2D"></path><path d="M18 22.1464L23.1464 17L23.8535 17.7071L18.7071 22.8536C18.3165 23.2441 17.6834 23.2441 17.2929 22.8536L12.1464 17.7071L12.8535 17L18 22.1464Z" fill="#EE4D2D"></path><defs><filter id="filter0_d_92_10269" x="0" y="0" width="36" height="36" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="0.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_92_10269"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_92_10269" result="shape"></feBlend></filter></defs></svg>'},10416:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><path d="M5.75 2.75v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75h-12A.75.75 0 012 15.5v-12a.75.75 0 01.75-.75h3zm4.175 7.614l2.651-2.652-1.06-1.06-2.652 2.651-2.652-2.651-1.06 1.06 2.651 2.652-2.651 2.652 1.06 1.06 2.652-2.651 2.652 2.651 1.06-1.06-2.651-2.652zM7.25 2h3a.75.75 0 01.75.75v.75H6.5v-.75A.75.75 0 017.25 2z"></path></svg>'},13829:e=>{e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.0001 13.4001C10.5347 13.4001 13.4001 10.5347 13.4001 7.0001C13.4001 3.46548 10.5347 0.600098 7.0001 0.600098C3.46548 0.600098 0.600098 3.46548 0.600098 7.0001C0.600098 10.5347 3.46548 13.4001 7.0001 13.4001ZM3.72691 4.78757L5.93944 7.0001L3.72691 9.21262L4.78757 10.2733L7.0001 8.06076L9.21262 10.2733L10.2733 9.21262L8.06076 7.0001L10.2733 4.78757L9.21262 3.72691L7.0001 5.93944L4.78757 3.72691L3.72691 4.78757Z" fill="black" fill-opacity="0.26"></path></svg>'},9293:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm1.409 8.553L5.288 8.682l-1.061 1.06 3.182 3.183 6.364-6.364-1.06-1.061-5.304 5.303zM7.5 1.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},81951:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="chat-icon"><path d="M17.77 8.536l-2.121-2.122-2.122 2.122 2.122 2.12 2.12-2.12zm-2.829 2.828l-2.12-2.121-6.109 6.108-.212 2.333 2.333-.212 6.108-6.108zm1.415-5.657l2.12 2.121a1 1 0 010 1.415l-8.935 8.936a1 1 0 01-.617.289l-2.333.212a1 1 0 01-1.087-1.086l.212-2.334a1 1 0 01.289-.617l8.936-8.936a1 1 0 011.415 0z"></path></svg>'},92281:e=>{e.exports='<svg viewBox="0 0 18 19" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 9.5a8 8 0 11-16 0 8 8 0 0116 0zm-7.2 1H8.3v-5h1.5v5zm-1.5 3h1.5V12H8.3v1.5z"></path></svg>'},84931:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M15.69 11.919a1.985 1.985 0 01-.033 1.981 1.985 1.985 0 01-1.722.981H2.002a1.982 1.982 0 01-1.72-.981 1.985 1.985 0 01-.033-1.981L6.216 1.038c.176-.325.44-.594.762-.779a2.02 2.02 0 011.983.002c.322.183.586.453.763.778l5.965 10.88zm-7.721.962a1 1 0 000-2 1 1 0 000 2zm1-8.015v-.011a1 1 0 00-2 0v.039c0 .058.006.115.017.173l.486 4.37a.5.5 0 00.994-.001l.486-4.37a.932.932 0 00.017-.174v-.026z"></path></svg>'},4903:e=>{e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.626 5.209a.373.373 0 010 .527L2.043 7.32A1.866 1.866 0 004.68 9.957l1.583-1.583a.373.373 0 11.527.528L5.21 10.485a2.612 2.612 0 11-3.694-3.694L3.098 5.21a.373.373 0 01.528 0zm4.22-1.056a.373.373 0 010 .528L4.682 7.847a.373.373 0 11-.528-.528L7.32 4.153a.373.373 0 01.528 0zm2.639-2.638a2.612 2.612 0 010 3.694L8.902 6.79a.373.373 0 01-.528-.527L9.957 4.68A1.866 1.866 0 007.32 2.043L5.736 3.626a.373.373 0 01-.528-.528l1.583-1.583a2.612 2.612 0 013.694 0z" fill-opacity=".4"></path></svg>'},73707:e=>{e.exports='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_434_6291" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 3C8 2.44772 8.44772 2 9 2H9.5H14.5H15C15.5523 2 16 2.44772 16 3V5H14.5V3.5H9.5V5H8V3Z"></path></mask><path fill-rule="evenodd" clip-rule="evenodd" d="M8 3C8 2.44772 8.44772 2 9 2H9.5H14.5H15C15.5523 2 16 2.44772 16 3V5H14.5V3.5H9.5V5H8V3Z" fill="#D8D8D8"></path><path d="M16 5V6H17V5H16ZM14.5 5H13.5V6H14.5V5ZM14.5 3.5H15.5V2.5H14.5V3.5ZM9.5 3.5V2.5H8.5V3.5H9.5ZM9.5 5V6H10.5V5H9.5ZM8 5H7V6H8V5ZM9 1C7.89543 1 7 1.89543 7 3H9V3V1ZM9.5 1H9V3H9.5V1ZM14.5 1H9.5V3H14.5V1ZM14.5 3H15V1H14.5V3ZM15 3H17C17 1.89543 16.1046 1 15 1V3ZM15 3V5H17V3H15ZM16 4H14.5V6H16V4ZM15.5 5V3.5H13.5V5H15.5ZM9.5 4.5H14.5V2.5H9.5V4.5ZM10.5 5V3.5H8.5V5H10.5ZM8 6H9.5V4H8V6ZM7 3V5H9V3H7Z" fill="#888888" mask="url(#path-1-inside-1_434_6291)"></path><rect x="4.375" y="4.875" width="15.25" height="0.75" fill="#D8D8D8" stroke="#888888" stroke-width="0.75"></rect><path d="M19 7V21C19 21.5523 18.5523 22 18 22H6C5.44772 22 5 21.5523 5 21L5 7" stroke="#888888" stroke-width="1.5"></path><rect x="9.5" y="9" width="1.5" height="9" fill="#888888"></rect><rect x="13" y="9" width="1.5" height="9" fill="#888888"></rect></svg>'},71417:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 1a7 7 0 110 14A7 7 0 018 1zm0 1a6 6 0 100 12A6 6 0 008 2zm-.012 8.238a.75.75 0 110 1.5.75.75 0 010-1.5zm.129-5.633c1.853 0 2.658 1.9 1.826 3.117-.174.254-.377.423-.672.593l-.156.084-.157.08c-.395.204-.464.28-.464.542a.5.5 0 01-1 0c0-.68.271-1.024.865-1.355l.408-.215c.175-.1.276-.185.35-.293.404-.591-.003-1.553-1-1.553-.7 0-1.289.408-1.36.948l-.007.11-.008.09a.5.5 0 01-.992-.09c0-1.22 1.122-2.058 2.367-2.058z"></path></svg>'},82233:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M5.75 2.75v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75h-12A.75.75 0 012 15.5v-12a.75.75 0 01.75-.75h3zM7.25 2h3a.75.75 0 01.75.75v.75H6.5v-.75A.75.75 0 017.25 2zM9 12.5v-1.486l-2 2 2 2V14a4 4 0 10-4-4h1.5A2.5 2.5 0 119 12.5z"></path></svg>'},77277:e=>{e.exports='<svg viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.526796 5.89526L5.06797 1.44829C5.34696 1.17508 5.80442 1.34136 5.86418 1.7049L5.87069 1.78573V3.90409C9.29568 4.07198 11.7085 6.06944 12.9601 8.9607C13.4242 10.033 13.6596 11.1334 13.6 11.8187C13.5006 12.9599 12.6184 12.8868 12.057 11.9203L11.9937 11.8049C11.0822 10.0423 9.1664 8.76383 6.21574 7.98789L5.87069 7.90059V10.4758C5.87069 10.8613 5.44132 11.0735 5.13868 10.8707L5.07597 10.8209L0.534796 6.57779C0.360041 6.4145 0.337747 6.15096 0.469967 5.9622L0.526796 5.89526L5.06797 1.44829L0.526796 5.89526ZM4.92621 2.90923L1.54052 6.22468L4.92621 9.38812V7.30838C4.92621 7.00779 5.2033 6.78368 5.49725 6.84654C8.98702 7.59279 11.3655 8.95666 12.5992 10.9582C12.5121 10.4806 12.3402 9.90622 12.0933 9.33593C10.9235 6.63347 8.66035 4.83718 5.39849 4.83718C5.16664 4.83718 4.97381 4.67011 4.93382 4.44979L4.92621 4.3649V2.90923Z" fill="#888"></path></svg>'},19768:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.994.994a6 6 0 014.584 9.87l3.28 3.28a.5.5 0 01-.639.764l-.069-.058-3.278-3.278A6 6 0 116.994.993zm0 1a5 5 0 100 10 5 5 0 000-10z"></path></svg>'},11772:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><path d="M511 1C228.2 1-1 230.2-1 513s229.2 512 512 512 512-229.2 512-512S793.8 1 511 1zm313.3 380.4l-362 362c-16.7 16.7-43.7 16.7-60.3 0L200.9 542.3c-16.7-16.7-16.7-43.7 0-60.3 16.7-16.7 43.7-16.7 60.3 0l171 171L764 321.1c16.7-16.7 43.7-16.7 60.3 0 16.7 16.6 16.7 43.7 0 60.3z"></path></svg>'},50357:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><g fill-rule="evenodd"><path d="M2.05 13H1V4a1 1 0 011-1h9.738v2h3.481a1 1 0 01.97.757L17 9v4h-1.05a2.5 2.5 0 00-4.9 0h-4.1a2.5 2.5 0 00-4.9 0zM12 6v2h3.807l-.524-2H12z"></path><circle cx="4.5" cy="13.5" r="1.5"></circle><circle cx="13.5" cy="13.5" r="1.5"></circle></g></svg>'},68291:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm-1.5 4.5v1.5h9v-1.5h-9zm0 3.25v1.5h6V10h-6zm3-8.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},37364:e=>{e.exports='<svg viewBox="0 0 24 26" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M16.556 19.4c-.152 1.243-.91 2.24-2.085 2.738a5.258 5.258 0 01-2.226.38 7.213 7.213 0 01-3.032-.78c-.34-.174-.84-.517-1.216-.83-.086-.072-.13-.136-.047-.252.088-.132.436-.635.49-.718.074-.113.196-.118.307-.031.016.012.129.1.152.116.9.701 2.063 1.227 3.354 1.276 1.628-.021 2.81-.747 3.02-1.87.232-1.237-.755-2.298-2.657-2.89-.604-.189-2.124-.793-2.405-.957-1.325-.772-1.942-1.784-1.854-3.03.135-1.728 1.747-3.022 3.793-3.03a6.937 6.937 0 012.694.55c.298.126.854.424 1.053.57.138.102.128.215.073.303-.08.134-.321.508-.418.664-.07.107-.158.119-.283.04a5.673 5.673 0 00-3.091-.954c-1.398.028-2.452.853-2.521 1.984-.018 1.022.763 1.763 2.422 2.33 3.425 1.092 4.723 2.377 4.477 4.391zM12.329 1.645c2.217 0 4.024 2.09 4.109 4.705H8.221c.084-2.615 1.891-4.705 4.108-4.705zm8.417 24.225c1.17-.032 2.12-.978 2.22-2.15l.007-.142.83-16.71v-.026a.492.492 0 00-.492-.492h-5.326c-.13-3.453-2.613-6.207-5.656-6.207-3.043 0-5.525 2.754-5.655 6.207H1.34a.492.492 0 00-.481.53l.756 16.645.011.209c.116 1.158.962 2.09 2.113 2.134l16.922.002h.085z"></path></svg>'},23384:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm1.5-.75h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75zm1.09 5.09v2a3.704 3.704 0 01-.415-.125 1.33 1.33 0 01-.36-.195 1.013 1.013 0 01-.255-.29.795.795 0 01-.1-.41c0-.353.098-.605.295-.755.197-.15.475-.225.835-.225zm-1.28 4.24H6.17a2.49 2.49 0 00.165.99c.117.287.282.528.495.725.213.197.47.348.77.455.3.107.63.163.99.17v.78h.43v-.78c.333-.013.643-.068.93-.165a2.23 2.23 0 00.75-.42 1.93 1.93 0 00.505-.69c.123-.277.185-.602.185-.975 0-.36-.067-.663-.2-.91a1.904 1.904 0 00-.53-.62 2.957 2.957 0 00-.76-.41c-.287-.107-.58-.2-.88-.28V6.59c.36 0 .622.09.785.27.163.18.252.44.265.78h1.14a1.99 1.99 0 00-.175-.86 1.721 1.721 0 00-.47-.61 1.996 1.996 0 00-.695-.36c-.267-.08-.55-.12-.85-.12v-.78h-.43v.78c-.3 0-.587.043-.86.13a2.302 2.302 0 00-.725.375c-.21.163-.377.367-.5.61a1.845 1.845 0 00-.185.845c0 .367.067.673.2.92s.308.452.525.615c.217.163.46.297.73.4.27.103.542.192.815.265v2.42c-.46-.013-.79-.147-.99-.4-.2-.253-.297-.6-.29-1.04zm1.71 1.44V9.94c.153.04.303.087.45.14.147.053.278.123.395.21.117.087.21.193.28.32a.96.96 0 01.105.47c0 .4-.115.692-.345.875-.23.183-.525.288-.885.315z"></path></svg>'},8343:e=>{e.exports='<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8.99984" cy="8.99984" r="8.58333" fill="black" fill-opacity="0.5" stroke="white" stroke-width="0.5"></circle><path fill-rule="evenodd" clip-rule="evenodd" d="M12.1703 8.60016C12.4369 8.80016 12.4369 9.20016 12.1703 9.40016L7.94806 12.5668C7.61844 12.814 7.14806 12.5789 7.14806 12.1668L7.14806 5.83349C7.14806 5.42147 7.61844 5.18628 7.94806 5.4335L12.1703 8.60016Z" fill="white"></path></svg>'},90167:e=>{e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 9.75C6.41421 9.75 6.75 9.41421 6.75 9C6.75 8.58579 6.41421 8.25 6 8.25C5.58579 8.25 5.25 8.58579 5.25 9C5.25 9.41421 5.58579 9.75 6 9.75Z"></path><path d="M6.5 7.5V2.5H5.5V7.5H6.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6ZM6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11Z"></path></svg>'},33640:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M8 16A8 8 0 118 0a8 8 0 010 16zm.8-7V4H7.3v5h1.5zm0 3v-1.5H7.3V12h1.5z"></path></svg>'}}]);